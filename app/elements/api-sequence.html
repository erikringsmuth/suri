<!-- Copyright (C) 2014 Erik Ringsmuth <erik.ringsmuth@gmail.com> -->
<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/elements/api-sequence-menu.html">

<polymer-element name="api-sequence" propertyibutes="">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <div class="row">
      <div class="col-sm-3">
        <api-sequence-menu apisequence="{{apiSequence}}"></api-sequence-menu>
      </div>
      <div id="contentPlaceholder" class="col-sm-9">
      </div>
    </div>
  </template>
  <script>
    Polymer('api-sequence', {
      created: function() {
        this.apiSequence = [];
      },

      ready: function() {
        var newPanel = function newPanel(panel, detail) {
          panel.apiSequence = this.apiSequence;

          for (var property in detail) {
            if (detail.hasOwnProperty(property)) {
              panel[property] = detail[property];
            }
          }

          this.apiSequence.push(panel);
          this.$.contentPlaceholder.appendChild(panel);
        }.bind(this);

        // New XHR panel
        window.addEventListener('new-xhr-panel', function newXhrPanel(event) {
          newPanel(document.createElement('xhr-panel'), event.detail);
        }, true);

        // New code panel
        window.addEventListener('new-code-panel', function newCodePanel(event) {
          newPanel(document.createElement('code-panel'), event.detail);
        }, true);
      }
    });
  </script>
</polymer-element>
