<!-- Copyright (C) 2014 Erik Ringsmuth <erik.ringsmuth@gmail.com> -->
<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/elements/api-sequence-menu.html">

<polymer-element name="api-sequence" attributes="">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <div class="row">
      <div class="col-sm-3">
        <api-sequence-menu apisequence="{{apiSequence}}"></api-sequence-menu>
      </div>
      <div id="contentPlaceholder" class="col-sm-9">
      </div>
    </div>
  </template>
  <script>
    Polymer('api-sequence', {
      created: function() {
        this.apiSequence = [];
      },

      ready: function() {
        // New XHR panel
        window.addEventListener('new-xhr-panel', function newXhrPanel(details) {
          var panel = document.createElement('xhr-panel');
          panel.apiSequence = this.apiSequence;
          this.apiSequence.push(panel);
          this.$.contentPlaceholder.appendChild(panel);
        }.bind(this), true);

        // New code panel
        window.addEventListener('new-code-panel', function newXhrPanel(details) {
          var panel = document.createElement('code-panel');
          panel.apiSequence = this.apiSequence;
          this.apiSequence.push(panel);
          this.$.contentPlaceholder.appendChild(panel);
        }.bind(this), true);
      }
    });
  </script>
</polymer-element>
