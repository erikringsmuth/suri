<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/elements/new-xhr-panel-button.html">
<link rel="import" href="/elements/new-code-panel-button.html">

<polymer-element name="api-sequence-menu" attributes="contentPlaceholder apiSequence">
  <template>
    <style>
      :host {
        display: block;
        white-space: nowrap;
        overflow: hidden
      }
      :host li:hover {
        background-color: #ebebeb;
      }
    </style>
    <h2>API Sequence <button type="button" class="btn btn-default">Save</button></h2>
    <ul class="list-group">
      <template repeat="{{ item, index in apiSequence }}">
        <li class="list-group-item" data-index="{{index}}" on-click="{{scrollToPanel}}">{{item.panelName}}<button type="button" class="close" data-index="{{index}}" on-click="{{removePanel}}" aria-hidden="true">&times;</button></li>
      </template>
    </ul>
    <new-xhr-panel-button apisequence="{{apiSequence}}" contentplaceholder="{{contentPlaceholder}}"></new-xhr-panel-button>
    <new-code-panel-button  apisequence="{{apiSequence}}" contentplaceholder="{{contentPlaceholder}}"></new-code-panel-button>
  </template>
  <script>
    Polymer('api-sequence-menu', {
      scrollToPanel: function scrollToPanel(event) {
        scrollTo(0, this.apiSequence[event.target.dataset.index].offsetTop);
      },

      removePanel: function removePanel(event) {
        this.apiSequence[event.target.dataset.index].close();
      }
    });
  </script>
</polymer-element>
