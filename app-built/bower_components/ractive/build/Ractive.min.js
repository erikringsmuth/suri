!function(e){var t=function(){return"undefined"!=typeof document?document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):void 0}(),n=function(){var e;try{Object.create(null),e=Object.create}catch(t){e=function(){var e=function(){};return function(t,n){var r;return null===t?{}:(e.prototype=t,r=new e,n&&Object.defineProperties(r,n),r)}}()}return e}(),r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},i=function(e,t){return e?function(e,t){return t?document.createElementNS(t,e):document.createElement(e)}:function(e,n){if(n&&n!==t.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See https://github.com/RactiveJS/Ractive/wiki/SVG-and-older-browsers for more information";return document.createElement(e)}}(t,r),s=function(){return"object"==typeof document?!0:!1}(),o=function(e){try{return Object.defineProperty({},"test",{value:0}),e&&Object.defineProperty(document.createElement("div"),"test",{value:0}),Object.defineProperty}catch(t){return function(e,t,n){e[t]=n.value}}}(s),u=function(e,t,n){try{try{Object.defineProperties({},{test:{value:0}})}catch(r){throw r}return n&&Object.defineProperties(e("div"),{test:{value:0}}),Object.defineProperties}catch(r){return function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e,r,n[r])}}}(i,o,s),a=function(){var e=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(t){return(t||"").replace(e,".$1")}}(),f={},l={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40},c=function(){var e=Object.prototype.toString;return function(t){return"[object Array]"===e.call(t)}}(),h=function(){return function e(t,n){var r,i;if((i=t._wrapped[n])&&i.teardown()!==!1&&(t._wrapped[n]=null),t._cache[n]=void 0,r=t._cacheMap[n])for(;r.length;)e(t,r.pop())}}(),p=function(){return function(e,t){var n,r,i,s,o,u;for(n=[],u=e.rendered?e.el:e.fragment.docFrag,r=u.querySelectorAll('input[type="checkbox"][name="{{'+t+'}}"]'),s=r.length,o=0;s>o;o+=1)i=r[o],(i.hasAttribute("checked")||i.checked)&&(n[n.length]=i._ractive.value);return n}}(),d=function(e){return function(t){var n,r,i,s,o,u;for(n=t._deferred;r=n.evals.pop();)r.update().deferred=!1;for(;i=n.selectValues.pop();)i.deferredUpdate();for(;s=n.attrs.pop();)s.update().deferred=!1;for(;o=n.checkboxes.pop();)t.set(o,e(t,o));for(;u=n.radios.pop();)u.update()}}(p),v=function(){return function(e){var t,n,r,i,s,o;for(t=e._deferred,(n=t.focusable)&&(n.focus(),t.focusable=null);r=t.liveQueries.pop();)r._sort();for(;i=t.decorators.pop();)i.init();for(;s=t.transitions.pop();)s.init();for(;o=t.observers.pop();)o.update()}}(),m=function(){var e=function(e,t){var n,r,i,s;return e._parent&&e._parent._transitionManager?e._parent._transitionManager:(r=[],i=function(){var e,t;for(e=r.length;e--;)t=r[e],s(t.node)&&(t.detach(),r.splice(e,1))},s=function(e){var t,r;for(t=n.active.length;t--;)if(r=n.active[t],e.contains(r))return!1;return!0},n={active:[],push:function(e){n.active[n.active.length]=e},pop:function(e){var t;t=n.active.indexOf(e),-1!==t&&(n.active.splice(t,1),i(),!n.active.length&&n._ready&&n.complete())},complete:function(){t&&t.call(e)},ready:function(){i(),n._ready=!0,n.active.length||n.complete()},detachWhenReady:function(e){r[r.length]=e}})};return e}(),g=function(){function e(e,r,i,s){var o=e._deps[i];o&&(t(o[r]),s||n(e._depsMap[r],e,i))}function t(e){var t,n;if(e)for(n=e.length,t=0;n>t;t+=1)e[t].update()}function n(t,n,r,i){var s;if(t)for(s=t.length;s--;)e(n,t[s],r,i)}function r(e,t,n,s,o){var a,f,l,c,h,p,d,v;for(a=e._patternObservers.length;a--;)f=e._patternObservers[a],f.regex.test(n)&&f.update(n);s||(v=function(t){if(l=e._depsMap[t])for(a=l.length;a--;)c=l[a],h=u.exec(c)[0],p=n+"."+h,r(e,c,p)},o?(d=i(n),d.forEach(v)):v(t))}function i(e){var t,n,r,i,o,u;for(t=e.split("."),n=s(t.length),o=[],r=function(e,n){return e?"*":t[n]},i=n.length;i--;)u=n[i].map(r).join("."),o[u]||(o[o.length]=u,o[u]=!0);return o}function s(e){var t,n,r,i,s,o="";if(!a[e]){for(r=[];o.length<e;)o+=1;for(t=parseInt(o,2),i=function(e){return"1"===e},s=0;t>=s;s+=1){for(n=s.toString(2);n.length<e;)n="0"+n;r[s]=Array.prototype.map.call(n,i)}a[e]=r}return a[e]}var o,u,a={};return u=/[^\.]+$/,o=function(t,n,i){var s;for(t._patternObservers.length&&r(t,n,n,i,!0),s=0;s<t._deps.length;s+=1)e(t,n,s,i)},o.multiple=function(t,n,i){var s,o,u;if(u=n.length,t._patternObservers.length)for(s=u;s--;)r(t,n[s],n[s],i,!0);for(s=0;s<t._deps.length;s+=1)if(t._deps[s])for(o=u;o--;)e(t,n[o],s,i)},o}(),y=function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m,g;return a={filter:function(e){return n(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new l(e,t,n)}},l=function(e,n,r){this.root=e,this.value=n,this.keypath=r,n._ractive||(t(n,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),c(n)),n._ractive.instances[e._guid]||(n._ractive.instances[e._guid]=0,n._ractive.instances.push(e)),n._ractive.instances[e._guid]+=1,n._ractive.wrappers.push(this)},l.prototype={get:function(){return this.value},teardown:function(){var e,t,n,r,i;if(e=this.value,t=e._ractive,n=t.wrappers,r=t.instances,t.setting)return!1;if(i=n.indexOf(this),-1===i)throw new Error(g);if(n.splice(i,1),n.length){if(r[this.root._guid]-=1,!r[this.root._guid]){if(i=r.indexOf(this.root),-1===i)throw new Error(g);r.splice(i,1)}}else delete e._ractive,h(this.value)}},f=function(t,n,s){var o,a,f,l,c;for(o=function(e,o){var f,l,c,h,p,d,v,m,g,y,b,w;if("sort"===n||"reverse"===n)return e.set(o,t),void 0;for(r(e,o),p=[],d=[],v=0;v<e._deps.length;v+=1)if(f=e._deps[v],f&&(l=f[o])){for(a(o,l,p,d),i(e);p.length;)p.pop().smartUpdate(n,s);for(;d.length;)d.pop().update()}if("splice"===n&&s.length>2&&s[1])for(m=Math.min(s[1],s.length-2),g=s[0],y=g+m,s[1]===s.length-2&&(w=!0),v=g;y>v;v+=1)b=o+"."+v,u(e,b);for(i(e),h=[],c=o.split(".");c.length;)c.pop(),h[h.length]=c.join(".");u.multiple(e,h,!0),w||u(e,o+".length",!0)},a=function(t,n,r,i){var s,o;for(s=n.length;s--;)o=n[s],o.type===e.REFERENCE?o.update():o.keypath===t&&o.type===e.SECTION&&!o.inverted&&o.docFrag?r[r.length]=o:i[i.length]=o},f=t._ractive.wrappers,c=f.length;c--;)l=f[c],o(l.root,l.keypath)},p=[],v=["pop","push","reverse","shift","sort","splice","unshift"],m=function(){},v.forEach(function(e){var n=function(){var t,n,r,u,a={},l={};for(t=Array.prototype[e].apply(this,arguments),n=this._ractive.instances,u=n.length;u--;)r=n[u],a[r._guid]=r._transitionManager,r._transitionManager=l[r._guid]=o(r,m);for(this._ractive.setting=!0,f(this,e,arguments),this._ractive.setting=!1,u=n.length;u--;)r=n[u],r._transitionManager=a[r._guid],l[r._guid].ready(),i(r),s(r);return t};t(p,e,{value:n})}),d={},d.__proto__?(c=function(e){e.__proto__=p},h=function(e){e.__proto__=Array.prototype}):(c=function(e){var n,r;for(n=v.length;n--;)r=v[n],t(e,r,{value:p[r],configurable:!0})},h=function(e){var t;for(t=v.length;t--;)delete e[v[t]]}),g="Something went wrong in a rather interesting way",a}(l,o,c,h,d,v,m,g),b=function(){var e,t;try{Object.defineProperty({},"test",{value:0})}catch(n){return!1}return e={filter:function(e,t){return!!t},wrap:function(e,n,r){return new t(e,n,r)}},t=function(e,t,n){var r,i,s,o,u,a,f,l,c,h=this;if(this.ractive=e,this.keypath=n,r=n.split("."),this.prop=r.pop(),s=r.join("."),this.obj=s?e.get(s):e.data,o=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),o&&o.set&&(u=o.set._ractiveWrappers))return-1===u.indexOf(this)&&u.push(this),void 0;if(o&&!o.configurable)throw new Error('Cannot use magic mode with property "'+i+'" - object is not configurable');o&&(this.value=o.value,a=o.get,f=o.set),l=a||function(){return h.value},c=function(e){var t,n,r;for(f&&f(e),t=c._ractiveWrappers,r=t.length;r--;)n=t[r],n.resetting||n.ractive.set(n.keypath,e)},c._ractiveWrappers=[this],Object.defineProperty(this.obj,this.prop,{get:l,set:c,enumerable:!0,configurable:!0})},t.prototype={get:function(){return this.value},reset:function(e){this.resetting=!0,this.value=e,this.resetting=!1},teardown:function(){var e,t,n,r;e=Object.getOwnPropertyDescriptor(this.obj,this.prop),t=e.set,r=t._ractiveWrappers,r.splice(r.indexOf(this),1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configrable:!0}),this.obj[this.prop]=n)}},e}(),w=function(e,t,n){function r(e,t){var n,r={};if(!t)return e;t+=".";for(n in e)e.hasOwnProperty(n)&&(r[t+n]=e[n]);return r}function i(e){var t;return s[e]||(t=e?e+".":"",s[e]=function(n,i){var s;return"string"==typeof n?(s={},s[t+n]=i,s):"object"==typeof n?t?r(n,e):n:void 0}),s[e]}var s={};return function(r,s,o,u){var a,f,l,c;for(a=r.adaptors.length,f=0;a>f;f+=1){if(l=r.adaptors[f],"string"==typeof l){if(!e[l])throw new Error('Missing adaptor "'+l+'"');l=r.adaptors[f]=e[l]}if(l.filter(o,s,r))return c=r._wrapped[s]=l.wrap(r,o,s,i(s)),c.value=o,void 0}u||(r.magic&&n.filter(o,s,r)?r._wrapped[s]=n.wrap(r,o,s):r.modifyArrays&&t.filter(o,s,r)&&(r._wrapped[s]=t.wrap(r,o,s)))}}(f,y,b),E=function(e,t,n){var r,i,s;return r=function(e){return this._captured&&!this._captured[e]&&(this._captured.push(e),this._captured[e]=!0),i(this,e)},i=function(t,r){var i,o,u,a,f;return r=e(r),i=t._cache,void 0!==(o=i[r])?o:((a=t._wrapped[r])?u=a.value:r?u=(f=t._evaluators[r])?f.value:s(t,r):(n(t,"",t.data),u=t.data),i[r]=u,u)},s=function(e,t){var r,s,o,u,a,f,l;return r=t.split("."),s=r.pop(),o=r.join("."),u=i(e,o),(l=e._wrapped[o])&&(u=l.get()),null!==u&&void 0!==u?((a=e._cacheMap[o])?-1===a.indexOf(t)&&(a[a.length]=t):e._cacheMap[o]=[t],f=u[s],n(e,t,f),e._cache[t]=f,f):void 0},r}(a,f,w),S=function(){var e=Object.prototype.toString;return function(t){return"object"==typeof t&&"[object Object]"===e.call(t)}}(),x=function(){return function(e,t){return null===e&&null===t?!0:"object"==typeof e||"object"==typeof t?!1:e===t}}(),T=function(){var e;return e=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p;if(p='Could not resolve reference - too many "../" prefixes',"."===t){if(!n.length)return"";r=n[n.length-1]}else if("."===t.charAt(0))if(h=n[n.length-1],o=h?h.split("."):[],"../"===t.substr(0,3)){for(;"../"===t.substr(0,3);){if(!o.length)throw new Error(p);o.pop(),t=t.substring(3)}o.push(t),r=o.join(".")}else r=h?h+t:t.substring(1);else{for(i=t.split("."),s=i.pop(),a=i.length?"."+i.join("."):"",n=n.concat();n.length;)if(u=n.pop(),f=u+a,l=e.get(f),(c=e._wrapped[f])&&(l=c.get()),"object"==typeof l&&null!==l&&l.hasOwnProperty(s)){r=u+"."+t;break}r||void 0===e.get(t)||(r=t)}return r?r.replace(/^\./,""):r}}(),N=function(e){var t=Array.prototype.push;return function(n){for(var r,i,s;r=n._pendingResolution.pop();)i=e(n,r.ref,r.contextStack),void 0!==i?r.resolve(i):(s||(s=[])).push(r);s&&t.apply(n._pendingResolution,s)}}(T),C=function(e,t){return function(n){e(n),t(n)}}(d,v),k=function(){return function(e,t,n){var r,i,s,o,u,a,f;for(r=t.split("."),i=[],(s=e._wrapped[""])?(s.set&&s.set(r.join("."),n),o=s.get()):o=e.data;r.length>1;)u=i[i.length]=r.shift(),a=i.join("."),(s=e._wrapped[a])?(s.set&&s.set(r.join("."),n),o=s.get()):(o.hasOwnProperty(u)||(f||(f=a),o[u]=/^\s*[0-9]+\s*$/.test(r[0])?[]:{}),o=o[u]);return u=r[0],o[u]=n,f}}(),L=function(e,t,n,r,i,s,o,u,a){var f,l,c,h;return f=function(t,r,a){var f,h,p,d,v,m,g;if(h=[],e(t)&&(f=t,a=r),f)for(t in f)f.hasOwnProperty(t)&&(r=f[t],t=n(t),l(this,t,r,h));else t=n(t),l(this,t,r,h);if(h.length){if(d=this._transitionManager,this._transitionManager=v=o(this,a),p=c(h),p.length&&i.multiple(this,p,!0),i.multiple(this,h),this._pendingResolution.length&&s(this),u(this),this._transitionManager=d,v.ready(),!this.firingChangeEvent){for(this.firingChangeEvent=!0,g={},m=h.length;m--;)g[h[m]]=this.get(h[m]);this.fire("change",g),this.firingChangeEvent=!1}return this}},l=function(e,t,n,i){var s,o,u,f,l;if(!(u=e._wrapped[t])||!u.reset||h(e,t,n,u,i)===!1){if((l=e._evaluators[t])&&(l.value=n),s=e._cache[t],o=e.get(t),o===n||l){if(n===s&&"object"!=typeof n)return}else f=a(e,t,n);r(e,f||t),i[i.length]=t}},c=function(e){var t,n,r,i,s=[""];for(t=e.length;t--;)for(n=e[t],r=n.split(".");r.length>1;)r.pop(),i=r.join("."),s[i]||(s[s.length]=i,s[i]=!0);return s},h=function(e,n,i,s,o){var u,a,f,l;if(u=s.get(),!t(u,i)&&s.reset(i)===!1)return!1;if(i=s.get(),a=e._cache[n],!t(a,i)){if(e._cache[n]=i,f=e._cacheMap[n])for(l=f.length;l--;)r(e,f[l]);o[o.length]=n}},f}(S,x,a,h,g,N,m,C,k),A=function(e,t,n,r,i){return function(s,o){var u,a;return"function"==typeof s&&(o=s,s=""),a=this._transitionManager,this._transitionManager=u=e(this,o),t(this),n(this,s||""),r(this,s||""),i(this),this._transitionManager=a,u.ready(),"string"==typeof s?this.fire("update",s):this.fire("update"),this}}(m,N,h,g,C),O=function(e){return function(t,n){var r;if(!e(t)||!e(n))return!1;if(t.length!==n.length)return!1;for(r=t.length;r--;)if(t[r]!==n[r])return!1;return!0}}(c),M=function(e,t,n){function r(e,i,s,o,u){var a,f,l,c,h,p;if(a=e._twowayBindings[i])for(l=a.length;l--;)c=a[l],(!c.radioName||c.node.checked)&&(c.checkboxName?c.changed()&&!o[i]&&(o[i]=!0,o[o.length]=i):(h=c.attr.value,p=c.value(),t(h,p)||n(h,p)||(s[i]=p)));if(u&&(f=e._depsMap[i]))for(l=f.length;l--;)r(e,f[l],s,o,u)}return function(t,n){var i,s,o;if("string"!=typeof t&&(t="",n=!0),r(this,t,i={},s=[],n),o=s.length)for(;o--;)t=s[o],i[t]=e(this,t);this.set(i)}}(p,O,x),_=function(){return"undefined"!=typeof window?(function(e,t,n){var r,i;if(!n.requestAnimationFrame){for(r=0;r<e.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[e[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(e){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-t)),s=i(function(){e(n+r)},r),t=n+r,s})}}(["ms","moz","webkit","o"],0,window),window.requestAnimationFrame):void 0}(),D=function(e){var t=[],n={tick:function(){var r,i;for(r=0;r<t.length;r+=1)i=t[r],i.tick()||t.splice(r--,1);t.length?e(n.tick):n.running=!1},add:function(e){t[t.length]=e,n.running||(n.running=!0,n.tick())},abort:function(e,n){for(var r,i=t.length;i--;)r=t[i],r.root===n&&r.keypath===e&&r.stop()}};return n}(_),P=function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply?function(){console.warn.apply(console,arguments)}:function(){}}(),H=function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}}(),B=function(e,t,n){function r(e,t){var n=t-e;return n?function(t){return e+t*n}:function(){return e}}function i(e,t){var n,r,i,s;for(n=[],r=[],s=i=Math.min(e.length,t.length);s--;)r[s]=o(e[s],t[s]);for(s=i;s<e.length;s+=1)n[s]=e[s];for(s=i;s<t.length;s+=1)n[s]=t[s];return function(e){for(var t=i;t--;)n[t]=r[t](e);return n}}function s(e,t){var n,r,i,s,u=[];i={},r={};for(s in e)e.hasOwnProperty(s)&&(t.hasOwnProperty(s)?(u[u.length]=s,r[s]=o(e[s],t[s])):i[s]=e[s]);for(s in t)t.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(i[s]=t[s]);return n=u.length,function(e){for(var t,s=n;s--;)t=u[s],i[t]=r[t](e);return i}}var o=function(o,u){return n(o)&&n(u)?r(+o,+u):e(o)&&e(u)?i(o,u):t(o)&&t(u)?s(o,u):function(){return u}};return o}(c,S,H),j=function(e,t){var n=function(e){var n;this.startTime=Date.now();for(n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);this.interpolator=t(this.from,this.to),this.running=!0};return n.prototype={tick:function(){var t,n,r,i,s,o;return o=this.keypath,this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(null!==o&&this.root.set(o,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),s=this.root._animations.indexOf(this),-1===s&&e("Animation was not found"),this.root._animations.splice(s,1),this.running=!1,!1):(n=this.easing?this.easing(t/this.duration):t/this.duration,null!==o&&(r=this.interpolator(n),this.root.set(o,r)),this.step&&this.step(n,r),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&e("Animation was not found"),this.root._animations.splice(t,1)}},n}(P,B),F=function(){return{linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)}}}(),I=function(e,t,n,r){function i(i,o,u,a){var f,l,c,h;return null!==o&&(h=i.get(o)),t.abort(o,i),e(h,u)?(a.complete&&a.complete(1,a.to),s):(a.easing&&(f="function"==typeof a.easing?a.easing:i.easing&&i.easing[a.easing]?i.easing[a.easing]:r[a.easing],"function"!=typeof f&&(f=null)),l=void 0===a.duration?400:a.duration,c=new n({keypath:o,from:h,to:u,root:i,duration:l,easing:f,step:a.step,complete:a.complete}),t.add(c),i._animations[i._animations.length]=c,c)}var s={stop:function(){}};return function(e,t,n){var r,s,o,u,a,f,l,c,h,p,d,v;if("object"==typeof e){n=t||{},u=n.easing,a=n.duration,o=[],f=n.step,l=n.complete,(f||l)&&(h={},n.step=null,n.complete=null,c=function(e){return function(t,n){h[e]=n}});for(r in e)e.hasOwnProperty(r)&&((f||l)&&(p=c(r),n={easing:u,duration:a},f&&(n.step=p),l&&(n.complete=p)),o[o.length]=i(this,r,e[r],n));return(f||l)&&(v={easing:u,duration:a},f&&(v.step=function(e){f(e,h)}),l&&(v.complete=function(e){l(e,h)}),o[o.length]=d=i(this,null,null,v)),{stop:function(){for(;o.length;)o.pop().stop();d&&d.stop()}}}return n=n||{},s=i(this,e,t,n),{stop:function(){s.stop()}}}}(x,D,j,F),q=function(){return function(e,t){var n,r,i=this;if("object"==typeof e){n=[];for(r in e)e.hasOwnProperty(r)&&(n[n.length]=this.on(r,e[r]));return{cancel:function(){for(;n.length;)n.pop().cancel()}}}return this._subs[e]?this._subs[e].push(t):this._subs[e]=[t],{cancel:function(){i.off(e,t)}}}}(),R=function(){return function(e,t){var n,r;if(!t)if(e)this._subs[e]=[];else for(e in this._subs)delete this._subs[e];n=this._subs[e],n&&(r=n.indexOf(t),-1!==r&&n.splice(r,1))}}(),U=function(){return function(e){var t,n,r,i,s,o,u,a;if(o=e.root,u=e.keypath,a=e.priority,t=o._deps[a]||(o._deps[a]={}),n=t[u]||(t[u]=[]),n[n.length]=e,e.registered=!0,u)for(r=u.split(".");r.length;)r.pop(),i=r.join("."),s=o._depsMap[i]||(o._depsMap[i]=[]),void 0===s[u]&&(s[u]=0,s[s.length]=u),s[u]+=1,u=i}}(),z=function(){return function(e){var t,n,r,i,s,o,u,a;if(o=e.root,u=e.keypath,a=e.priority,t=o._deps[a][u],n=t.indexOf(e),-1===n||!e.registered)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");if(t.splice(n,1),e.registered=!1,u)for(r=u.split(".");r.length;)r.pop(),i=r.join("."),s=o._depsMap[i],s[u]-=1,s[u]||(s.splice(s.indexOf(u),1),s[u]=void 0),u=i}}(),W=function(e){var t=function(e,t,n,r){var i=this;this.root=e,this.keypath=t,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.proxy={update:function(){i.reallyUpdate()}},this.priority=0,this.context=r&&r.context?r.context:e};return t.prototype={init:function(e){e!==!1?this.update():this.value=this.root.get(this.keypath)},update:function(){return this.defer&&this.ready?(this.root._deferred.observers.push(this.proxy),void 0):(this.reallyUpdate(),void 0)},reallyUpdate:function(){var t,n;if(t=this.value,n=this.root.get(this.keypath),this.value=n,!this.updating){if(this.updating=!0,!e(n,t)||!this.ready)try{this.callback.call(this.context,n,t,this.keypath)}catch(r){if(this.debug||this.root.debug)throw r}this.updating=!1}}},t}(x),X=function(){return function(e,t){var n,r,i,s,o,u,a;for(n=t.split("."),s=[],u=function(t){var n,r;n=e._wrapped[t]?e._wrapped[t].get():e.get(t);for(r in n)o.push(t+"."+r)},a=function(e){return e+"."+r};r=n.shift();)"*"===r?(o=[],s.forEach(u),s=o):s[0]?s=s.map(a):s[0]=r;return i={},s.forEach(function(t){i[t]=e.get(t)}),i}}(),V=function(e,t){var n,r=/\*/;return n=function(e,t,n,r){this.root=e,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.keypath=t,this.regex=new RegExp("^"+t.replace(/\./g,"\\.").replace(/\*/g,"[^\\.]+")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=r&&r.context?r.context:e},n.prototype={init:function(e){var n,r;if(n=t(this.root,this.keypath),e!==!1)for(r in n)n.hasOwnProperty(r)&&this.update(r);else this.values=n},update:function(e){var n;if(!r.test(e))return this.defer&&this.ready?(this.root._deferred.observers.push(this.getProxy(e)),void 0):(this.reallyUpdate(e),void 0);n=t(this.root,e);for(e in n)n.hasOwnProperty(e)&&this.update(e)},reallyUpdate:function(t){var n=this.root.get(t);if(this.updating)return this.values[t]=n,void 0;if(this.updating=!0,!e(n,this.values[t])||!this.ready){try{this.callback.call(this.context,n,this.values[t],t)}catch(r){if(this.debug||this.root.debug)throw r}this.values[t]=n}this.updating=!1},getProxy:function(e){var t=this;return this.proxies[e]||(this.proxies[e]={update:function(){t.reallyUpdate(e)}}),this.proxies[e]}},n}(x,X),$=function(e,t,n,r,i){var s=/\*/,o={};return function(u,a,f,l){var c,h;return a=e(a),l=l||o,s.test(a)?(c=new i(u,a,f,l),u._patternObservers.push(c),h=!0):c=new r(u,a,f,l),t(c),c.init(l.init),c.ready=!0,{cancel:function(){var e;h&&(e=u._patternObservers.indexOf(c),-1!==e&&u._patternObservers.splice(e,1)),n(c)}}}}(a,U,z,W,V),J=function(e,t){return function(n,r,i){var s,o=[];if(e(n)){i=r;for(s in n)n.hasOwnProperty(s)&&(r=n[s],o[o.length]=t(this,s,r,i));return{cancel:function(){for(;o.length;)o.pop().cancel()}}}return t(this,n,r,i)}}(S,$),K=function(){return function(e){var t,n,r,i=this._subs[e];if(i)for(t=Array.prototype.slice.call(arguments,1),n=0,r=i.length;r>n;n+=1)i[n].apply(this,t)}}(),Q=function(){return function(e){return this.el?this.fragment.find(e):null}}(),G=function(e,t){var n,r,i,s,o,u,a,f;if(e){for(n=t("div"),r=["matches","matchesSelector"],o=["o","ms","moz","webkit"],f=function(e){return function(t,n){return t[e](n)}},u=r.length;u--;){if(i=r[u],n[i])return f(i);for(a=o.length;a--;)if(s=o[u]+i.substr(0,1).toUpperCase()+i.substring(1),n[s])return f(s)}return function(e,t){var n,r;for(n=(e.parentNode||e.document).querySelectorAll(t),r=n.length;r--;)if(n[r]===e)return!0;return!1}}}(s,i),Y=function(e){return function(t,n){var r=this._isComponentQuery?!this.selector||t.name===this.selector:e(t.node,this.selector);return r?(this.push(t.node||t.instance),n||this._makeDirty(),!0):void 0}}(G),Z=function(){return function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],t=this.selector,n=e.indexOf(t),-1!==n&&(e.splice(n,1),e[t]=null)}}(),et=function(){function e(e){var t;return(t=e.parentFragment)?t.owner:e.component&&(t=e.component.parentFragment)?t.owner:void 0}function t(t){var n,r;for(n=[t],r=e(t);r;)n.push(r),r=e(r);return n}return function(e,n){var r,i,s,o,u,a,f,l,c,h;for(r=t(e.component||e._ractive.proxy),i=t(n.component||n._ractive.proxy),s=r[r.length-1],o=i[i.length-1];s&&s===o;)r.pop(),i.pop(),u=s,s=r[r.length-1],o=i[i.length-1];if(s=s.component||s,o=o.component||o,c=s.parentFragment,h=o.parentFragment,c===h)return a=c.items.indexOf(s),f=h.items.indexOf(o),a-f||r.length-i.length;if(l=u.fragments)return a=l.indexOf(c),f=l.indexOf(h),a-f||r.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),tt=function(e){return function(t,n){var r;return t.compareDocumentPosition?(r=t.compareDocumentPosition(n),2&r?1:-1):e(t,n)}}(et),nt=function(e,t){return function(){this.sort(this._isComponentQuery?t:e),this._dirty=!1}}(tt,et),rt=function(){return function(){this._dirty||(this._root._deferred.liveQueries.push(this),this._dirty=!0)}}(),it=function(){return function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e.node);-1!==t&&this.splice(t,1)}}(),st=function(e,t,n,r,i,s){return function(o,u,a,f){var l;return l=[],e(l,{selector:{value:u},live:{value:a},_isComponentQuery:{value:f},_test:{value:t}}),a?(e(l,{cancel:{value:n},_root:{value:o},_sort:{value:r},_makeDirty:{value:i},_remove:{value:s},_dirty:{value:!1,writable:!0}}),l):l}}(u,Y,Z,nt,rt,it),ot=function(e,t,n,r){return function(e,t){var n,i;return this.el?(t=t||{},n=this._liveQueries,(i=n[e])?t&&t.live?i:i.slice():(i=r(this,e,!!t.live,!1),i.live&&(n.push(e),n[e]=i),this.fragment.findAll(e,i),i)):[]}}(P,G,u,st),ut=function(){return function(e){return this.fragment.findComponent(e)}}(),at=function(e,t,n,r){return function(e,t){var n,i;return t=t||{},n=this._liveComponentQueries,(i=n[e])?t&&t.live?i:i.slice():(i=r(this,e,!!t.live,!0),i.live&&(n.push(e),n[e]=i),this.fragment.findAllComponents(e,i),i)}}(P,G,u,st),ft=function(){return function(e){var t;return"undefined"!=typeof window&&document&&e?e.nodeType?e:"string"==typeof e&&(t=document.getElementById(e),!t&&document.querySelector&&(t=document.querySelector(e)),t&&t.nodeType)?t:e[0]&&e[0].nodeType?e[0]:null:null}}(),lt=function(e,t){return function(n,r){var i,s,o,u,a;if(n.owner=r.owner,o=n.owner.parentFragment,n.root=r.root,n.pNode=r.pNode,n.contextStack=r.contextStack||[],n.owner.type===e.SECTION&&(n.index=r.index),o&&(u=o.indexRefs)){n.indexRefs=t(null);for(a in u)n.indexRefs[a]=u[a]}for(n.priority=o?o.priority+1:1,r.indexRef&&(n.indexRefs||(n.indexRefs={}),n.indexRefs[r.indexRef]=r.index),n.items=[],i=r.descriptor?r.descriptor.length:0,s=0;i>s;s+=1)n.items[n.items.length]=n.createItem({parentFragment:n,descriptor:r.descriptor[s],index:s})}}(l,n),ct=function(e){var t={};return function(n,r,i){var s,o=[];if(n)for(s=t[r]||(t[r]=e(r)),s.innerHTML=n;s.firstChild;)o[o.length]=s.firstChild,i.appendChild(s.firstChild);return o}}(i),ht=function(e){var t,n,r;return n=/</g,r=/>/g,t=function(t,n){this.type=e.TEXT,this.descriptor=t.descriptor,n&&(this.node=document.createTextNode(t.descriptor),n.appendChild(this.node))},t.prototype={detach:function(){return this.node.parentNode.removeChild(this.node),this.node},teardown:function(e){e&&this.detach()},firstNode:function(){return this.node},toString:function(){return(""+this.descriptor).replace(n,"&lt;").replace(r,"&gt;")}},t}(l),pt=function(e){return function(t){if(t.keypath)e(t);else{var n=t.root._pendingResolution.indexOf(t);-1!==n&&t.root._pendingResolution.splice(n,1)}}}(z),dt=function(e,t,n,r,i){function s(e,t,r){var i,s,o;if(!u.test(e.toString()))return n(e,"_nowrap",{value:!0}),e;if(!e["_"+t._guid]){n(e,"_"+t._guid,{value:function(){var n,r,i,o;if(n=t._captured,n||(t._captured=[]),r=e.apply(t,arguments),t._captured.length)for(i=s.length;i--;)o=s[i],o.updateSoftDependencies(t._captured);return t._captured=n,r},writable:!0});for(i in e)e.hasOwnProperty(i)&&(e["_"+t._guid][i]=e[i]);e["_"+t._guid+"_evaluators"]=[]}return s=e["_"+t._guid+"_evaluators"],o=s.indexOf(r),-1===o&&s.push(r),e["_"+t._guid]}var o,u;return u=/this/,o=function(t,n,i,o,u){var a;this.evaluator=i,this.keypath=n,this.root=t,this.argNum=o,this.type=e.REFERENCE,this.priority=u,a=t.get(n),"function"==typeof a&&(a=s(a,t,i)),this.value=i.values[o]=a,r(this)},o.prototype={update:function(){var e=this.root.get(this.keypath);"function"!=typeof e||e._nowrap||(e=s(e,this.root,this.evaluator)),t(e,this.value)||(this.evaluator.values[this.argNum]=e,this.evaluator.bubble(),this.value=e)},teardown:function(){i(this)}},o}(l,x,o,U,z),vt=function(e,t,n){var r=function(e,n,r){this.root=e,this.keypath=n,this.priority=r.priority,this.evaluator=r,t(this)};return r.prototype={update:function(){var t=this.root.get(this.keypath);e(t,this.value)||(this.evaluator.bubble(),this.value=t)},teardown:function(){n(this)}},r}(x,U,z),mt=function(e,t,n,r,i,s,o,u,a){function f(e,t){var n,r;if(e=e.replace(/\$\{([0-9]+)\}/g,"_$1"),c[e])return c[e];for(r=[];t--;)r[t]="_"+t;return n=new Function(r.join(","),"return("+e+")"),c[e]=n,n}var l,c={};return l=function(e,t,n,r,i){var s,o;for(this.root=e,this.keypath=t,this.priority=i,this.fn=f(n,r.length),this.values=[],this.refs=[],s=r.length;s--;)(o=r[s])?o[0]?this.values[s]=o[1]:this.refs[this.refs.length]=new u(e,o[1],this,s,i):this.values[s]=void 0;this.selfUpdating=this.refs.length<=1,this.update()},l.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.root._deferred.evals.push(this),this.deferred=!0)},update:function(){var t;if(this.evaluating)return this;this.evaluating=!0;try{t=this.fn.apply(null,this.values)}catch(i){if(this.root.debug)throw i;t=void 0}return e(t,this.value)||(n(this.root,this.keypath),this.root._cache[this.keypath]=t,o(this.root,this.keypath,t,!0),this.value=t,r(this.root,this.keypath)),this.evaluating=!1,this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();n(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);for(var e=this.refs.length;e--;)this.refs[e].update();this.deferred&&(this.update(),this.deferred=!1)},updateSoftDependencies:function(e){var t,n,r;for(this.softRefs||(this.softRefs=[]),t=this.softRefs.length;t--;)r=this.softRefs[t],e[r.keypath]||(this.softRefs.splice(t,1),this.softRefs[r.keypath]=!1,r.teardown());for(t=e.length;t--;)n=e[t],this.softRefs[n]||(r=new a(this.root,n,this),this.softRefs[this.softRefs.length]=r,this.softRefs[n]=!0);this.selfUpdating=this.refs.length+this.softRefs.length<=1}},l}(x,o,h,g,U,z,w,dt,vt),gt=function(e,t){var n=function(t,n,r,i){var s,o;o=this.root=t.root,s=e(o,n,r),void 0!==s?t.resolveRef(i,!1,s):(this.ref=n,this.argNum=i,this.resolver=t,this.contextStack=r,o._pendingResolution[o._pendingResolution.length]=this)};return n.prototype={resolve:function(e){this.keypath=e,this.resolver.resolveRef(this.argNum,!1,e)},teardown:function(){this.keypath||t(this)}},n}(T,pt),yt=function(){var e=/^(?:(?:[a-zA-Z$_][a-zA-Z$_0-9]*)|(?:[0-9]|[1-9][0-9]+))$/;return function(t){var n,r,i;for(n=t.split("."),i=n.length;i--;)if(r=n[i],"undefined"===r||!e.test(r))return!1;return!0}}(),bt=function(e,t){return function(n,r){var i,s;return i=n.replace(/\$\{([0-9]+)\}/g,function(e,t){return r[t]?r[t][1]:"undefined"}),s=e(i),t(s)?s:"${"+i.replace(/[\.\[\]]/g,"-")+"}"}}(a,yt),wt=function(e,t){function n(e,t,n){var i,s;if(i=e._depsMap[t])for(s=i.length;s--;)r(e,i[s],n)}function r(e,t,r){var i,s,o,u;for(i=e._deps.length;i--;)if(s=e._deps[i],s&&(o=s[t]))for(u=o.length;u--;)r.push(o[u]);n(e,t,r)}return function(n,i,s){var o,u,a;for(o=[],r(n,i,o),u=o.length;u--;)a=o[u],t(a),a.keypath=a.keypath.replace(i,s),e(a),a.update()}}(U,z),Et=function(e,t,n,r){var i=function(e){var n,r,i,s,o;if(this.root=e.root,this.mustache=e,this.args=[],this.scouts=[],n=e.descriptor.x,o=e.parentFragment.indexRefs,this.str=n.s,i=this.unresolved=this.args.length=n.r?n.r.length:0,!i)return this.resolved=this.ready=!0,this.bubble(),void 0;for(r=0;i>r;r+=1)s=n.r[r],o&&void 0!==o[s]?this.resolveRef(r,!0,o[s]):this.scouts[this.scouts.length]=new t(this,s,e.contextStack,r);this.ready=!0,this.bubble()};return i.prototype={bubble:function(){var e;this.ready&&(e=this.keypath,this.keypath=n(this.str,this.args),"${"===this.keypath.substr(0,2)&&this.createEvaluator(),e?r(this.root,e,this.keypath):this.mustache.resolve(this.keypath))},teardown:function(){for(;this.scouts.length;)this.scouts.pop().teardown()},resolveRef:function(e,t,n){this.args[e]=[t,n],this.bubble(),this.resolved=!--this.unresolved},createEvaluator:function(){this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():this.root._evaluators[this.keypath]=new e(this.root,this.keypath,this.str,this.args,this.mustache.priority)}},i}(mt,gt,bt,wt),St=function(e,t){return function(n,r){var i,s,o;o=n.parentFragment=r.parentFragment,n.root=o.root,n.contextStack=o.contextStack,n.descriptor=r.descriptor,n.index=r.index||0,n.priority=o.priority,n.type=r.descriptor.t,r.descriptor.r&&(o.indexRefs&&void 0!==o.indexRefs[r.descriptor.r]?(s=o.indexRefs[r.descriptor.r],n.indexRef=r.descriptor.r,n.value=s,n.render(n.value)):(i=e(n.root,r.descriptor.r,n.contextStack),void 0!==i?n.resolve(i):(n.ref=r.descriptor.r,n.root._pendingResolution[n.root._pendingResolution.length]=n))),r.descriptor.x&&(n.expressionResolver=new t(n)),n.descriptor.n&&!n.hasOwnProperty("value")&&n.render(void 0)}}(T,Et),xt=function(e,t,n){return function(r){r!==this.keypath&&(this.registered&&n(this),this.keypath=r,t(this),this.update(),this.root.twoway&&this.parentFragment.owner.type===e.ATTRIBUTE&&this.parentFragment.owner.element.bind(),this.expressionResolver&&this.expressionResolver.resolved&&(this.expressionResolver=null))}}(l,U,z),Tt=function(e){return function(){var t,n;n=this.root.get(this.keypath),(t=this.root._wrapped[this.keypath])&&(n=t.get()),e(n,this.value)||(this.render(n),this.value=n)}}(x),Nt=function(e,t,n,r,i){var s,o,u;return o=/</g,u=/>/g,s=function(t,r){this.type=e.INTERPOLATOR,r&&(this.node=document.createTextNode(""),r.appendChild(this.node)),n(this,t)},s.prototype={update:i,resolve:r,detach:function(){return this.node.parentNode.removeChild(this.node),this.node},teardown:function(e){e&&this.detach(),t(this)},render:function(e){this.node&&(this.node.data=void 0==e?"":e)},firstNode:function(){return this.node},toString:function(){var e=void 0!=this.value?""+this.value:"";return e.replace(o,"&lt;").replace(u,"&gt;")}},s}(l,pt,St,xt,Tt),Ct=function(e,t,n){function r(e,t,n){var r,i,s;if(i=t.length,i<e.length)for(s=e.fragments.splice(i,e.length-i);s.length;)s.pop().teardown(!0);else if(i>e.length)for(r=e.length;i>r;r+=1)n.contextStack=e.contextStack.concat(e.keypath+"."+r),n.index=r,e.descriptor.i&&(n.indexRef=e.descriptor.i),e.fragments[r]=e.createFragment(n);e.length=i}function i(e,t,r){var i,s;s=e.fragmentsById||(e.fragmentsById=n(null));for(i in s)void 0===t[i]&&s[i]&&(s[i].teardown(!0),s[i]=null);for(i in t)void 0===t[i]||s[i]||(r.contextStack=e.contextStack.concat(e.keypath+"."+i),r.index=i,e.descriptor.i&&(r.indexRef=e.descriptor.i),s[i]=e.createFragment(r))}function s(e,t){e.length||(t.contextStack=e.contextStack.concat(e.keypath),t.index=0,e.fragments[0]=e.createFragment(t),e.length=1)}function o(t,n,r,i){var s,o,u,a;if(o=e(n)&&0===n.length,s=r?o||!n:n&&!o){if(t.length||(i.contextStack=t.contextStack,i.index=0,t.fragments[0]=t.createFragment(i),t.length=1),t.length>1)for(u=t.fragments.splice(1);a=u.pop();)a.teardown(!0)}else t.length&&(t.teardownFragments(!0),t.length=0)}return function(n,u){var a;return a={descriptor:n.descriptor.f,root:n.root,pNode:n.parentFragment.pNode,owner:n},n.descriptor.n?(o(n,u,!0,a),void 0):(e(u)?r(n,u,a):t(u)?n.descriptor.i?i(n,u,a):s(n,a):o(n,u,!1,a),void 0)}}(c,S,n),kt=function(e,t,n){function r(t,n,o,u,a,f,l){var c,h,p,d;if(!t.html){for(t.indexRefs&&void 0!==t.indexRefs[n]&&(t.indexRefs[n]=u),c=t.contextStack.length;c--;)p=t.contextStack[c],p.substr(0,f.length)===f&&(t.contextStack[c]=p.replace(f,l));for(c=t.items.length;c--;)switch(h=t.items[c],h.type){case e.ELEMENT:i(h,n,o,u,a,f,l);break;case e.PARTIAL:r(h.fragment,n,o,u,a,f,l);break;case e.COMPONENT:r(h.instance.fragment,n,o,u,a,f,l),(d=t.root._liveComponentQueries[h.name])&&d._makeDirty();break;case e.SECTION:case e.INTERPOLATOR:case e.TRIPLE:s(h,n,o,u,a,f,l)}}}function i(e,t,n,i,s,o,u){var a,f,l,c,h,p,d,v,m,g;for(a=e.attributes.length;a--;)f=e.attributes[a],f.fragment&&(r(f.fragment,t,n,i,s,o,u),f.twoway&&f.updateBindings());if(l=e.node._ractive){l.keypath.substr(0,o.length)===o&&(l.keypath=l.keypath.replace(o,u)),void 0!==t&&(l.index[t]=i);for(c in l.events)for(h=l.events[c].proxies,a=h.length;a--;)p=h[a],"object"==typeof p.n&&r(p.a,t,n,i,s,o,u),p.d&&r(p.d,t,n,i,s,o,u);(d=l.binding)&&d.keypath.substr(0,o.length)===o&&(v=l.root._twowayBindings[d.keypath],v.splice(v.indexOf(d),1),d.keypath=d.keypath.replace(o,u),v=l.root._twowayBindings[d.keypath]||(l.root._twowayBindings[d.keypath]=[]),v.push(d))}if(e.fragment&&r(e.fragment,t,n,i,s,o,u),m=e.liveQueries)for(g=e.root,a=m.length;a--;)g._liveQueries[m[a]]._makeDirty()}function s(e,t,i,s,o,u,a){var f;if(e.descriptor.x&&(e.expressionResolver&&e.expressionResolver.teardown(),e.expressionResolver=new n(e)),e.keypath?e.keypath.substr(0,u.length)===u&&e.resolve(e.keypath.replace(u,a)):e.indexRef===t&&(e.value=s,e.render(s)),e.fragments)for(f=e.fragments.length;f--;)r(e.fragments[f],t,i,s,o,u,a)}return r}(l,z,Et),Lt=function(e,t,n){return function(e,r,i,s,o){var u,a,f,l,c,h,p;for(f=r.descriptor.i,u=i;s>u;u+=1)a=r.fragments[u],l=u-o,c=u,h=r.keypath+"."+(u-o),p=r.keypath+"."+u,a.index+=o,t(a,f,l,c,o,h,p);n(e)}}(l,kt,d),At=function(e){return function(t){var n,r,i,s,o,u,a,f,l,c,h=this;if(n=this.parentFragment,u=[],t.forEach(function(t,n){var s,o,f;return t===n?(u[t]=h.fragments[n],void 0):(void 0===r&&(r=n),-1===t?((a||(a=[])).push(h.fragments[n]),void 0):(s=t-n,o=h.keypath+"."+n,f=h.keypath+"."+t,e(h.fragments[n],h.descriptor.i,n,t,s,o,f),u[t]=h.fragments[n],i=!0,void 0))}),a)for(;l=a.pop();)l.teardown(!0);if(void 0===r&&(r=this.length),o=this.root.get(this.keypath).length,o!==r){for(f={descriptor:this.descriptor.f,root:this.root,pNode:n.pNode,owner:this},this.descriptor.i&&(f.indexRef=this.descriptor.i),s=r;o>s;s+=1)(l=u[s])?this.docFrag.appendChild(l.detach(!1)):(f.contextStack=this.contextStack.concat(this.keypath+"."+s),f.index=s,l=this.createFragment(f)),this.fragments[s]=l;c=n.findNextNode(this),n.pNode.insertBefore(this.docFrag,c),this.length=o}}}(kt),Ot=function(){return[]}(),Mt=function(e,t,n,r,i,s,o,u,a,f,l){var c,h;return l.push(function(){h=l.DomFragment}),c=function(t,r){this.type=e.SECTION,this.inverted=!!t.descriptor.n,this.fragments=[],this.length=0,r&&(this.docFrag=document.createDocumentFragment()),this.initialising=!0,n(this,t),r&&r.appendChild(this.docFrag),this.initialising=!1},c.prototype={update:r,resolve:i,smartUpdate:function(e,t){var n;("push"===e||"unshift"===e||"splice"===e)&&(n={descriptor:this.descriptor.f,root:this.root,pNode:this.parentFragment.pNode,owner:this},this.descriptor.i&&(n.indexRef=this.descriptor.i)),this[e]&&(this.rendering=!0,this[e](n,t),this.rendering=!1)},pop:function(){this.length&&(this.fragments.pop().teardown(!0),this.length-=1)},push:function(e,t){var n,r,i;for(n=this.length,r=n+t.length,i=n;r>i;i+=1)e.contextStack=this.contextStack.concat(this.keypath+"."+i),e.index=i,this.fragments[i]=this.createFragment(e);this.length+=t.length,this.parentFragment.pNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},shift:function(){this.splice(null,[0,1])},unshift:function(e,t){this.splice(e,[0,0].concat(new Array(t.length)))},splice:function(e,t){var n,r,i,s,o,a,f,l,c;if(t.length&&(a=+(t[0]<0?this.length+t[0]:t[0]),r=Math.max(0,t.length-2),i=void 0!==t[1]?t[1]:this.length-a,i=Math.min(i,this.length-a),s=r-i)){if(0>s){for(f=a-s,o=a;f>o;o+=1)this.fragments[o].teardown(!0);this.fragments.splice(a,-s)}else{for(f=a+s,n=this.fragments[a]?this.fragments[a].firstNode():this.parentFragment.findNextNode(this),l=[a,0].concat(new Array(s)),this.fragments.splice.apply(this.fragments,l),o=a;f>o;o+=1)e.contextStack=this.contextStack.concat(this.keypath+"."+o),e.index=o,this.fragments[o]=this.createFragment(e);this.parentFragment.pNode.insertBefore(this.docFrag,n)}this.length+=s,c=a+r,u(this.root,this,c,this.length,s)}},merge:a,detach:function(){var e,t;for(t=this.fragments.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.fragments[e].detach());return this.docFrag},teardown:function(e){this.teardownFragments(e),f(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(e){return this.fragments[e.index+1]?this.fragments[e.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(e){for(var t,n;n=this.fragments.shift();)n.teardown(e);if(this.fragmentsById)for(t in this.fragmentsById)this.fragments[t]&&(this.fragmentsById[t].teardown(e),this.fragmentsById[t]=null)},render:function(e){var n,r;(r=this.root._wrapped[this.keypath])&&(e=r.get()),this.rendering||(this.rendering=!0,s(this,e),this.rendering=!1,(!this.docFrag||this.docFrag.childNodes.length)&&!this.initialising&&t&&(n=this.parentFragment.findNextNode(this),n&&n.parentNode===this.parentFragment.pNode?this.parentFragment.pNode.insertBefore(this.docFrag,n):this.parentFragment.pNode.appendChild(this.docFrag)))},createFragment:function(e){var t=new h(e);return this.docFrag&&this.docFrag.appendChild(t.docFrag),t},toString:function(){var e,t,n,r;for(e="",t=0,r=this.length,t=0;r>t;t+=1)e+=this.fragments[t].toString();if(this.fragmentsById)for(n in this.fragmentsById)this.fragmentsById[n]&&(e+=this.fragmentsById[n].toString());return e},find:function(e){var t,n,r;for(n=this.fragments.length,t=0;n>t;t+=1)if(r=this.fragments[t].find(e))return r;return null},findAll:function(e,t){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAll(e,t)},findComponent:function(e){var t,n,r;for(n=this.fragments.length,t=0;n>t;t+=1)if(r=this.fragments[t].findComponent(e))return r;return null},findAllComponents:function(e,t){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAllComponents(e,t)}},c}(l,s,St,Tt,xt,Ct,kt,Lt,At,pt,Ot),_t=function(e,t,n,r,i,s,o){var u=function(t,r){this.type=e.TRIPLE,r&&(this.nodes=[],this.docFrag=document.createDocumentFragment()),this.initialising=!0,n(this,t),r&&r.appendChild(this.docFrag),this.initialising=!1};return u.prototype={update:r,resolve:i,detach:function(){for(var e=this.nodes.length;e--;)this.docFrag.appendChild(this.nodes[e]);return this.docFrag},teardown:function(e){e&&(this.detach(),this.docFrag=this.nodes=null),o(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(e){var t,n;if(this.nodes){for(;this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);if(!e)return this.nodes=[],void 0;n=this.parentFragment.pNode,this.nodes=s(e,n.tagName,this.docFrag),this.initialising||n.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))}},toString:function(){return void 0!=this.value?this.value:""},find:function(e){var n,r,i,s;for(r=this.nodes.length,n=0;r>n;n+=1)if(i=this.nodes[n],1===i.nodeType){if(t(i,e))return i;if(s=i.querySelector(e))return s}return null},findAll:function(e,n){var r,i,s,o,u,a;for(i=this.nodes.length,r=0;i>r;r+=1)if(s=this.nodes[r],1===s.nodeType&&(t(s,e)&&n.push(s),o=s.querySelectorAll(e)))for(u=o.length,a=0;u>a;a+=1)n.push(o[a])}},u}(l,G,St,Tt,xt,ct,pt),Dt=function(e){return function(t,n){return t.a&&t.a.xmlns?t.a.xmlns:"svg"===t.e?e.svg:n.namespaceURI||e.html}}(r),Pt=function(){var e,t,n,r;return e="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n=function(e){for(var t={},n=e.length;n--;)t[e[n].toLowerCase()]=e[n];return t},r=n(e.concat(t)),function(e){var t=e.toLowerCase();return r[t]||t}}(),Ht=function(e,t){return function(n,r){var i,s;if(i=r.indexOf(":"),-1===i||(s=r.substr(0,i),"xmlns"===s))n.name=n.element.namespace!==e.html?t(r):r,n.lcName=n.name.toLowerCase();else if(r=r.substring(i+1),n.name=t(r),n.lcName=n.name.toLowerCase(),n.namespace=e[s.toLowerCase()],!n.namespace)throw'Unknown namespace ("'+s+'")'}}(r,Pt),Bt=function(e){return function(t,n){var r,i=null===n.value?"":n.value;(r=n.pNode)&&(t.namespace?r.setAttributeNS(t.namespace,n.name,i):"style"===n.name&&r.style.setAttribute?r.style.setAttribute("cssText",i):"class"!==n.name||r.namespaceURI&&r.namespaceURI!==e.html?r.setAttribute(n.name,i):r.className=i,"id"===t.name&&(n.root.nodes[n.value]=r),"value"===t.name&&(r._ractive.value=n.value)),t.value=n.value}}(r),jt=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n,r){var i;!n.pNode||n.namespace||r.pNode.namespaceURI&&r.pNode.namespaceURI!==e.html||(i=t[n.name]||n.name,void 0!==r.pNode[i]&&(n.propertyName=i),("boolean"==typeof r.pNode[i]||"value"===i)&&(n.useProperty=!0))}}(r),Ft=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g;return i=function(){var e,t,n,r=this.pNode;return this.fragment?(e=s(this))?(this.interpolator=e,this.keypath=e.keypath||e.descriptor.r,(t=a(this))?(r._ractive.binding=this.element.binding=t,this.twoway=!0,n=this.root._twowayBindings[this.keypath]||(this.root._twowayBindings[this.keypath]=[]),n[n.length]=t,!0):!1):!1:!1},o=function(){this._ractive.binding.update()},u=function(){var e=this._ractive.root.get(this._ractive.binding.keypath);this.value=void 0==e?"":e},s=function(n){var r,i;return 1!==n.fragment.items.length?null:(r=n.fragment.items[0],r.type!==e.INTERPOLATOR?null:r.keypath||r.ref?r.keypath&&"${"===r.keypath.substr(0,2)?(i="You cannot set up two-way binding against an expression "+r.keypath,n.root.debug&&t(i),null):r:null)},a=function(e){var n=e.pNode;if("SELECT"===n.tagName)return n.multiple?new l(e,n):new c(e,n);if("checkbox"===n.type||"radio"===n.type){if("name"===e.propertyName){if("checkbox"===n.type)return new p(e,n);if("radio"===n.type)return new h(e,n)}return"checked"===e.propertyName?new d(e,n):null}return"value"!==e.lcName&&t("This is... odd"),"file"===n.type?new v(e,n):n.getAttribute("contenteditable")?new m(e,n):new g(e,n)},l=function(e,t){var n;f(this,e,t),t.addEventListener("change",o,!1),n=this.root.get(this.keypath),void 0===n&&this.update()},l.prototype={value:function(){var e,t,n,r;for(e=[],t=this.node.options,r=t.length,n=0;r>n;n+=1)t[n].selected&&(e[e.length]=t[n]._ractive.value);return e},update:function(){var e,t,r;return e=this.attr,t=e.value,r=this.value(),void 0!==t&&n(r,t)||(e.receiving=!0,e.value=r,this.root.set(this.keypath,r),e.receiving=!1),this},deferUpdate:function(){this.deferred!==!0&&(this.root._deferred.attrs.push(this),this.deferred=!0)},teardown:function(){this.node.removeEventListener("change",o,!1)}},c=function(e,t){var n;f(this,e,t),t.addEventListener("change",o,!1),n=this.root.get(this.keypath),void 0===n&&this.update()},c.prototype={value:function(){var e,t,n;for(e=this.node.options,n=e.length,t=0;n>t;t+=1)if(e[t].selected)return e[t]._ractive.value},update:function(){var e=this.value();return this.attr.receiving=!0,this.attr.value=e,this.root.set(this.keypath,e),this.attr.receiving=!1,this},deferUpdate:function(){this.deferred!==!0&&(this.root._deferred.attrs.push(this),this.deferred=!0)},teardown:function(){this.node.removeEventListener("change",o,!1)}},h=function(e,t){var n;this.radioName=!0,f(this,e,t),t.name="{{"+e.keypath+"}}",t.addEventListener("change",o,!1),t.attachEvent&&t.addEventListener("click",o,!1),n=this.root.get(this.keypath),void 0!==n?t.checked=n==t._ractive.value:this.root._deferred.radios.push(this)},h.prototype={value:function(){return this.node._ractive?this.node._ractive.value:this.node.value},update:function(){var e=this.node;e.checked&&(this.attr.receiving=!0,this.root.set(this.keypath,this.value()),this.attr.receiving=!1)},teardown:function(){this.node.removeEventListener("change",o,!1),this.node.removeEventListener("click",o,!1)}},p=function(e,t){var n,r;this.checkboxName=!0,f(this,e,t),t.name="{{"+this.keypath+"}}",t.addEventListener("change",o,!1),t.attachEvent&&t.addEventListener("click",o,!1),n=this.root.get(this.keypath),void 0!==n?(r=-1!==n.indexOf(t._ractive.value),t.checked=r):-1===this.root._deferred.checkboxes.indexOf(this.keypath)&&this.root._deferred.checkboxes.push(this.keypath)},p.prototype={changed:function(){return this.node.checked!==!!this.checked},update:function(){this.checked=this.node.checked,this.attr.receiving=!0,this.root.set(this.keypath,r(this.root,this.keypath)),this.attr.receiving=!1},teardown:function(){this.node.removeEventListener("change",o,!1),this.node.removeEventListener("click",o,!1)}},d=function(e,t){f(this,e,t),t.addEventListener("change",o,!1),t.attachEvent&&t.addEventListener("click",o,!1)},d.prototype={value:function(){return this.node.checked},update:function(){this.attr.receiving=!0,this.root.set(this.keypath,this.value()),this.attr.receiving=!1},teardown:function(){this.node.removeEventListener("change",o,!1),this.node.removeEventListener("click",o,!1)}},v=function(e,t){f(this,e,t),t.addEventListener("change",o,!1)},v.prototype={value:function(){return this.attr.pNode.files},update:function(){this.attr.root.set(this.attr.keypath,this.value())},teardown:function(){this.node.removeEventListener("change",o,!1)}},m=function(e,t){f(this,e,t),t.addEventListener("change",o,!1),this.root.lazy||(t.addEventListener("input",o,!1),t.attachEvent&&t.addEventListener("keyup",o,!1))},m.prototype={update:function(){this.attr.receiving=!0,this.root.set(this.keypath,this.node.innerHTML),this.attr.receiving=!1},teardown:function(){this.node.removeEventListener("change",o,!1),this.node.removeEventListener("input",o,!1),this.node.removeEventListener("keyup",o,!1)}},g=function(e,t){f(this,e,t),t.addEventListener("change",o,!1),this.root.lazy||(t.addEventListener("input",o,!1),t.attachEvent&&t.addEventListener("keyup",o,!1)),this.node.addEventListener("blur",u,!1)},g.prototype={value:function(){var e=this.attr.pNode.value;return+e+""===e&&-1===e.indexOf("e")&&(e=+e),e},update:function(){var e=this.attr,t=this.value();e.receiving=!0,e.root.set(e.keypath,t),e.receiving=!1},teardown:function(){this.node.removeEventListener("change",o,!1),this.node.removeEventListener("input",o,!1),this.node.removeEventListener("keyup",o,!1),this.node.removeEventListener("blur",u,!1)}},f=function(e,t,n){e.attr=t,e.node=n,e.root=t.root,e.keypath=t.keypath},i}(l,P,O,p),It=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;return n=function(){var e;if(!this.ready)return this;if(e=this.pNode,"SELECT"===e.tagName&&"value"===this.lcName)return this.update=i,this.deferredUpdate=s,this.update();if(this.isFileInputValue)return this.update=r,this;if(this.twoway&&"name"===this.lcName){if("radio"===e.type)return this.update=a,this.update();if("checkbox"===e.type)return this.update=f,this.update()}return"style"===this.lcName&&e.style.setAttribute?(this.update=l,this.update()):"class"!==this.lcName||e.namespaceURI&&e.namespaceURI!==t.html?e.getAttribute("contenteditable")&&"value"===this.lcName?(this.update=h,this.update()):(this.update=p,this.update()):(this.update=c,this.update())},r=function(){return this},s=function(){this.deferredUpdate=this.pNode.multiple?u:o,this.deferredUpdate()},i=function(){return this.root._deferred.selectValues.push(this),this},o=function(){var e,t,n,r=this.fragment.getValue();for(this.value=this.pNode._ractive.value=r,e=this.pNode.options,n=e.length;n--;)if(t=e[n],t._ractive.value==r)return t.selected=!0,this;return this},u=function(){var t,n,r=this.fragment.getValue();for(e(r)||(r=[r]),t=this.pNode.options,n=t.length;n--;)t[n].selected=-1!==r.indexOf(t[n]._ractive.value);return this.value=r,this},a=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),e.checked=t==e._ractive.value,this},f=function(){var t,n;return t=this.pNode,n=this.fragment.getValue(),e(n)?(t.checked=-1!==n.indexOf(t._ractive.value),this):(t.checked=n==t._ractive.value,this)},l=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value&&(e.style.setAttribute("cssText",t),this.value=t),this},c=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value&&(e.className=t,this.value=t),this},h=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value&&(this.receiving||(e.innerHTML=t),this.value=t),this},p=function(){var e,t;if(e=this.pNode,t=this.fragment.getValue(),this.isValueAttribute&&(e._ractive.value=t),void 0===t&&(t=""),t!==this.value){if(this.useProperty)return this.receiving||(e[this.propertyName]=t),this.value=t,this;if(this.namespace)return e.setAttributeNS(this.namespace,this.name,t),this.value=t,this;"id"===this.lcName&&(void 0!==this.value&&(this.root.nodes[this.value]=void 0),this.root.nodes[t]=e),e.setAttribute(this.name,t),this.value=t}return this},n}(c,r),qt=function(){return function(e){var t;return t=this.str.substr(this.pos,e.length),t===e?(this.pos+=e.length,e):null}}(),Rt=function(){var e=/^\s+/;return function(){var t=e.exec(this.remaining());return t?(this.pos+=t[0].length,t[0]):null}}(),Ut=function(){return function(e){return function(t){var n=e.exec(t.str.substring(t.pos));return n?(t.pos+=n[0].length,n[1]||n[0]):null}}}(),zt=function(){function e(e){var t;return e.getStringMatch("\\")?(t=e.str.charAt(e.pos),e.pos+=1,t):null}return function(t){var n,r="";for(n=e(t);n;)r+=n,n=e(t);return r||null}}(),Wt=function(e,t){var n=e(/^[^\\"]+/),r=e(/^[^\\']+/);return function i(e,s){var o,u,a,f,l,c;if(o=e.pos,u="",c=s?r:n,a=t(e),a&&(u+=a),f=c(e),f&&(u+=f),!u)return"";for(l=i(e,s);""!==l;)u+=l;return u}}(Ut,zt),Xt=function(e,t){return function(n){var r,i;return r=n.pos,n.getStringMatch('"')?(i=t(n,!1),n.getStringMatch('"')?{t:e.STRING_LITERAL,v:i}:(n.pos=r,null)):n.getStringMatch("'")?(i=t(n,!0),n.getStringMatch("'")?{t:e.STRING_LITERAL,v:i}:(n.pos=r,null)):null}}(l,Wt),Vt=function(e,t){var n=t(/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/);return function(t){var r;return(r=n(t))?{t:e.NUMBER_LITERAL,v:r}:null}}(l,Ut),$t=function(e){return e(/^[a-zA-Z_$][a-zA-Z_$0-9]*/)}(Ut),Jt=function(e,t,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var s;return(s=e(i))?r.test(s.v)?s.v:'"'+s.v.replace(/"/g,'\\"')+'"':(s=t(i))?s.v:(s=n(i))?s:void 0}}(Xt,Vt,$t),Kt=function(e,t,n,r){function i(e){var t,n,i;return e.allowWhitespace(),(t=r(e))?(i={key:t},e.allowWhitespace(),e.getStringMatch(":")?(e.allowWhitespace(),(n=e.getToken())?(i.value=n.v,i):null):null):null}var s,o,u,a,f,l;return o={"true":!0,"false":!1,"undefined":void 0,"null":null},u=new RegExp("^(?:"+Object.keys(o).join("|")+")"),a=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,f=/\$\{([^\}]+)\}/g,l=/^\$\{([^\}]+)\}/,s=function(e,t){this.str=e,this.values=t,this.pos=0,this.result=this.getToken()},s.prototype={remaining:function(){return this.str.substring(this.pos)},getStringMatch:e,getToken:function(){return this.allowWhitespace(),this.getPlaceholder()||this.getSpecial()||this.getNumber()||this.getString()||this.getObject()||this.getArray()},getPlaceholder:function(){var e;return this.values?(e=l.exec(this.remaining()))&&this.values.hasOwnProperty(e[1])?(this.pos+=e[0].length,{v:this.values[e[1]]}):void 0:null},getSpecial:function(){var e;return(e=u.exec(this.remaining()))?(this.pos+=e[0].length,{v:o[e[0]]}):void 0},getNumber:function(){var e;return(e=a.exec(this.remaining()))?(this.pos+=e[0].length,{v:+e[0]}):void 0},getString:function(){var e,t=n(this);return t&&(e=this.values)?{v:t.v.replace(f,function(t,n){return e[n]||n})}:t},getObject:function(){var e,t;if(!this.getStringMatch("{"))return null;for(e={};t=i(this);){if(e[t.key]=t.value,this.allowWhitespace(),this.getStringMatch("}"))return{v:e};if(!this.getStringMatch(","))return null}return null},getArray:function(){var e,t;if(!this.getStringMatch("["))return null;for(e=[];t=this.getToken();){if(e.push(t.v),this.getStringMatch("]"))return{v:e};if(!this.getStringMatch(","))return null}return null},allowWhitespace:t},function(e,t){var n=new s(e,t);return n.result?{value:n.result.v,remaining:n.remaining()}:null}}(qt,Rt,Xt,Jt),Qt=function(e,t,n,r,i){function s(e){return"string"==typeof e?e:JSON.stringify(e)}var o=function(t){this.type=e.INTERPOLATOR,n(this,t)};return o.prototype={update:r,resolve:i,render:function(e){this.value=e,this.parentFragment.bubble()},teardown:function(){t(this)},toString:function(){return void 0==this.value?"":s(this.value)}},o}(l,pt,St,Tt,xt),Gt=function(e,t,n,r,i,s,o){var u,a;return o.push(function(){a=o.StringFragment}),u=function(n){this.type=e.SECTION,this.fragments=[],this.length=0,t(this,n)},u.prototype={update:n,resolve:r,teardown:function(){this.teardownFragments(),s(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(e){var t;(t=this.root._wrapped[this.keypath])&&(e=t.get()),i(this,e),this.parentFragment.bubble()},createFragment:function(e){return new a(e)},toString:function(){return this.fragments.join("")}},u}(l,St,Tt,xt,Ct,pt,Ot),Yt=function(e){var t=function(t){this.type=e.TEXT,this.text=t};return t.prototype={toString:function(){return this.text},teardown:function(){}},t}(l),Zt=function(e,t){return function(){var n,r,i,s,o,u,a;if(!this.argsList||this.dirty){if(n={},r=0,s=this.root._guid,a=function(e){return e.map(function(e){var t,i,o;return e.text?e.text:e.fragments?e.fragments.map(function(e){return a(e.items)}).join(""):(t=s+"-"+r++,o=(i=e.root._wrapped[e.keypath])?i.value:e.value,n[t]=o,"${"+t+"}")}).join("")},i=a(this.items),u=t("["+i+"]",n))this.argsList=u.value;else{if(o="Could not parse directive arguments ("+this.toString()+"). If you think this is a bug, please file an issue at http://github.com/RactiveJS/Ractive/issues",this.root.debug)throw new Error(o);e(o),this.argsList=[i]}this.dirty=!1}return this.argsList}}(P,Kt),en=function(e,t,n,r,i,s,o,u){var a=function(e){n(this,e)};return a.prototype={createItem:function(t){if("string"==typeof t.descriptor)return new s(t.descriptor);switch(t.descriptor.t){case e.INTERPOLATOR:return new r(t);case e.TRIPLE:return new r(t);case e.SECTION:return new i(t);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.dirty=!0,this.owner.bubble()},teardown:function(){var e,t;for(e=this.items.length,t=0;e>t;t+=1)this.items[t].teardown()},getValue:function(){var t;return 1===this.items.length&&this.items[0].type===e.INTERPOLATOR&&(t=this.items[0].value,void 0!==t)?t:this.toString()},isSimple:function(){var t,n,r;if(void 0!==this.simple)return this.simple;for(t=this.items.length;t--;)if(n=this.items[t],n.type!==e.TEXT){if(n.type!==e.INTERPOLATOR)return this.simple=!1;if(r)return!1;r=!0}return this.simple=!0},toString:function(){return this.items.join("")},toJSON:function(){var e,n=this.getValue();return"string"==typeof n&&(e=t(n),n=e?e.value:n),n},toArgsList:o},u.StringFragment=a,a}(l,Kt,lt,Qt,Gt,Yt,Zt,Ot),tn=function(e,t,n,r,i,s,o){var u=function(i){return this.type=e.ATTRIBUTE,this.element=i.element,t(this,i.name),null===i.value||"string"==typeof i.value?(n(this,i),void 0):(this.root=i.root,this.pNode=i.pNode,this.parentFragment=this.element.parentFragment,this.fragment=new o({descriptor:i.value,root:this.root,owner:this,contextStack:i.contextStack}),this.pNode&&("value"===this.name&&(this.isValueAttribute=!0,"INPUT"===this.pNode.tagName&&"file"===this.pNode.type&&(this.isFileInputValue=!0)),r(this,i),this.selfUpdating=this.fragment.isSimple(),this.ready=!0),void 0)};return u.prototype={bind:i,update:s,updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.ref,"name"===this.propertyName&&(this.pNode.name="{{"+this.keypath+"}}")},teardown:function(){var e;if(this.boundEvents)for(e=this.boundEvents.length;e--;)this.pNode.removeEventListener(this.boundEvents[e],this.updateModel,!1);this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._deferred.attrs.push(this),this.deferred=!0)},toString:function(){var e;return null===this.value?this.name:this.fragment?(e=this.fragment.toString(),this.name+"="+JSON.stringify(e)):this.name+"="+JSON.stringify(this.value)}},u}(l,Ht,Bt,jt,Ft,It,en),nn=function(e){return function(t,n){var r,i,s;t.attributes=[];for(r in n)n.hasOwnProperty(r)&&(i=n[r],s=new e({element:t,name:r,value:i,root:t.root,pNode:t.node,contextStack:t.parentFragment.contextStack}),t.attributes[t.attributes.length]=t.attributes[r]=s,"name"!==r&&s.update());return t.attributes}}(tn),rn=function(e,t,n,r){var i,s,o;return r.push(function(){i=r.DomFragment}),s=function(){var e=this.node,t=this.fragment.toString();e.styleSheet&&(e.styleSheet.cssText=t),e.innerHTML=t},o=function(){this.node.type&&"text/javascript"!==this.node.type||e("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.innerHTML=this.fragment.toString()},function(e,r,u,a){var f,l,c,h,p;if("script"===e.lcName||"style"===e.lcName)return e.fragment=new n({descriptor:u.f,root:e.root,contextStack:e.parentFragment.contextStack,owner:e}),a&&("script"===e.lcName?(e.bubble=o,e.node.innerHTML=e.fragment.toString()):(e.bubble=s,e.bubble())),void 0;if("string"!=typeof u.f||r&&r.namespaceURI&&r.namespaceURI!==t.html)e.fragment=new i({descriptor:u.f,root:e.root,pNode:r,contextStack:e.parentFragment.contextStack,owner:e}),a&&r.appendChild(e.fragment.docFrag);else if(e.html=u.f,a)for(r.innerHTML=e.html,f=e.root._liveQueries,l=f.length;l--;)if(c=f[l],(h=r.querySelectorAll(c))&&(p=h.length))for((e.liveQueries||(e.liveQueries=[])).push(c),e.liveQueries[c]=[];p--;)e.liveQueries[c][p]=h[p]}}(P,r,en,Ot),sn=function(e,t){var n=function(n,r,i,s){var o,u,a;if(this.root=r,this.node=i.node,o=n.n||n,"string"!=typeof o&&(u=new t({descriptor:o,root:this.root,owner:i,contextStack:s}),o=u.toString(),u.teardown()),n.a?this.params=n.a:n.d&&(u=new t({descriptor:n.d,root:this.root,owner:i,contextStack:s}),this.params=u.toArgsList(),u.teardown()),this.fn=r.decorators[o],!this.fn){if(a='Missing "'+o+'" decorator. You may need to download a plugin via https://github.com/RactiveJS/Ractive/wiki/Plugins#decorators',r.debug)throw new Error(a);e(a)}};return n.prototype={init:function(){var e,t;if(this.params?(t=[this.node].concat(this.params),e=this.fn.apply(this.root,t)):e=this.fn.call(this.root,this.node),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.teardown=e.teardown}},n}(P,en),on=function(e){return function(t,n,r,i){r.decorator=new e(t,n,r,i),r.decorator.fn&&n._deferred.decorators.push(r.decorator)}}(sn),un=function(e,t){var n,r,i,s,o,u,a,f,l;return n=function(e,t,n,i,s){var o,u;o=e.node._ractive.events,u=o[t]||(o[t]=new r(e,t,i,s)),u.add(n)},r=function(t,n,r){var i;this.element=t,this.root=t.root,this.node=t.node,this.name=n,this.contextStack=r,this.proxies=[],(i=this.root.events[n])?this.custom=i(this.node,l(n)):("on"+n in this.node||e('Missing "'+this.name+'" event. You may need to download a plugin via https://github.com/RactiveJS/Ractive/wiki/Plugins#events'),this.node.addEventListener(n,f,!1))},r.prototype={add:function(e){this.proxies[this.proxies.length]=new i(this.element,this.root,e,this.contextStack)},teardown:function(){var e;for(this.custom?this.custom.teardown():this.node.removeEventListener(this.name,f,!1),e=this.proxies.length;e--;)this.proxies[e].teardown()},fire:function(e){for(var t=this.proxies.length;t--;)this.proxies[t].fire(e)}},i=function(e,n,r,i){var a;return this.root=n,a=r.n||r,this.n="string"==typeof a?a:new t({descriptor:r.n,root:this.root,owner:e,contextStack:i}),r.a?(this.a=r.a,this.fire=o,void 0):r.d?(this.d=new t({descriptor:r.d,root:this.root,owner:e,contextStack:i}),this.fire=u,void 0):(this.fire=s,void 0)},i.prototype={teardown:function(){this.n.teardown&&this.n.teardown(),this.d&&this.d.teardown()},bubble:function(){}},s=function(e){this.root.fire(this.n.toString(),e)},o=function(e){this.root.fire.apply(this.root,[this.n.toString(),e].concat(this.a))},u=function(e){var t=this.d.toArgsList();"string"==typeof t&&(t=t.substr(1,t.length-2)),this.root.fire.apply(this.root,[this.n.toString(),e].concat(t))},f=function(e){var t=this._ractive;t.events[e.type].fire({node:this,original:e,index:t.index,keypath:t.keypath,context:t.root.get(t.keypath)})},a={},l=function(e){return a[e]?a[e]:a[e]=function(t){var n=t.node._ractive;t.index=n.index,t.keypath=n.keypath,t.context=n.root.get(n.keypath),n.events[e].fire(t)}},n}(P,en),an=function(e){return function(t,n){var r,i,s;for(i in n)if(n.hasOwnProperty(i))for(s=i.split("-"),r=s.length;r--;)e(t,s[r],n[i],t.parentFragment.contextStack)}}(un),fn=function(){return function(e){var t,n,r,i,s;for(t=e.root,n=t._liveQueries,r=n.length;r--;)i=n[r],s=n[i],s._test(e)&&((e.liveQueries||(e.liveQueries=[])).push(i),e.liveQueries[i]=[e.node])}}(),ln=function(){return function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})}}(),cn=function(){return function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n]);return e}}(),hn=function(e,t,n,r,i,s,o,u){function a(e){var t,n,r;if(!m[e])if(void 0!==h[e])m[e]=e;else for(r=e.charAt(0).toUpperCase()+e.substring(1),t=p.length;t--;)if(n=p[t],void 0!==h[n+r]){m[e]=n+r;break}return m[e]}function f(e){return e.replace(v,"")}function l(e){var t;return d.test(e)&&(e="-"+e),t=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}var c,h,p,d,v,m,g,y,b,w,E,S;if(e)return h=t("div").style,function(){void 0!==h.transition?(y="transition",S="transitionend",g=!0):void 0!==h.webkitTransition?(y="webkitTransition",S="webkitTransitionEnd",g=!0):g=!1}(),y&&(b=y+"Duration",w=y+"Property",E=y+"TimingFunction"),c=function(e,t,r,i,s){var o,a,f,l=this;if(this.root=t,this.node=r.node,this.isIntro=s,this.originalStyle=this.node.getAttribute("style"),this.complete=function(e){!e&&l.isIntro&&l.resetStyle(),l._manager.pop(l.node),l.node._ractive.transition=null},o=e.n||e,"string"!=typeof o&&(a=new u({descriptor:o,root:this.root,owner:r,contextStack:i}),o=a.toString(),a.teardown()),this.name=o,e.a?this.params=e.a:e.d&&(a=new u({descriptor:e.d,root:this.root,owner:r,contextStack:i}),this.params=a.toArgsList(),a.teardown()),this._fn=t.transitions[o],!this._fn){if(f='Missing "'+o+'" transition. You may need to download a plugin via https://github.com/RactiveJS/Ractive/wiki/Plugins#transitions',t.debug)throw new Error(f);return n(f),void 0}},c.prototype={init:function(){if(this._inited)throw new Error("Cannot initialize a transition more than once");this._inited=!0,this._fn.apply(this.root,[this].concat(this.params))},getStyle:function(e){var t,n,r,s,o;if(t=window.getComputedStyle(this.node),"string"==typeof e)return o=t[a(e)],"0px"===o&&(o=0),o;if(!i(e))throw new Error("Transition#getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},r=e.length;r--;)s=e[r],o=t[a(s)],"0px"===o&&(o=0),n[s]=o;return n},setStyle:function(e,t){var n;if("string"==typeof e)this.node.style[a(e)]=t;else for(n in e)e.hasOwnProperty(n)&&(this.node.style[a(n)]=e[n]);return this},animateStyle:function(e,t,r,i){var o,u,c,h,p,d,v,m,g,y=this;for("string"==typeof e?(p={},p[e]=t):(p=e,i=r,r=t),r||(n('The "'+y.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),r=y,i=y.complete),r.duration||(y.setStyle(p),i&&i()),o=Object.keys(p),u=[],c=window.getComputedStyle(y.node),d={},m=o.length;m--;)g=o[m],h=c[a(g)],"0px"===h&&(h=0),h!=p[g]&&(u[u.length]=g,y.node.style[a(g)]=h);return u.length?(setTimeout(function(){y.node.style[w]=o.map(a).map(l).join(","),y.node.style[E]=l(r.easing||"linear"),y.node.style[b]=r.duration/1e3+"s",v=function(e){var t;t=u.indexOf(s(f(e.propertyName))),-1!==t&&u.splice(t,1),u.length||(y.root.fire(y.name+":end"),y.node.removeEventListener(S,v,!1),i&&i())},y.node.addEventListener(S,v,!1),setTimeout(function(){for(var e=u.length;e--;)g=u[e],y.node.style[a(g)]=p[g]},0)},r.delay||0),void 0):(i&&i(),void 0)},resetStyle:function(){this.originalStyle?this.node.setAttribute("style",this.originalStyle):(this.node.getAttribute("style"),this.node.removeAttribute("style"))},processParams:function(e,t){return"number"==typeof e?e={duration:e}:"string"==typeof e?e="slow"===e?{duration:600}:"fast"===e?{duration:200}:{duration:400}:e||(e={}),o(e,t)}},p=["o","ms","moz","webkit"],d=new RegExp("^(?:"+p.join("|")+")([A-Z])"),v=new RegExp("^-(?:"+p.join("|")+")-"),m={},c}(s,i,P,H,c,ln,cn,en),pn=function(e,t){return function(e,n,r,i,s){var o,u,a;!n.transitionsEnabled||n._parent&&!n._parent.transitionsEnabled||(o=new t(e,n,r,i,s),o._fn&&(u=o.node,o._manager=n._transitionManager,(a=u._ractive.transition)&&a.complete(),u._ractive.transition=o,o._manager.push(u),s?n._deferred.transitions.push(o):o.init()))}}(P,hn),dn=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){return function(i,v,m){var g,y,b,w,E,S,x,T,N,C,k,L,A;if(i.type=e.ELEMENT,g=i.parentFragment=v.parentFragment,y=g.pNode,b=g.contextStack,w=i.descriptor=v.descriptor,i.root=k=g.root,i.index=v.index,i.lcName=w.e.toLowerCase(),i.eventListeners=[],i.customEventListeners=[],y&&(E=i.namespace=u(w,y),S=E!==t.html?d(w.e):w.e,i.node=o(S,E),r(i.node,"_ractive",{value:{proxy:i,keypath:b.length?b[b.length-1]:"",index:g.indexRefs,events:n(null),root:k}})),x=a(i,w.a),w.f){if(i.node&&i.node.getAttribute("contenteditable")&&i.node.innerHTML){if(A="A pre-populated contenteditable element should not have children",k.debug)throw new Error(A);s(A)}f(i,i.node,w,m)}m&&w.v&&c(i,w.v),m&&(k.twoway&&(i.bind(),i.node.getAttribute("contenteditable")&&i.node._ractive.binding&&i.node._ractive.binding.update()),x.name&&!x.name.twoway&&x.name.update(),"IMG"===i.node.tagName&&((T=i.attributes.width)||(N=i.attributes.height))&&i.node.addEventListener("load",C=function(){T&&(i.node.width=T.value),N&&(i.node.height=N.value),i.node.removeEventListener("load",C,!1)},!1),m.appendChild(i.node),w.o&&l(w.o,k,i,b),w.t1&&p(w.t1,k,i,b,!0),"OPTION"===i.node.tagName&&("SELECT"===y.tagName&&(L=y._ractive.binding)&&L.deferUpdate(),i.node._ractive.value==y._ractive.value&&(i.node.selected=!0)),i.node.autofocus&&(k._deferred.focusable=i.node)),h(i)}}(l,r,n,o,G,P,i,Dt,nn,rn,on,an,fn,pn,Pt),vn=function(e){return function(t){var n,r,i,s,o,u,a,f,l;for(this.fragment&&this.fragment.teardown(!1);this.attributes.length;)this.attributes.pop().teardown();if(this.node){for(n in this.node._ractive.events)this.node._ractive.events[n].teardown();(r=this.node._ractive.binding)&&(r.teardown(),i=this.root._twowayBindings[r.attr.keypath],i.splice(i.indexOf(r),1))}if(this.decorator&&this.decorator.teardown(),this.descriptor.t2&&e(this.descriptor.t2,this.root,this,this.parentFragment.contextStack,!1),t&&this.root._transitionManager.detachWhenReady(this),o=this.liveQueries)for(s=o.length;s--;)if(u=o[s],f=this.liveQueries[u])for(l=f.length,a=this.root._liveQueries[u];l--;)a._remove(f[l])}}(pn),mn=function(){return"area base br col command doctype embed hr img input keygen link meta param source track wbr".split(" ")}(),gn=function(e){return function(){var t,n,r;for(t="<"+(this.descriptor.y?"!doctype":this.descriptor.e),r=this.attributes.length,n=0;r>n;n+=1)t+=" "+this.attributes[n].toString();return t+=">",this.html?t+=this.html:this.fragment&&(t+=this.fragment.toString()),-1===e.indexOf(this.descriptor.e)&&(t+="</"+this.descriptor.e+">"),t}}(mn),yn=function(e){return function(t){var n;return e(this.node,t)?this.node:this.html&&(n=this.node.querySelector(t))?n:this.fragment&&this.fragment.find?this.fragment.find(t):void 0}}(G),bn=function(){return function(e,t){var n,r,i,s,o;if(t._test(this,!0)&&t.live&&((this.liveQueries||(this.liveQueries=[])).push(e),this.liveQueries[e]=[this.node]),this.html&&(n=this.node.querySelectorAll(e))&&(i=n.length))for(t.live&&(this.liveQueries[e]||((this.liveQueries||(this.liveQueries=[])).push(e),this.liveQueries[e]=[]),o=this.liveQueries[e]),r=0;i>r;r+=1)s=n[r],t.push(s),t.live&&o.push(s);this.fragment&&this.fragment.findAll(e,t)}}(),wn=function(){return function(e){return this.fragment?this.fragment.findComponent(e):void 0}}(),En=function(){return function(e,t){this.fragment&&this.fragment.findAllComponents(e,t)}}(),Sn=function(){return function(){var e=this.attributes;if(this.node&&(this.binding&&(this.binding.teardown(),this.binding=null),!(this.node.getAttribute("contenteditable")&&e.value&&e.value.bind())))switch(this.descriptor.e){case"select":case"textarea":return e.value&&e.value.bind(),void 0;case"input":if("radio"===this.node.type||"checkbox"===this.node.type){if(e.name&&e.name.bind())return;if(e.checked&&e.checked.bind())return}if(e.value&&e.value.bind())return}}}(),xn=function(e,t,n,r,i,s,o,u){var a=function(t,n){e(this,t,n)};return a.prototype={detach:function(){return this.node?(this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node):void 0},teardown:t,firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){},toString:n,find:r,findAll:i,findComponent:s,findAllComponents:o,bind:u},a}(dn,vn,gn,yn,bn,wn,En,Sn),Tn={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser"},Nn={},Cn=function(){return function(e){var t,n,r;for(r="";e.length;){if(t=e.indexOf("<!--"),n=e.indexOf("-->"),-1===t&&-1===n){r+=e;break}if(-1!==t&&-1===n)throw"Illegal HTML - expected closing comment sequence ('-->')";if(-1!==n&&-1===t||t>n)throw"Illegal HTML - unexpected closing comment sequence ('-->')";r+=e.substr(0,t),e=e.substring(n+3)}return r}}(),kn=function(e){return function(t){var n,r,i,s,o,u;for(o=/^\s*\r?\n/,u=/\r?\n\s*$/,n=2;n<t.length;n+=1)r=t[n],i=t[n-1],s=t[n-2],r.type===e.TEXT&&i.type===e.MUSTACHE&&s.type===e.TEXT&&u.test(s.value)&&o.test(r.value)&&(i.mustacheType!==e.INTERPOLATOR&&i.mustacheType!==e.TRIPLE&&(s.value=s.value.replace(u,"\n")),r.value=r.value.replace(o,""),""===r.value&&t.splice(n--,1));return t}}(l),Ln=function(e){return function(t){var n,r,i,s;for(n=0;n<t.length;n+=1)r=t[n],i=t[n-1],s=t[n+1],(r.mustacheType===e.COMMENT||r.mustacheType===e.DELIMCHANGE)&&(t.splice(n,1),i&&s&&i.type===e.TEXT&&s.type===e.TEXT&&(i.value+=s.value,t.splice(n,1)),n-=1);return t}}(l),An=function(e){var t=e(/^[^\s=]+/);return function(e){var n,r,i;return e.getStringMatch("=")?(n=e.pos,e.allowWhitespace(),(r=t(e))?(e.allowWhitespace(),(i=t(e))?(e.allowWhitespace(),e.getStringMatch("=")?[r,i]:(e.pos=n,null)):(e.pos=n,null)):(e.pos=n,null)):null}}(Ut),On=function(e){var t={"#":e.SECTION,"^":e.INVERTED,"/":e.CLOSING,">":e.PARTIAL,"!":e.COMMENT,"&":e.TRIPLE};return function(e){var n=t[e.str.charAt(e.pos)];return n?(e.pos+=1,n):null}}(l),Mn=function(e,t,n){var r=t(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/),i=/^[0-9][1-9]*$/;return function(t,s){var o,u,a,f,l,c,h;if(o=t.pos,u={type:s?e.TRIPLE:e.MUSTACHE},!(s||((f=t.getExpression())&&(u.mustacheType=e.INTERPOLATOR,t.allowWhitespace(),t.getStringMatch(t.delimiters[1])?t.pos-=t.delimiters[1].length:(t.pos=o,f=null)),f||(a=n(t),a===e.TRIPLE?u={type:e.TRIPLE}:u.mustacheType=a||e.INTERPOLATOR,a!==e.COMMENT&&a!==e.CLOSING||(c=t.remaining(),h=c.indexOf(t.delimiters[1]),-1===h)))))return u.ref=c.substr(0,h),t.pos+=h,u;for(f||(t.allowWhitespace(),f=t.getExpression());f.t===e.BRACKETED&&f.x;)f=f.x;return f.t===e.REFERENCE?u.ref=f.n:f.t===e.NUMBER_LITERAL&&i.test(f.v)?u.ref=f.v:u.expression=f,l=r(t),null!==l&&(u.indexRef=l),u}}(l,Ut,On),_n=function(e,t,n){function r(r,i){var s,o,u=r.pos;return o=i?r.tripleDelimiters:r.delimiters,r.getStringMatch(o[0])?(s=t(r))?r.getStringMatch(o[1])?(r[i?"tripleDelimiters":"delimiters"]=s,{type:e.MUSTACHE,mustacheType:e.DELIMCHANGE}):(r.pos=u,null):(r.allowWhitespace(),s=n(r,i),null===s?(r.pos=u,null):(r.allowWhitespace(),r.getStringMatch(o[1])?s:(r.pos=u,null))):null}return function(){var e=this.tripleDelimiters[0].length>this.delimiters[0].length;return r(this,e)||r(this,!e)}}(l,An,Mn),Dn=function(e){return function(){var t,n,r;if(!this.getStringMatch("<!--"))return null;if(n=this.remaining(),r=n.indexOf("-->"),-1===r)throw new Error('Unexpected end of input (expected "-->" to close comment)');return t=n.substr(0,r),this.pos+=r+3,{type:e.COMMENT,content:t}}}(l),Pn=function(){return function(e,t){var n,r,i;for(n=t.length;n--;){if(r=e.indexOf(t[n]),!r)return 0;-1!==r&&(!i||i>r)&&(i=r)}return i||-1}}(),Hn=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v;return r=function(){return i(this)||s(this)},i=function(t){var n,r,i,s;return n=t.pos,t.inside?null:t.getStringMatch("<")?(r={type:e.TAG},t.getStringMatch("!")&&(r.doctype=!0),r.name=o(t),r.name?(i=u(t),i&&(r.attrs=i),t.allowWhitespace(),t.getStringMatch("/")&&(r.selfClosing=!0),t.getStringMatch(">")?(s=r.name.toLowerCase(),("script"===s||"style"===s)&&(t.inside=s),r):(t.pos=n,null)):(t.pos=n,null)):null},s=function(t){var n,r,i;if(n=t.pos,i=function(e){throw new Error("Unexpected character "+t.remaining().charAt(0)+" (expected "+e+")")},!t.getStringMatch("<"))return null;if(r={type:e.TAG,closing:!0},t.getStringMatch("/")||i('"/"'),r.name=o(t),r.name||i("tag name"),t.getStringMatch(">")||i('">"'),t.inside){if(r.name.toLowerCase()!==t.inside)return t.pos=n,null;t.inside=null}return r},o=t(/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/),u=function(e){var t,n,r;if(t=e.pos,e.allowWhitespace(),r=a(e),!r)return e.pos=t,null;for(n=[];null!==r;)n[n.length]=r,e.allowWhitespace(),r=a(e);return n},a=function(e){var t,n,r;return(n=f(e))?(t={name:n},r=l(e),r&&(t.value=r),t):null},f=t(/^[^\s"'>\/=]+/),l=function(e){var t,n;return t=e.pos,e.allowWhitespace(),e.getStringMatch("=")?(e.allowWhitespace(),n=v(e,"'")||v(e,'"')||c(e),null===n?(e.pos=t,null):n):(e.pos=t,null)},p=t(/^[^\s"'=<>`]+/),h=function(t){var n,r,i;return n=t.pos,(r=p(t))?(-1!==(i=r.indexOf(t.delimiters[0]))&&(r=r.substr(0,i),t.pos=n+r.length),{type:e.TEXT,value:r}):null},c=function(e){var t,n;for(t=[],n=e.getMustache()||h(e);null!==n;)t[t.length]=n,n=e.getMustache()||h(e);return t.length?t:null},v=function(e,t){var n,r,i;if(n=e.pos,!e.getStringMatch(t))return null;for(r=[],i=e.getMustache()||d(e,t);null!==i;)r[r.length]=i,i=e.getMustache()||d(e,t);return e.getStringMatch(t)?r:(e.pos=n,null)},d=function(t,r){var i,s,o;if(i=t.pos,o=t.remaining(),s=n(o,[r,t.delimiters[0],t.delimiters[1]]),-1===s)throw new Error("Quoted attribute value must have a closing quote");return s?(t.pos+=s,{type:e.TEXT,value:o.substr(0,s)}):null},r}(l,Ut,Pn),Bn=function(e,t){return function(){var n,r,i;return r=this.remaining(),i=this.inside?"</"+this.inside:"<",(n=t(r,[i,this.delimiters[0],this.tripleDelimiters[0]]))?(-1===n&&(n=r.length),this.pos+=n,{type:e.TEXT,value:r.substr(0,n)}):null}}(l,Pn),jn=function(e){return function(t){var n=t.remaining();return"true"===n.substr(0,4)?(t.pos+=4,{t:e.BOOLEAN_LITERAL,v:"true"}):"false"===n.substr(0,5)?(t.pos+=5,{t:e.BOOLEAN_LITERAL,v:"false"}):null}}(l),Fn=function(e,t){return function(n){var r,i,s;return r=n.pos,n.allowWhitespace(),i=t(n),null===i?(n.pos=r,null):(n.allowWhitespace(),n.getStringMatch(":")?(n.allowWhitespace(),s=n.getExpression(),null===s?(n.pos=r,null):{t:e.KEY_VALUE_PAIR,k:i,v:s}):(n.pos=r,null))}}(l,Jt),In=function(e){return function t(n){var r,i,s,o;return r=n.pos,s=e(n),null===s?null:(i=[s],n.getStringMatch(",")?(o=t(n),o?i.concat(o):(n.pos=r,null)):i)}}(Fn),qn=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.getStringMatch("{")?(i=t(n),n.allowWhitespace(),n.getStringMatch("}")?{t:e.OBJECT_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(l,In),Rn=function(){return function e(t){var n,r,i,s;if(n=t.pos,t.allowWhitespace(),i=t.getExpression(),null===i)return null;if(r=[i],t.allowWhitespace(),t.getStringMatch(",")){if(s=e(t),null===s)return t.pos=n,null;r=r.concat(s)}return r}}(),Un=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.getStringMatch("[")?(i=t(n),n.getStringMatch("]")?{t:e.ARRAY_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(l,Rn),zn=function(e,t,n,r,i){return function(s){var o=e(s)||t(s)||n(s)||r(s)||i(s);return o}}(Vt,jn,Xt,qn,Un),Wn=function(e,t,n){var r,i,s,o;return r=t(/^\.[a-zA-Z_$0-9]+/),i=function(e){var t=s(e);return t?"."+t:null},s=t(/^\[(0|[1-9][0-9]*)\]/),o=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,function(t){var s,u,a,f,l,c,h;for(s=t.pos,u="";t.getStringMatch("../");)u+="../";if(u||(f=t.getStringMatch(".")||""),a=n(t)||"",!u&&!f&&o.test(a))return{t:e.GLOBAL,v:a};if("this"!==a||u||f||(a=".",s+=3),l=(u||f)+a,!l)return null;for(;c=r(t)||i(t);)l+=c;return t.getStringMatch("(")&&(h=l.lastIndexOf("."),-1!==h?(l=l.substr(0,h),t.pos=s+l.length):t.pos-=1),{t:e.REFERENCE,n:l}}}(l,Ut,$t),Xn=function(e){return function(t){var n,r;return n=t.pos,t.getStringMatch("(")?(t.allowWhitespace(),(r=t.getExpression())?(t.allowWhitespace(),t.getStringMatch(")")?{t:e.BRACKETED,x:r}:(t.pos=n,null)):(t.pos=n,null)):null}}(l),Vn=function(e,t,n){return function(r){return e(r)||t(r)||n(r)}}(zn,Wn,Xn),$n=function(e,t){return function(n){var r,i,s;if(r=n.pos,n.allowWhitespace(),n.getStringMatch(".")){if(n.allowWhitespace(),i=t(n))return{t:e.REFINEMENT,n:i};n.expected("a property name")}return n.getStringMatch("[")?(n.allowWhitespace(),s=n.getExpression(),s||n.expected("an expression"),n.allowWhitespace(),n.getStringMatch("]")||n.expected('"]"'),{t:e.REFINEMENT,x:s}):null}}(l,$t),Jn=function(e,t,n,r){return function(i){var s,o,u,a;if(o=t(i),!o)return null;for(;o;)if(s=i.pos,u=r(i))o={t:e.MEMBER,x:o,r:u};else{if(!i.getStringMatch("("))break;if(i.allowWhitespace(),a=n(i),i.allowWhitespace(),!i.getStringMatch(")")){i.pos=s;break}o={t:e.INVOCATION,x:o},a&&(o.o=a)}return o}}(l,Vn,Rn,$n),Kn=function(e,t){var n,r;return r=function(t,n){return function(r){var i,s;return r.getStringMatch(t)?(i=r.pos,r.allowWhitespace(),s=r.getExpression(),s||r.expected("an expression"),{s:t,o:s,t:e.PREFIX_OPERATOR}):n(r)}},function(){var e,i,s,o,u;for(o="! ~ + - typeof".split(" "),u=t,e=0,i=o.length;i>e;e+=1)s=r(o[e],u),u=s;n=u}(),n}(l,Jn),Qn=function(e,t){var n,r;return r=function(t,n){return function(r){var i,s,o;return(s=n(r))?(i=r.pos,r.allowWhitespace(),r.getStringMatch(t)?"in"===t&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0))?(r.pos=i,s):(r.allowWhitespace(),o=r.getExpression(),o?{t:e.INFIX_OPERATOR,s:t,o:[s,o]}:(r.pos=i,s)):(r.pos=i,s)):null}},function(){var e,i,s,o,u;for(o="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),u=t,e=0,i=o.length;i>e;e+=1)s=r(o[e],u),u=s;n=u}(),n}(l,Kn),Gn=function(e,t){return function(n){var r,i,s,o;return(i=t(n))?(r=n.pos,n.allowWhitespace(),n.getStringMatch("?")?(n.allowWhitespace(),(s=n.getExpression())?(n.allowWhitespace(),n.getStringMatch(":")?(n.allowWhitespace(),o=n.getExpression(),o?{t:e.CONDITIONAL,o:[i,s,o]}:(n.pos=r,i)):(n.pos=r,i)):(n.pos=r,i)):(n.pos=r,i)):null}}(l,Qn),Yn=function(e){return function(){return e(this)}}(Gn),Zn=function(e,t,n,r,i,s,o){var u;return u=function(e,t){var n;for(this.str=e,this.pos=0,this.delimiters=t.delimiters,this.tripleDelimiters=t.tripleDelimiters,this.tokens=[];this.pos<this.str.length;)n=this.getToken(),null===n&&this.remaining()&&this.fail(),this.tokens.push(n)},u.prototype={getToken:function(){var e=this.getMustache()||this.getComment()||this.getTag()||this.getText();return e},getMustache:e,getComment:t,getTag:n,getText:r,getExpression:i,allowWhitespace:s,getStringMatch:o,remaining:function(){return this.str.substring(this.pos)},fail:function(){var e,t;throw e=this.str.substr(0,this.pos).substr(-20),20===e.length&&(e="..."+e),t=this.remaining().substr(0,20),20===t.length&&(t+="..."),new Error("Could not parse template: "+(e?e+"<- ":"")+"failed at character "+this.pos+" ->"+t)},expected:function(e){var t=this.remaining().substr(0,40);throw 40===t.length&&(t+="..."),new Error('Tokenizer failed: unexpected string "'+t+'" (expected '+e+")")}},u}(_n,Dn,Hn,Bn,Yn,Rt,qt),er=function(e,t,n,r,i){var s,o;return i.push(function(){o=i.Ractive}),s=function(i,s){var u,a;return s=s||{},s.stripComments!==!1&&(i=e(i)),u=new r(i,{delimiters:s.delimiters||(o?o.delimiters:["{{","}}"]),tripleDelimiters:s.tripleDelimiters||(o?o.tripleDelimiters:["{{{","}}}"])}),a=u.tokens,t(a),n(a),a}}(Cn,kn,Ln,Zn,Ot),tr=function(e){var t,n,r,i,s,o,u,a,f;return t=function(e,t){this.text=t?e.value:e.value.replace(f," ")},t.prototype={type:e.TEXT,toJSON:function(){return this.decoded||(this.decoded=a(this.text))},toString:function(){return this.text}},n={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},r=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],i=new RegExp("&("+Object.keys(n).join("|")+");?","g"),s=/&#x([0-9]+);?/g,o=/&#([0-9]+);?/g,u=function(e){return e?10===e?32:128>e?e:159>=e?r[e-128]:55296>e?e:57343>=e?65533:65535>=e?e:65533:65533},a=function(e){var t;return t=e.replace(i,function(e,t){return n[t]?String.fromCharCode(n[t]):e}),t=t.replace(s,function(e,t){return String.fromCharCode(u(parseInt(t,16)))}),t=t.replace(o,function(e,t){return String.fromCharCode(u(t))})},f=/\s+/g,t}(l),nr=function(e,t){return function(n){return n.type===e.TEXT?(this.pos+=1,new t(n,this.preserveWhitespace)):null}}(l,tr),rr=function(e){var t;return t=function(e){this.content=e.content},t.prototype={toJSON:function(){return{t:e.COMMENT,f:this.content}},toString:function(){return"<!--"+this.content+"-->"}},t}(l),ir=function(e,t){return function(n){return n.type===e.COMMENT?(this.pos+=1,new t(n,this.preserveWhitespace)):null}}(l,rr),sr=function(e,t){var n,r,i;return n=function(e){this.refs=[],r(e,this.refs),this.str=i(e,this.refs)},n.prototype={toJSON:function(){return this.json?this.json:(this.json={r:this.refs,s:this.str},this.json)}},r=function(n,i){var s,o;if(n.t===e.REFERENCE&&-1===i.indexOf(n.n)&&i.unshift(n.n),o=n.o||n.m)if(t(o))r(o,i);else for(s=o.length;s--;)r(o[s],i);n.x&&r(n.x,i),n.r&&r(n.r,i),n.v&&r(n.v,i)},i=function(t,n){var r=function(e){return i(e,n)};switch(t.t){case e.BOOLEAN_LITERAL:case e.GLOBAL:case e.NUMBER_LITERAL:return t.v;case e.STRING_LITERAL:return"'"+t.v.replace(/'/g,"\\'")+"'";case e.ARRAY_LITERAL:return"["+(t.m?t.m.map(r).join(","):"")+"]";case e.OBJECT_LITERAL:return"{"+(t.m?t.m.map(r).join(","):"")+"}";case e.KEY_VALUE_PAIR:return t.k+":"+i(t.v,n);case e.PREFIX_OPERATOR:return("typeof"===t.s?"typeof ":t.s)+i(t.o,n);case e.INFIX_OPERATOR:return i(t.o[0],n)+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+i(t.o[1],n);case e.INVOCATION:return i(t.x,n)+"("+(t.o?t.o.map(r).join(","):"")+")";case e.BRACKETED:return"("+i(t.x,n)+")";case e.MEMBER:return i(t.x,n)+i(t.r,n);case e.REFINEMENT:return t.n?"."+t.n:"["+i(t.x,n)+"]";case e.CONDITIONAL:return i(t.o[0],n)+"?"+i(t.o[1],n)+":"+i(t.o[2],n);case e.REFERENCE:return"${"+n.indexOf(t.n)+"}";default:throw new Error("Could not stringify expression token. This error is unexpected")}},n}(l,S),or=function(e,t){var n=function(n,r){this.type=n.type===e.TRIPLE?e.TRIPLE:n.mustacheType,n.ref&&(this.ref=n.ref),n.expression&&(this.expr=new t(n.expression)),r.pos+=1};return n.prototype={toJSON:function(){var e;return this.json?this.json:(e={t:this.type},this.ref&&(e.r=this.ref),this.expr&&(e.x=this.expr.toJSON()),this.json=e,e)},toString:function(){return!1}},n}(l,sr),ur=function(){return function(e){var t,n,r,i="";if(!e)return"";for(n=0,r=e.length;r>n;n+=1){if(t=e[n].toString(),t===!1)return!1;i+=t}return i}}(),ar=function(e){return function(t,n){var r,i;return n||(r=e(t),r===!1)?i=t.map(function(e){return e.toJSON(n)}):r}}(ur),fr=function(e,t,n){var r=function(t,r){var i;for(this.ref=t.ref,this.indexRef=t.indexRef,this.inverted=t.mustacheType===e.INVERTED,t.expression&&(this.expr=new n(t.expression)),r.pos+=1,this.items=[],i=r.next();i;){if(i.mustacheType===e.CLOSING){if(i.ref.trim()===this.ref||this.expr){r.pos+=1;break}throw new Error("Could not parse template: Illegal closing section")}this.items[this.items.length]=r.getStub(),i=r.next()}};return r.prototype={toJSON:function(n){var r;return this.json?this.json:(r={t:e.SECTION},this.ref&&(r.r=this.ref),this.indexRef&&(r.i=this.indexRef),this.inverted&&(r.n=!0),this.expr&&(r.x=this.expr.toJSON()),this.items.length&&(r.f=t(this.items,n)),this.json=r,r)},toString:function(){return!1}},r}(l,ar,sr),lr=function(e,t,n){return function(r){return r.type===e.MUSTACHE||r.type===e.TRIPLE?r.mustacheType===e.SECTION||r.mustacheType===e.INVERTED?new n(r,this):new t(r,this):void 0}}(l,or,fr),cr=function(){return{li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]}}(),hr=function(e){function t(n){var r,i;if("object"!=typeof n)return n;if(e(n))return n.map(t);r={};for(i in n)n.hasOwnProperty(i)&&(r[i]=t(n[i]));return r}return function(e){var n,r,i,s,o,u;for(i={},n=[],r=[],o=e.length,s=0;o>s;s+=1)if(u=e[s],"intro"===u.name){if(i.intro)throw new Error("An element can only have one intro transition");i.intro=u}else if("outro"===u.name){if(i.outro)throw new Error("An element can only have one outro transition");i.outro=u}else if("intro-outro"===u.name){if(i.intro||i.outro)throw new Error("An element can only have one intro and one outro transition");i.intro=u,i.outro=t(u)}else"proxy-"===u.name.substr(0,6)?(u.name=u.name.substring(6),r[r.length]=u):"on-"===u.name.substr(0,3)?(u.name=u.name.substring(3),r[r.length]=u):"decorator"===u.name?i.decorator=u:n[n.length]=u;return i.attrs=n,i.proxies=r,i}}(c),pr=function(e,t){return function(n){var r,i,s,o,u,a,f,l;for(u=function(){throw new Error("Illegal directive")},n.name&&n.value||u(),r={directiveType:n.name},i=n.value,a=[],f=[];i.length;)if(s=i.shift(),s.type===e.TEXT){if(o=s.value.indexOf(":"),-1!==o){o&&(a[a.length]={type:e.TEXT,value:s.value.substr(0,o)}),s.value.length>o+1&&(f[0]={type:e.TEXT,value:s.value.substring(o+1)});break}a[a.length]=s}else a[a.length]=s;return f=f.concat(i),r.name=1===a.length&&a[0].type===e.TEXT?a[0].value:a,f.length&&(1===f.length&&f[0].type===e.TEXT?(l=t("["+f[0].value+"]"),r.args=l?l.value:f[0].value):r.dynamicArgs=f),r}}(l,Kt),dr=function(e,t){var n;return n=function(e,t){var n;for(this.tokens=e||[],this.pos=0,this.options=t,this.result=[];n=this.getStub();)this.result.push(n)},n.prototype={getStub:function(){var e=this.next();return e?this.getText(e)||this.getMustache(e):null},getText:e,getMustache:t,next:function(){return this.tokens[this.pos]}},n}(nr,lr),vr=function(e,t,n){var r;return r=function(t){var n=new e(t);this.stubs=n.result},r.prototype={toJSON:function(e){var t;return this["json_"+e]?this["json_"+e]:t=this["json_"+e]=n(this.stubs,e)},toString:function(){return void 0!==this.str?this.str:(this.str=t(this.stubs),this.str)}},r}(dr,ur,ar),mr=function(e){return function(t){var n,r;if("string"==typeof t.name){if(!t.args&&!t.dynamicArgs)return t.name;r=t.name}else r=(new e(t.name)).toJSON();return n={n:r},t.args?(n.a=t.args,n):(t.dynamicArgs&&(n.d=(new e(t.dynamicArgs)).toJSON()),n)}}(vr),gr=function(e,t,n){return function(r){var i,s,o,u,a,f,l;if(this["json_"+r])return this["json_"+r];if(i=this.component?{t:e.COMPONENT,e:this.component}:{t:e.ELEMENT,e:this.tag},this.doctype&&(i.y=1),this.attributes&&this.attributes.length)for(i.a={},f=this.attributes.length,a=0;f>a;a+=1){if(l=this.attributes[a],s=l.name,i.a[s])throw new Error("You cannot have multiple attributes with the same name");o=null===l.value?null:l.value.toJSON(r),i.a[s]=o}if(this.items&&this.items.length&&(i.f=t(this.items,r)),this.proxies&&this.proxies.length)for(i.v={},f=this.proxies.length,a=0;f>a;a+=1)u=this.proxies[a],i.v[u.directiveType]=n(u);return this.intro&&(i.t1=n(this.intro)),this.outro&&(i.t2=n(this.outro)),this.decorator&&(i.o=n(this.decorator)),this["json_"+r]=i,i}}(l,ar,mr),yr=function(e,t){var n;return n="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),function(){var r,i,s,o,u,a,f,l;if(void 0!==this.str)return this.str;if(this.component)return this.str=!1;if(-1===n.indexOf(this.tag.toLowerCase()))return this.str=!1;if(this.proxies||this.intro||this.outro||this.decorator)return this.str=!1;if(f=e(this.items),f===!1)return this.str=!1;if(l=-1!==t.indexOf(this.tag.toLowerCase()),r="<"+this.tag,this.attributes)for(i=0,s=this.attributes.length;s>i;i+=1){if(u=this.attributes[i].name,-1!==u.indexOf(":"))return this.str=!1;if("id"===u||"intro"===u||"outro"===u)return this.str=!1;if(o=" "+u,null!==this.attributes[i].value){if(a=this.attributes[i].value.toString(),a===!1)return this.str=!1;""!==a&&(o+="=",o+=/[\s"'=<>`]/.test(a)?'"'+a.replace(/"/g,"&quot;")+'"':a)}r+=o}return this.selfClosing&&!l?(r+="/>",this.str=r):(r+=">",l?this.str=r:(r+=f,r+="</"+this.tag+">",this.str=r))}}(ur,mn),br=function(e,t,n,r,i,s,o,u,a,f,l){var c,h,p,d,v,m=/^\s+/,g=/\s+$/;return c=function(r,i,a){var f,c,h,p,d,y,b;if(i.pos+=1,y=function(e){return{name:e.name,value:e.value?new l(e.value):null}},this.tag=r.name,b=r.name.toLowerCase(),"rv-"===b.substr(0,3)&&(n('The "rv-" prefix for components has been deprecated. Support will be removed in a future version'),this.tag=this.tag.substring(3)),a=a||"pre"===b,r.attrs&&(h=o(r.attrs),c=h.attrs,p=h.proxies,i.options.sanitize&&i.options.sanitize.eventAttributes&&(c=c.filter(v)),c.length&&(this.attributes=c.map(y)),p.length&&(this.proxies=p.map(u)),h.intro&&(this.intro=u(h.intro)),h.outro&&(this.outro=u(h.outro)),h.decorator&&(this.decorator=u(h.decorator))),r.doctype&&(this.doctype=!0),r.selfClosing&&(this.selfClosing=!0),-1!==t.indexOf(b)&&(this.isVoid=!0),!this.selfClosing&&!this.isVoid){for(this.siblings=s[b],this.items=[],f=i.next();f&&f.mustacheType!==e.CLOSING;){if(f.type===e.TAG){if(f.closing){f.name.toLowerCase()===b&&(i.pos+=1);break}if(this.siblings&&-1!==this.siblings.indexOf(f.name.toLowerCase()))break}this.items[this.items.length]=i.getStub(),f=i.next()}a||(d=this.items[0],d&&d.type===e.TEXT&&(d.text=d.text.replace(m,""),d.text||this.items.shift()),d=this.items[this.items.length-1],d&&d.type===e.TEXT&&(d.text=d.text.replace(g,""),d.text||this.items.pop()))}},c.prototype={toJSON:a,toString:f},h="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),p="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),d=/^on[a-zA-Z]/,v=function(e){var t=!d.test(e.name);return t},c}(l,mn,P,ln,ur,cr,hr,pr,gr,yr,vr),wr=function(e,t){return function(e){return this.options.sanitize&&this.options.sanitize.elements&&-1!==this.options.sanitize.elements.indexOf(e.name.toLowerCase())?null:new t(e,this)}}(l,br),Er=function(e,t,n,r,i){var s;return s=function(e,t){var n,r;for(this.tokens=e||[],this.pos=0,this.options=t,this.preserveWhitespace=t.preserveWhitespace,r=[];n=this.getStub();)r.push(n);this.result=i(r)},s.prototype={getStub:function(){var e=this.next();return e?this.getText(e)||this.getComment(e)||this.getMustache(e)||this.getElement(e):null},getText:e,getComment:t,getMustache:n,getElement:r,next:function(){return this.tokens[this.pos]}},s}(nr,ir,lr,wr,ar),Sr=function(e,t,n){var r,i,s,o,u;return i=/^\s*$/,s=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,o=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,r=function(r,o){var a,f,l;return o=o||{},s.test(r)?u(r,o):(o.sanitize===!0&&(o.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),a=e(r,o),o.preserveWhitespace||(l=a[0],l&&l.type===t.TEXT&&i.test(l.value)&&a.shift(),l=a[a.length-1],l&&l.type===t.TEXT&&i.test(l.value)&&a.pop()),f=(new n(a,o)).result,"string"==typeof f?[f]:f)},u=function(e,t){var n,i,u,a,f,l;for(u={},n="",i=e;f=s.exec(i);){if(a=f[1],n+=i.substr(0,f.index),i=i.substring(f.index+f[0].length),l=o.exec(i),!l||l[1]!==a)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");u[a]=r(i.substr(0,l.index),t),i=i.substring(l.index+l[0].length)}return{main:r(n,t),partials:u}},r}(er,l,Er),xr=function(e,t,n,r,i,s){var o,u,a,f;return o=function(r,o){var l,c,h;if(c=a(r,o))return c;if(t&&(l=document.getElementById(o),l&&"SCRIPT"===l.tagName)){if(!s)throw new Error(e.missingParser);u(s(l.innerHTML),o,i)}if(c=i[o],!c){if(h='Could not find descriptor for partial "'+o+'"',r.debug)throw new Error(h);return n(h),[]}return f(c)},a=function(t,n){var r;if(t.partials[n]){if("string"==typeof t.partials[n]){if(!s)throw new Error(e.missingParser);r=s(t.partials[n],t.parseOptions),u(r,n,t.partials)}return f(t.partials[n])}},u=function(e,t,n){var i;if(r(e)){n[t]=e.main;for(i in e.partials)e.partials.hasOwnProperty(i)&&(n[i]=e.partials[i])}else n[t]=e},f=function(e){return 1===e.length&&"string"==typeof e[0]?e[0]:e},o}(Tn,s,P,S,Nn,Sr),Tr=function(e,t,n){var r,i;return n.push(function(){i=n.DomFragment}),r=function(n,r){var s,o=this.parentFragment=n.parentFragment;if(this.type=e.PARTIAL,this.name=n.descriptor.r,this.index=n.index,!n.descriptor.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");s=t(o.root,n.descriptor.r),this.fragment=new i({descriptor:s,root:o.root,pNode:o.pNode,contextStack:o.contextStack,owner:this}),r&&r.appendChild(this.fragment.docFrag)},r.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},teardown:function(e){this.fragment.teardown(e)},toString:function(){return this.fragment.toString()},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)}},r}(l,xr,Ot),Nr=function(e){var t=function(t,n,r){this.parentFragment=t.parentFragment,this.component=t,this.key=n,this.fragment=new e({descriptor:r,root:t.root,owner:this,contextStack:t.parentFragment.contextStack}),this.selfUpdating=this.fragment.isSimple(),this.value=this.fragment.getValue()};return t.prototype={bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._deferred.attrs.push(this),this.deferred=!0)},update:function(){var e=this.fragment.getValue();this.component.instance.set(this.key,e),this.value=e},teardown:function(){this.fragment.teardown()}},t}(en),Cr=function(e,t,n,r){function i(i,s,o,u){var a,f,l,c,h;return l=i.root,c=i.parentFragment,"string"==typeof o?(f=t(o),f?f.value:o):null===o?!0:1===o.length&&o[0].t===e.INTERPOLATOR&&o[0].r?c.indexRefs&&void 0!==c.indexRefs[o[0].r]?c.indexRefs[o[0].r]:(h=n(l,o[0].r,c.contextStack)||o[0].r,u.push({childKeypath:s,parentKeypath:h}),l.get(h)):(a=new r(i,s,o),i.complexParameters.push(a),a.value)}return function(e,t,n){var r,s,o;r={},e.complexParameters=[];for(s in t)t.hasOwnProperty(s)&&(o=i(e,s,t[s],n),void 0!==o&&(r[s]=o));return r}}(l,Kt,T,Nr),kr=function(){return function(e,t,n,r,i){var s,o,u,a;return o=e.parentFragment,a=e.root,u={content:i||[]},s=new t({el:o.pNode.cloneNode(!1),data:n,partials:u,_parent:a,adaptors:a.adaptors}),s.component=e,e.instance=s,s.insert(r),s.fragment.pNode=o.pNode,s}}(),Lr=function(){function e(e,n,r){var i,s,o,u,a,f,l;i=e.root,s=e.instance,a=e.observers,f=i.observe(n,function(e){o||i._wrapped[n]||(u=!0,s.set(r,e),u=!1)},t),a.push(f),s.twoway&&(f=s.observe(r,function(e){u||(o=!0,i.set(n,e),o=!1)},t),a.push(f),l=s.get(r),void 0!==l&&i.set(n,l))}var t={init:!1,debug:!0};return function(t,n){var r,i;for(t.observers=[],i=n.length;i--;)r=n[i],e(t,r.parentKeypath,r.childKeypath)}}(),Ar=function(e){function t(t,r,i,s){if("string"!=typeof s){if(r.debug)throw new Error(n);return e(n),void 0}t.on(i,function(){var e=Array.prototype.slice.call(arguments);e.unshift(s),r.fire.apply(r,e)})}var n="Components currently only support simple events - you cannot include arguments. Sorry!";return function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e.instance,e.root,r,n[r])}}(P),Or=function(){return function(e){var t,n;for(t=e.root;t;)(n=t._liveComponentQueries[e.name])&&n.push(e.instance),t=t._parent}}(),Mr=function(e,t,n,r,i,s,o){return function(u,a,f){var l,c,h,p,d;if(l=u.parentFragment=a.parentFragment,c=l.root,u.root=c,u.type=e.COMPONENT,u.name=a.descriptor.e,u.index=a.index,u.observers=[],h=c.components[a.descriptor.e],!h)throw new Error('Component "'+a.descriptor.e+'" not found');d=[],p=n(u,a.descriptor.a,d),r(u,h,p,f,a.descriptor.f),i(u,d),s(u,a.descriptor.v),(a.descriptor.t1||a.descriptor.t2||a.descriptor.o)&&t('The "intro", "outro" and "decorator" directives have no effect on components'),o(u)}}(l,P,Cr,kr,Lr,Ar,Or),_r=function(e){var t=function(t,n){e(this,t,n)};return t.prototype={firstNode:function(){return this.instance.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.instance.fragment.detach()},teardown:function(){for(var e;this.complexParameters.length;)this.complexParameters.pop().teardown();for(;this.observers.length;)this.observers.pop().cancel();(e=this.root._liveComponentQueries[this.name])&&e._remove(this),this.instance.teardown()},toString:function(){return this.instance.fragment.toString()},find:function(e){return this.instance.fragment.find(e)},findAll:function(e,t){return this.instance.fragment.findAll(e,t)},findComponent:function(e){return e&&e!==this.name?null:this.instance},findAllComponents:function(e,t){t._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(e,t)}},t}(Mr),Dr=function(e){var t=function(t,n){this.type=e.COMMENT,this.descriptor=t.descriptor,n&&(this.node=document.createComment(t.descriptor.f),n.appendChild(this.node))};return t.prototype={detach:function(){return this.node.parentNode.removeChild(this.node),this.node},teardown:function(e){e&&this.detach()},firstNode:function(){return this.node},toString:function(){return"<!--"+this.descriptor.f+"-->"}},t}(l),Pr=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e){e.pNode&&(this.docFrag=document.createDocumentFragment()),"string"==typeof e.descriptor?(this.html=e.descriptor,this.docFrag&&(this.nodes=r(this.html,e.pNode.tagName,this.docFrag))):n(this,e)};return p.prototype={detach:function(){var e,t;if(this.nodes)for(t=this.nodes.length;t--;)this.docFrag.appendChild(this.nodes[t]);else if(this.items)for(e=this.items.length,t=0;e>t;t+=1)this.docFrag.appendChild(this.items[t].detach());return this.docFrag},createItem:function(t){if("string"==typeof t.descriptor)return new i(t,this.docFrag);switch(t.descriptor.t){case e.INTERPOLATOR:return new s(t,this.docFrag);case e.SECTION:return new o(t,this.docFrag);case e.TRIPLE:return new u(t,this.docFrag);case e.ELEMENT:return this.root.components[t.descriptor.e]?new l(t,this.docFrag):new a(t,this.docFrag);case e.PARTIAL:return new f(t,this.docFrag);case e.COMMENT:return new c(t,this.docFrag);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/RactiveJS/Ractive/issues. Thanks!")}},teardown:function(e){var t;if(this.nodes&&e)for(;t=this.nodes.pop();)t.parentNode.removeChild(t);else if(this.items)for(;this.items.length;)this.items.pop().teardown(e);this.nodes=this.items=this.docFrag=null},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(e){var t=e.index;return this.items[t+1]?this.items[t+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},toString:function(){var e,t,n,r;if(this.html)return this.html;if(e="",!this.items)return e;for(n=this.items.length,t=0;n>t;t+=1)r=this.items[t],e+=r.toString();return e},find:function(e){var n,r,i,s,o;if(this.nodes){for(r=this.nodes.length,n=0;r>n;n+=1)if(s=this.nodes[n],1===s.nodeType){if(t(s,e))return s;if(o=s.querySelector(e))return o}return null}if(this.items){for(r=this.items.length,n=0;r>n;n+=1)if(i=this.items[n],i.find&&(o=i.find(e)))return o;return null}},findAll:function(e,n){var r,i,s,o,u,a,f;if(this.nodes){for(i=this.nodes.length,r=0;i>r;r+=1)if(o=this.nodes[r],1===o.nodeType&&(t(o,e)&&n.push(o),u=o.querySelectorAll(e)))for(a=u.length,f=0;a>f;f+=1)n.push(u[f])}else if(this.items)for(i=this.items.length,r=0;i>r;r+=1)s=this.items[r],s.findAll&&s.findAll(e,n);return n},findComponent:function(e){var t,n,r,i;if(this.items){for(t=this.items.length,n=0;t>n;n+=1)if(r=this.items[n],r.findComponent&&(i=r.findComponent(e)))return i;return null}},findAllComponents:function(e,t){var n,r,i;if(this.items)for(r=this.items.length,n=0;r>n;n+=1)i=this.items[n],i.findAllComponents&&i.findAllComponents(e,t);return t}},h.DomFragment=p,p}(l,G,lt,ct,ht,Nt,Mt,_t,xn,Tr,_r,Dr,Ot),Hr=function(e,t,n,r,i){return function(e,s){var o;if(!this._initing)throw new Error("You cannot call ractive.render() directly!");this._transitionManager=o=t(this,s),this.fragment=new i({descriptor:this.template,root:this,owner:this,pNode:e}),n(this),e&&e.appendChild(this.fragment.docFrag),r(this),this._transitionManager=null,o.ready(),this.rendered=!0}}(ft,m,d,v,Pr),Br=function(e){return function(){return e("renderHTML() has been deprecated and will be removed in a future version. Please use toHTML() instead"),this.toHTML()}}(P),jr=function(){return function(){return this.fragment.toString()}}(),Fr=function(e,t){return function(n){var r,i,s;for(this.fire("teardown"),s=this._transitionManager,this._transitionManager=i=e(this,n),this.fragment.teardown(!0);this._animations[0];)this._animations[0].stop();for(r in this._cache)t(this,r);this._transitionManager=s,i.ready()}}(m,h),Ir=function(e){return function(t,n,r){var i;if("string"==typeof n&&e(r)){if(i=t.get(n),void 0===i&&(i=0),e(i))t.set(n,i+r);else if(t.debug)throw new Error("Cannot add to a non-numeric value")}else if(t.debug)throw new Error("Bad arguments")}}(H),qr=function(e){return function(t,n){e(this,t,void 0===n?1:n)}}(Ir),Rr=function(e){return function(t,n){e(this,t,void 0===n?-1:-n)}}(Ir),Ur=function(){return function(e){var t;if("string"==typeof e)t=this.get(e),this.set(e,!t);else if(this.debug)throw new Error("Bad arguments")}}(),zr=function(){return function(e,t){var n,r,i,s,o;return n={},i=0,r=function(e,r){var s,u,a;u=i,a=t.length;do{if(s=t.indexOf(e,u),-1===s)return o=!0,-1;u=s+1}while(n[s]&&a>u);return s===i&&(i+=1),s!==r&&(o=!0),n[s]=!0,s},s=e.map(r),s.unchanged=!o,s}}(),Wr=function(e){return function(t,n,r,i){var s,o;for(s=n.length;s--;)o=n[s],o.type===e.REFERENCE?o.update():o.keypath===t&&o.type===e.SECTION&&!o.inverted&&o.docFrag?r[r.length]=o:i[i.length]=o}}(l),Xr=function(e,t,n,r,i,s,o,u,a,f){function l(e){return JSON.stringify(e)}function c(e){return h[e]||(h[e]=function(t){return t[e]}),h[e]}var h={};return function(h,p,d){var v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;if(v=this.get(h),!t(v)||!t(p))return this.set(h,p,d&&d.complete);if(b=v.length===p.length,d&&d.compare){if(d.compare===!0)y=l;else if("string"==typeof d.compare)y=c(d.compare);else{if("function"!=typeof d.compare)throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)");y=d.compare}try{m=v.map(y),g=p.map(y)}catch(O){if(this.debug)throw O;e("Merge operation: comparison failed. Falling back to identity checking"),m=v,g=p}}else m=v,g=p;if(E=a(m,g),n(this,h),u(this,h,p),!E.unchanged||!b){for(k=this._transitionManager,this._transitionManager=C=s(this,d&&d.complete),S=[],x=[],w=0;w<this._deps.length;w+=1)if(T=this._deps[w],T&&(N=T[h])){for(f(h,N,S,x),r(this);S.length;)S.pop().merge(E);for(;x.length;)x.pop().update()}for(i(this),L=[],A=h.split(".");A.length;)A.pop(),L[L.length]=A.join(".");o.multiple(this,L,!0),m.length!==g.length&&o(this,h+".length",!0),this._transitionManager=k,C.ready()}}}(P,c,h,d,C,m,g,k,zr,Wr),Vr=function(){return function(){return this.fragment.detach()}}(),$r=function(e){return function(t,n){if(t=e(t),n=e(n)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),n),this.fragment.pNode=t}}(ft),Jr=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){return{get:e,set:t,update:n,updateModel:r,animate:i,on:s,off:o,observe:u,fire:a,find:f,findAll:l,findComponent:c,findAllComponents:h,renderHTML:d,toHTML:v,render:p,teardown:m,add:g,subtract:y,toggle:b,merge:w,detach:E,insert:S}}(E,L,A,M,I,q,R,J,K,Q,ot,ut,at,Hr,Br,jr,Fr,qr,Rr,Ur,Xr,Vr,$r),Kr=function(){return["partials","transitions","events","components","decorators","data"]}(),Qr=function(){return["el","template","complete","modifyArrays","magic","twoway","lazy","append","preserveWhitespace","sanitize","stripComments","noIntro","transitionsEnabled","adaptors"]}(),Gr=function(e,t,n){return function(r,i){e.forEach(function(e){i[e]&&(r[e]=n(i[e]))}),t.forEach(function(e){r[e]=i[e]})}}(Kr,Qr,n),Yr=function(){return function(e,t){return/_super/.test(e)?function(){var n,r=this._super;return this._super=t,n=e.apply(this,arguments),this._super=r,n}:e}}(),Zr=function(){return function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}}(),ei=function(e,t,n,r){var i,s;return i=e.concat(t),s={},i.forEach(function(e){s[e]=!0}),function(i,o){var u,a;e.forEach(function(e){var t=o[e];t&&(i[e]?r(i[e],t):i[e]=t)}),t.forEach(function(e){var t=o[e];void 0!==t&&(i[e]="function"==typeof t&&"function"==typeof i[e]?n(t,i[e]):o[e])});for(u in o)o.hasOwnProperty(u)&&!s[u]&&(a=o[u],i.prototype[u]="function"==typeof a&&"function"==typeof i.prototype[u]?n(a,i.prototype[u]):a)}}(Kr,Qr,Yr,Zr),ti=function(e,t){return function(n,r){e(n.template)&&(n.partials||(n.partials={}),t(n.partials,n.template.partials),r.partials&&t(n.partials,r.partials),n.template=n.template.main)}}(S,Zr),ni=function(e,t,n){return function(r){var i;if("string"==typeof r.template){if(!n)throw new Error(e.missingParser);if("#"===r.template.charAt(0)&&t){if(i=document.getElementById(r.template.substring(1)),!i||"SCRIPT"!==i.tagName)throw new Error("Could not find template element ("+r.template+")");r.template=n(i.innerHTML,r)}else r.template=n(r.template,r)}}}(Tn,s,Sr),ri=function(e,t){return function(n){var r;if(n.partials)for(r in n.partials)if(n.partials.hasOwnProperty(r)&&"string"==typeof n.partials[r]){if(!t)throw new Error(e.missingParser);n.partials[r]=t(n.partials[r],n)}}}(Tn,Sr),ii=function(){return function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}}(),si=function(){return function(e){for(var t,n,r=Array.prototype.slice.call(arguments,1);n=r.shift();)for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}}(),oi=function(e,t,n,r,i,s,o,u,a,f,l){var c,h,p,d;return c=function(){return{}},h=function(){return[]},p=r(null),o(p,{preserveWhitespace:{enumerable:!0,value:!1},append:{enumerable:!0,value:!1},twoway:{enumerable:!0,value:!0},modifyArrays:{enumerable:!0,value:!0},data:{enumerable:!0,value:c},lazy:{enumerable:!0,value:!1},debug:{enumerable:!0,value:!1},transitions:{enumerable:!0,value:c},decorators:{enumerable:!0,value:c},events:{enumerable:!0,value:c},noIntro:{enumerable:!0,value:!1},transitionsEnabled:{enumerable:!0,value:!0},magic:{enumerable:!0,value:!1},adaptors:{enumerable:!0,value:h}}),d=["components","decorators","events","partials","transitions","data"],function(c,h){var v,m,g,y;for(v in p)void 0===h[v]&&(h[v]="function"==typeof p[v]?p[v]():p[v]);if(o(c,{_initing:{value:!0,writable:!0},_guid:{value:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=16*Math.random()|0,n="x"==e?t:3&t|8,n.toString(16)})},_subs:{value:r(null),configurable:!0},_cache:{value:{}},_cacheMap:{value:r(null)},_deps:{value:[]},_depsMap:{value:r(null)},_patternObservers:{value:[]},_pendingResolution:{value:[]},_deferred:{value:{}},_evaluators:{value:r(null)},_twowayBindings:{value:{}},_transitionManager:{value:null,writable:!0},_animations:{value:[]},nodes:{value:{}},_wrapped:{value:r(null)},_liveQueries:{value:[]},_liveComponentQueries:{value:[]}}),o(c._deferred,{attrs:{value:[]},evals:{value:[]},selectValues:{value:[]},checkboxes:{value:[]},radios:{value:[]},observers:{value:[]},transitions:{value:[]},liveQueries:{value:[]},decorators:{value:[]},focusable:{value:null,writable:!0}}),c.adaptors=h.adaptors,c.modifyArrays=h.modifyArrays,c.magic=h.magic,c.twoway=h.twoway,c.lazy=h.lazy,c.debug=h.debug,c.magic&&!f)throw new Error("Getters and setters (magic mode) are not supported in this browser");if(h._parent&&s(c,"_parent",{value:h._parent}),h.el&&(c.el=u(h.el),!c.el&&c.debug))throw new Error("Could not find container element");if(h.eventDefinitions&&(n("ractive.eventDefinitions has been deprecated in favour of ractive.events. Support will be removed in future versions"),h.events=h.eventDefinitions),d.forEach(function(e){c.constructor[e]?c[e]=i(r(c.constructor[e]||{}),h[e]):h[e]&&(c[e]=h[e])}),m=h.template,"string"==typeof m){if(!l)throw new Error(t.missingParser);if("#"===m.charAt(0)&&e){if(g=document.getElementById(m.substring(1)),!g)throw new Error("Could not find template element ("+m+")");y=l(g.innerHTML,h)}else y=l(m,h)}else y=m;a(y)&&(i(c.partials,y.partials),y=y.main),y&&1===y.length&&"string"==typeof y[0]&&(y=y[0]),c.template=y,i(c.partials,h.partials),c.parseOptions={preserveWhitespace:h.preserveWhitespace,sanitize:h.sanitize,stripComments:h.stripComments},c.transitionsEnabled=h.noIntro?!1:h.transitionsEnabled,e&&!c.el&&(c.el=document.createDocumentFragment()),c.el&&!h.append&&(c.el.innerHTML=""),c.render(c.el,h.complete),c.transitionsEnabled=h.transitionsEnabled,c._initing=!1}}(s,Tn,P,n,si,o,u,ft,S,b,Sr),ui=function(e,t,n,r,i){return function(e,n,s){t.forEach(function(e){var t=s[e],i=n[e];"function"==typeof t&&"function"==typeof i?s[e]=r(t,i):void 0===t&&void 0!==i&&(s[e]=i)}),e.beforeInit&&e.beforeInit(s),i(e,s),e.init&&e.init(s)}}(cn,Qr,ii,Yr,oi),ai=function(e,t,n,r,i,s,o,u){var a;return u.push(function(){a=u.Ractive}),function(u){var a,f=this;return a=function(e){o(this,a,e||{})},a.prototype=e(f.prototype),a.prototype.constructor=a,t(a,f),n(a,u),i(a),r(a,u),s(a),a.extend=f.extend,a}}(n,Gr,ei,ti,ni,ri,ui,Ot),fi=function(e,t,n,r,i,s,o,u,a,f,l){var c=function(e){f(this,e)};return n(c,{prototype:{value:r},partials:{value:i},adaptors:{value:s},easing:{value:o},transitions:{value:{}},events:{value:{}},components:{value:{}},decorators:{value:{}},svg:{value:e},VERSION:{value:"0.3.9"}}),c.eventDefinitions=c.events,c.prototype.constructor=c,c.delimiters=["{{","}}"],c.tripleDelimiters=["{{{","}}}"],c.extend=u,c.parse=a,l.Ractive=c,c}(t,n,u,Jr,Nn,f,F,ai,Sr,oi,Ot),li=function(e,t){for("undefined"!=typeof window&&window.Node&&!window.Node.prototype.contains&&window.HTMLElement&&window.HTMLElement.prototype.contains&&(window.Node.prototype.contains=window.HTMLElement.prototype.contains);t.length;)t.pop()();return e}(fi,Ot);"undefined"!=typeof module&&module.exports?module.exports=li:"function"==typeof define&&define.amd?define([],function(){return li}):e.Ractive=li}("undefined"!=typeof window?window:this);