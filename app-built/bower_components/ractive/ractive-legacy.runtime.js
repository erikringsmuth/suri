// https://raw.github.com/danro/easing-js - license info

// This code may be freely distributed under the MIT license

// http://danro.mit-license.org/

// Easing Equations (c) 2003 Robert Penner, BSD license

(function(e){var t=e.Ractive,n=function(){var e,t,n;if(typeof window=="undefined")return;e=window,t=e.document,n={};if(!t)return;return Date.now||(Date.now=function(){return+(new Date)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if(typeof i!="object"&&typeof i!="function"||i===null)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)e.call(i,o)&&s.push(o);if(t)for(var u=0;u<r;u++)e.call(i,n[u])&&s.push(n[u]);return s}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;t===undefined&&(t=0),t<0&&(t+=this.length),t<0&&(t=0);for(n=this.length;t<n;t++)if(this.hasOwnProperty(t)&&this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;for(n=0,r=this.length;n<r;n+=1)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=this,r,i,s=[],o;n instanceof String&&(n=n.toString(),o=!0);for(r=0,i=n.length;r<i;r+=1)if(n.hasOwnProperty(r)||o)s[r]=e.call(t,n[r],r,n);return s}),typeof Array.prototype.reduce!="function"&&(Array.prototype.reduce=function(e,t){var n,r,i,s;if("function"!=typeof e)throw new TypeError(e+" is not a function");i=this.length,s=!1,arguments.length>1&&(r=t,s=!0);for(n=0;n<i;n+=1)this.hasOwnProperty(n)?s&&(r=e(r,this[n],n,this)):(r=this[n],s=!0);if(!s)throw new TypeError("Reduce of empty array with no initial value");return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n,r,i=[];for(n=0,r=this.length;n<r;n+=1)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)&&(i[i.length]=this[n]);return i}),typeof Function.prototype.bind!="function"&&(Function.prototype.bind=function(e){var t,n,r,i,s=[].slice;if(typeof this!="function")throw new TypeError("Function.prototype.bind called on non-function");return t=s.call(arguments,1),n=this,r=function(){},i=function(){var i=this instanceof r&&e?this:e;return n.apply(i,t.concat(s.call(arguments)))},r.prototype=this.prototype,i.prototype=new r,i}),e.addEventListener||function(e,t){var n,r,i,s,o,u;n=function(e,t){var n,r=this;for(n in e)r[n]=e[n];r.currentTarget=t,r.target=e.srcElement||t,r.timeStamp=+(new Date),r.preventDefault=function(){e.returnValue=!1},r.stopPropagation=function(){e.cancelBubble=!0}},r=function(e,t){var r=this,i,s;i=r.listeners||(r.listeners=[]),s=i.length,i[s]=[t,function(e){t.call(r,new n(e,r))}],r.attachEvent("on"+e,i[s][1])},i=function(e,t){var n=this,r,i;if(!n.listeners)return;r=n.listeners,i=r.length;while(i--)r[i][0]===t&&n.detachEvent("on"+e,r[i][1])},e.addEventListener=t.addEventListener=r,e.removeEventListener=t.removeEventListener=i,"Element"in e?(Element.prototype.addEventListener=r,Element.prototype.removeEventListener=i):(u=t.createElement,t.createElement=function(e){var t=u(e);return t.addEventListener=r,t.removeEventListener=i,t},s=t.getElementsByTagName("head")[0],o=t.createElement("style"),s.insertBefore(o,s.firstChild))}(e,t),e.getComputedStyle||(n.getComputedStyle=function(){function e(t,n,r,i){var s=n[r],o=parseFloat(s),u=s.split(/\d/)[0],a;return i=i!=null?i:/%|em/.test(u)&&t.parentElement?e(t.parentElement,t.parentElement.currentStyle,"fontSize",null):16,a=r=="fontSize"?i:/width/i.test(r)?t.clientWidth:t.clientHeight,u=="em"?o*i:u=="in"?o*96:u=="pt"?o*96/72:u=="%"?o/100*a:o}function t(e,t){var n=t=="border"?"Width":"",r=t+"Top"+n,i=t+"Right"+n,s=t+"Bottom"+n,o=t+"Left"+n;e[t]=(e[r]==e[i]==e[s]==e[o]?[e[r]]:e[r]==e[s]&&e[o]==e[i]?[e[r],e[i]]:e[o]==e[i]?[e[r],e[i],e[s]]:[e[r],e[i],e[s],e[o]]).join(" ")}function n(n){var r,i,s,o;r=n.currentStyle,i=this,s=e(n,r,"fontSize",null);for(o in r)/width|height|margin.|padding.|border.+W/.test(o)&&i[o]!=="auto"?i[o]=e(n,r,o,s)+"px":o==="styleFloat"?i.float=r[o]:i[o]=r[o];return t(i,"margin"),t(i,"padding"),t(i,"border"),i.fontSize=s+"px",i}function r(e){return new n(e)}return n.prototype={constructor:n,getPropertyPriority:function(){},getPropertyValue:function(e){return this[e]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},r}()),n}(),r=function(){var e,t;return e={el:null,template:"",complete:null,preserveWhitespace:!1,append:!1,twoway:!0,modifyArrays:!0,lazy:!1,debug:!1,noIntro:!1,transitionsEnabled:!0,magic:!1,noCssTransform:!1,adapt:[],sanitize:!1,stripComments:!0,isolated:!1,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],computed:null},t={keys:Object.keys(e),defaults:e},t}(n),i=function(){if(typeof document=="undefined")return;return document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),s={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},o=function(e,t){return e?function(e,n){return!n||n===t.html?document.createElement(e):document.createElementNS(n,e)}:function(e,n){if(n&&n!==t.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(e)}}(i,s),u=typeof document=="object",a=function(e){try{return Object.defineProperty({},"test",{value:0}),e&&Object.defineProperty(document.createElement("div"),"test",{value:0}),Object.defineProperty}catch(t){return function(e,t,n){e[t]=n.value}}}(u),f=function(e,t,n){try{try{Object.defineProperties({},{test:{value:0}})}catch(r){throw r}return n&&Object.defineProperties(e("div"),{test:{value:0}}),Object.defineProperties}catch(r){return function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e,r,n[r])}}}(o,a,u),l=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},c=function(e){return function(t,n,r){var i;if(typeof n!="string"||!e(r))throw new Error("Bad arguments");i=+t.get(n)||0;if(!e(i))throw new Error("Cannot add to a non-numeric value");return t.set(n,i+r)}}(l),h=function(e){return function(t,n){return e(this,t,n===undefined?1:+n)}}(c),p=function(e,t){return e===null&&t===null?!0:typeof e=="object"||typeof t=="object"?!1:e===t},d=function(){function i(e){setTimeout(e,0)}function s(e,t){return function(){var n;while(n=e.shift())n(t)}}function o(t,n,r,i){var s;if(n===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(n instanceof e)n.then(r,i);else if(!n||typeof n!="object"&&typeof n!="function")r(n);else{try{s=n.then}catch(u){i(u);return}if(typeof s=="function"){var a,f,l;f=function(e){if(a)return;a=!0,o(t,e,r,i)},l=function(e){if(a)return;a=!0,i(e)};try{s.call(n,f,l)}catch(u){if(!a){i(u),a=!0;return}}}else r(n)}}var e,t={},n={},r={};return e=function(u){var a=[],f=[],l=t,c,h,p,d,v,m;return p=function(e){return function(r){if(l!==t)return;c=r,l=e,h=s(l===n?a:f,c),i(h)}},d=p(n),v=p(r),u(d,v),m={then:function(n,r){var s=new e(function(e,u){var c=function(t,n,r){typeof t=="function"?n.push(function(n){var r;try{r=t(n),o(s,r,e,u)}catch(i){u(i)}}):n.push(r)};c(n,a,e),c(r,f,u),l!==t&&i(h)});return s}},m["catch"]=function(e){return this.then(null,e)},m},e.all=function(t){return new e(function(e,n){var r=[],i,s,o;if(!t.length){e(r);return}o=function(s){t[s].then(function(t){r[s]=t,--i||e(r)},n)},i=s=t.length;while(s--)o(s)})},e.resolve=function(t){return new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e}(),v=function(){var e=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(n){return(n||"").replace(e,".$1")}}(),m=["o","ms","moz","webkit"],g=function(e){if(typeof window=="undefined")return;return function(e,t,n){var r,i;if(n.requestAnimationFrame)return;for(r=0;r<e.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[e[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(e){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-t)),s=i(function(){e(n+r)},r),t=n+r,s})}(e,0,window),window.requestAnimationFrame}(m),y=function(){return typeof window!="undefined"&&window.performance&&typeof window.performance.now=="function"?function(){return window.performance.now()}:function(){return Date.now()}}(),b=[],w=function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)},E=function(e,t,n){var r,i,s,o,u,a="/* Ractive.js component styles */\n",f={},l=[];if(!t)return;return e.push(function(){r=e.runloop}),i=document.createElement("style"),i.type="text/css",s=document.getElementsByTagName("head")[0],u=!1,o=i.styleSheet,{add:function(e){if(!e.css)return;f[e._guid]||(f[e._guid]=0,l.push(e.css),r.scheduleCssUpdate()),f[e._guid]+=1},remove:function(e){if(!e.css)return;f[e._guid]-=1,f[e._guid]||(n(l,e.css),r.scheduleCssUpdate())},update:function(){var e;l.length?(e=a+l.join(" "),o?o.cssText=e:i.innerHTML=e,u||s.appendChild(i)):u&&s.removeChild(i)}}}(b,u,w),S=function(e,t){var n,r,i,s,o,u;n=[],u=e._rendering?e.fragment.docFrag:e.el,r=u.querySelectorAll('input[type="checkbox"][name="{{'+t+'}}"]'),s=r.length;for(o=0;o<s;o+=1)i=r[o],(i.hasAttribute("checked")||i.checked)&&n.push(i._ractive.value);return n},x=Object.prototype.hasOwnProperty,T=function(e){do if(e.context)return e.context;while(e=e.parent);return""},N=function(e,t,n,r){var i,s='Could not resolve reference - too many "../" prefixes';return e.push(function(){i=e.get}),function(o,u,a){var f,l,c,h,p,d,v,m,g;u=t(u);if(u===".")return r(a);if(u.charAt(0)==="."){f=r(a),l=f?f.split("."):[];if(u.substr(0,3)==="../"){while(u.substr(0,3)==="../"){if(!l.length)throw new Error(s);l.pop(),u=u.substring(3)}return l.push(u),l.join(".")}return f?f+u:u.substring(1)}c=u.split("."),h=c.pop(),p=c.length?"."+c.join("."):"";do{f=a.context;if(!f)continue;g=!0,d=f+p,v=i(o,d);if(m=o._wrapped[d])v=m.get();if(v&&(typeof v=="object"||typeof v=="function")&&h in v)return f+"."+u}while(a=a.parent);if(!g&&(!o._parent||o.isolated))return u;if(n.call(o.data,u))return u;if(i(o,u)!==undefined)return u}}(b,v,x,T),C=function(t){var n=[""],r,i,s,o;r=t.length;while(r--){i=t[r],s=i.split(".");while(s.length>1)s.pop(),o=s.join("."),n[o]!==!0&&(n.push(o),n[o]=!0)}return n},k=function(){function n(e,t,n){var i;e._patternObservers.length&&o(e,t,t,n,!0);for(i=0;i<e._deps.length;i+=1)r(e,t,i,n)}function r(e,t,n,r){var o=e._deps[n];if(!o)return;i(o[t]);if(r)return;s(e._depsMap[t],e,n)}function i(e){var t,n;if(e){n=e.length;for(t=0;t<n;t+=1)e[t].update()}}function s(e,t,n,i){var s;if(e){s=e.length;while(s--)r(t,e[s],n,i)}}function o(t,n,r,i,s){var a,f,l,c,h,p,d,v;a=t._patternObservers.length;while(a--)f=t._patternObservers[a],f.regex.test(r)&&f.update(r);if(i)return;v=function(n){if(l=t._depsMap[n]){a=l.length;while(a--)c=l[a],h=e.exec(c)[0],p=r?r+"."+h:h,o(t,c,p)}},s?(d=u(r),d.forEach(v)):v(n)}function u(e){var t,n,r,i,s,o;t=e.split("."),n=a(t.length),s=[],r=function(e,n){return e?"*":t[n]},i=n.length;while(i--)o=n[i].map(r).join("."),s[o]||(s.push(o),s[o]=!0);return s}function a(e){var n="",r,i,s,o,u;if(!t[e]){s=[];while(n.length<e)n+=1;r=parseInt(n,2),o=function(e){return e==="1"};for(u=0;u<=r;u+=1){i=u.toString(2);while(i.length<e)i="0"+i;s[u]=Array.prototype.map.call(i,o)}t[e]=s}return t[e]}var e,t={};return e=/[^\.]+$/,n.multiple=function(t,n,i){var s,u,a;a=n.length;if(t._patternObservers.length){s=a;while(s--)o(t,n[s],n[s],i,!0)}for(s=0;s<t._deps.length;s+=1)if(t._deps[s]){u=a;while(u--)r(t,n[u],s,i)}},n}(),L=function(e){var t,n,r,i;return t=function(e,t){var s=[];return s.detachQueue=[],s.remove=r,s.init=i,s._check=n,s._callback=e,s._previous=t,t&&t.push(s),s},n=function(){var e;if(this._ready&&!this.length){while(e=this.detachQueue.pop())e.detach();typeof this._callback=="function"&&this._callback(),this._previous&&this._previous.remove(this)}},r=function(t){e(this,t),this._check()},i=function(){this._ready=!0,this._check()},t}(w),A=function(e,t,n,r,i,s,o,u){function M(){var e,n,r;v&&(v.focus(),v=null);while(e=w.pop())e.update().deferred=!1;while(e=m.pop())e._sort();while(e=g.pop())e.init();while(e=y.pop())e.init();while(e=b.pop())e.update();while(e=E.pop())e.active=!1;while(e=A.pop()){A[e._guid]=!1;if(e._changes.length){r={};while(n=e._changes.pop())r[n]=f(e,n);e.fire("change",r)}}p&&(t.update(),p=!1)}function _(){var e,t,n;n=A.length;while(n--)e=A[n],e._changes.length&&(t=s(e._changes),o.multiple(e,t,!0));D();while(c){c=!1;while(e=x.pop())e.update();while(e=S.pop())e.update().deferred=!1;while(e=T.pop())e.deferredUpdate();while(e=C.pop())l(e.root,e.keypath,r(e.root,e.keypath));while(e=k.pop())e.update()}}function D(){var e,t,n;if(!L.length)return;e=L.splice(0,L.length);while(t=e.pop()){if(t.keypath)continue;n=i(t.root,t.ref,t.parentFragment),n!==undefined?t.resolve(n):L.push(t)}}e.push(function(){f=e.get,l=e.set});var a,f,l,c=!1,h=!1,p,d=0,v=null,m=[],g=[],y=[],b=[],w=[],E=[],S=[],x=[],T=[],N={},C=[],k=[],L=[],A=[],O;return a={start:function(e,t){this.addInstance(e),h||(d+=1,O=u(t,O))},end:function(){if(h){D();return}--d||(h=!0,_(),h=!1,M()),O.init(),O=O._previous},trigger:function(){if(d||h){D();return}h=!0,_(),h=!1,M()},focus:function(e){v=e},addInstance:function(e){e&&!A[e._guid]&&(A.push(e),A[A._guid]=!0)},addLiveQuery:function(e){m.push(e)},addDecorator:function(e){g.push(e)},addTransition:function(e){e._manager=O,O.push(e),y.push(e)},addObserver:function(e){b.push(e)},addAttribute:function(e){w.push(e)},addBinding:function(e){e.active=!0,E.push(e)},scheduleCssUpdate:function(){!d&&!h?t.update():p=!0},addEvaluator:function(e){c=!0,S.push(e)},addComputation:function(e){c=!0,x.push(e)},addSelectValue:function(e){c=!0,T.push(e)},addCheckbox:function(e){N[e.keypath]||(c=!0,C.push(e))},addRadio:function(e){c=!0,k.push(e)},addUnresolved:function(e){c=!0,L.push(e)},removeUnresolved:function(e){n(L,e)},detachWhenReady:function(e){O.detachQueue.push(e)}},e.runloop=a,a}(b,E,w,S,N,C,k,L),O=function(e,t,n){var r=[],i={tick:function(){var s,o,u;u=t(),n.start();for(s=0;s<r.length;s+=1)o=r[s],o.tick(u)||r.splice(s--,1);n.end(),r.length?e(i.tick):i.running=!1},add:function(t){r.push(t),i.running||(i.running=!0,e(i.tick))},abort:function(e,t){var n=r.length,i;while(n--)i=r[n],i.root===t&&i.keypath===e&&i.stop()}};return i}(g,y,A),M=function(){var e=Object.prototype.toString;return function(t){return e.call(t)==="[object Array]"}}(),_=function(e){return function(t){var n,r;if(!t||typeof t!="object")return t;if(e(t))return t.slice();n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}}(M),D={},P=function(e,t,n){switch(t){case"splice":return n;case"sort":case"reverse":return null;case"pop":if(e.length)return[-1];return null;case"push":return[e.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}},H=function(e,t){var n,r,i,s;return t?(n=+(t[0]<0?e.length+t[0]:t[0]),r=Math.max(0,t.length-2),i=t[1]!==undefined?t[1]:e.length-n,i=Math.min(i,e.length-n),s=r-i,{start:n,balance:s,added:r,removed:i}):null},B={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40},j=function vi(e,t,n){var r,i;n||(i=e._wrapped[t])&&i.teardown()!==!1&&(e._wrapped[t]=null),e._cache[t]=undefined;if(r=e._cacheMap[t])while(r.length)vi(e,r.pop())},F=function(){var e=/^\s*[0-9]+\s*$/;return function(t){return e.test(t)?[]:{}}}(),I=function(e,t,n,r,i){function o(e,u,a,f){var l,c,h,p,d,v,m,g;if(t(e._cache[u],a))return;d=e._computations[u],v=e._wrapped[u],m=e._evaluators[u],d&&!d.setting&&d.set(a),v&&v.reset&&(g=v.reset(a)!==!1,g&&(a=v.get())),m&&(m.value=a),!d&&!m&&!g&&(l=u.split("."),c=l.pop(),h=l.join("."),v=e._wrapped[h],v&&v.set?v.set(c,a):(p=v?v.get():s(e,h),p||(p=n(c),o(e,h,p,!0)),p[c]=a)),r(e,u,g),f||(e._changes.push(u),i(e,u))}var s;return e.push(function(){s=e.get}),e.set=o,o}(b,p,F,j,k),q=function(e,t,n,r){return function(i,s,o,u){var a,f,l,c,h,p,d,v,m,g;a=i.root,f=i.keypath,a._changes.push(f);if(o==="sort"||o==="reverse"){r(a,f,s);return}if(!u)return;l=u.balance?s.length-Math.min(u.balance,0):u.added;for(h=u.start;h<l;h+=1)t(a,f+"."+h);c=function(t){t.keypath===f&&t.type===e.SECTION&&!t.inverted&&t.docFrag?t.splice(u):t.update()},a._deps.forEach(function(e){var t=e[f];t&&t.forEach(c)});if(u.added&&u.removed){p=Math.max(u.added,u.removed),d=u.start,v=d+p,g=u.added===u.removed;for(h=d;h<v;h+=1)m=f+"."+h,n(a,m)}g||(t(a,f+".length"),n(a,f+".length",!0))}}(B,j,k,I),R=function(e,t,n,r,i){var s=[],o=["pop","push","reverse","shift","sort","splice","unshift"],u,a,f;return o.forEach(function(o){var u=function(){var t,s,u,a,f;t=n(this,o,Array.prototype.slice.call(arguments)),s=r(this,t),u=Array.prototype[o].apply(this,arguments),this._ractive.setting=!0,f=this._ractive.wrappers.length;while(f--)a=this._ractive.wrappers[f],e.start(a.root),i(a,this,o,s),e.end();return this._ractive.setting=!1,u};t(s,o,{value:u})}),u={},u.__proto__?(a=function(e){e.__proto__=s},f=function(e){e.__proto__=Array.prototype}):(a=function(e){var n,r;n=o.length;while(n--)r=o[n],t(e,r,{value:s[r],configurable:!0})},f=function(e){var t;t=o.length;while(t--)delete e[o[t]]}),a.unpatch=f,a}(A,a,P,H,q),U=function(e,t,n){var r,i,s;return r={filter:function(e){return t(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new i(e,t,n)}},i=function(t,r,i){this.root=t,this.value=r,this.keypath=i,r._ractive||(e(r,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),n(r)),r._ractive.instances[t._guid]||(r._ractive.instances[t._guid]=0,r._ractive.instances.push(t)),r._ractive.instances[t._guid]+=1,r._ractive.wrappers.push(this)},i.prototype={get:function(){return this.value},teardown:function(){var e,t,r,i,o;e=this.value,t=e._ractive,r=t.wrappers,i=t.instances;if(t.setting)return!1;o=r.indexOf(this);if(o===-1)throw new Error(s);r.splice(o,1);if(!r.length)delete e._ractive,n.unpatch(this.value);else{i[this.root._guid]-=1;if(!i[this.root._guid]){o=i.indexOf(this.root);if(o===-1)throw new Error(s);i.splice(o,1)}}}},s="Something went wrong in a rather interesting way",r}(a,M,R),z=function(e,t,n,r,i){function a(t,n,s){function h(t){var s,o;t.value=n;if(t.updating)return;o=t.ractive,s=t.keypath,t.updating=!0,e.start(o),o._changes.push(s),r(o,s),i(o,s),e.end(),t.updating=!1}var o,u,a,f,l,c;o=t.obj,u=t.prop;if(s&&!s.configurable){if(u==="length")return;throw new Error('Cannot use magic mode with property "'+u+'" - object is not configurable')}s&&(a=s.get,f=s.set),l=a||function(){return n},c=function(e){f&&f(e),n=a?a():e,c._ractiveWrappers.forEach(h)},c._ractiveWrappers=[t],Object.defineProperty(o,u,{get:l,set:c,enumerable:!0,configurable:!0})}var s,o;try{Object.defineProperty({},"test",{value:0})}catch(u){return!1}return s={filter:function(e,t,r){var i,s,o,u,a;return t?(i=t.split("."),s=i.pop(),o=i.join("."),(u=r._wrapped[o])&&!u.magic?!1:(a=r.get(o),n(a)&&/^[0-9]+$/.test(s)?!1:a&&(typeof a=="object"||typeof a=="function"))):!1},wrap:function(e,t,n){return new o(e,t,n)}},o=function(e,t,n){var r,i,s,o;this.magic=!0,this.ractive=e,this.keypath=n,this.value=t,r=n.split("."),this.prop=r.pop(),i=r.join("."),this.obj=i?e.get(i):e.data,s=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop);if(s&&s.set&&(o=s.set._ractiveWrappers)){o.indexOf(this)===-1&&o.push(this);return}a(this,t,s)},o.prototype={get:function(){return this.value},reset:function(e){if(this.updating)return;this.updating=!0,this.obj[this.prop]=e,r(this.ractive,this.keypath),this.updating=!1},set:function(e,n){if(this.updating)return;this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=t(e),this.updating=!1),this.obj[this.prop][e]=n},teardown:function(){var e,t,n,r,i;if(this.updating)return!1;e=Object.getOwnPropertyDescriptor(this.obj,this.prop),t=e&&e.set;if(!t)return;r=t._ractiveWrappers,i=r.indexOf(this),i!==-1&&r.splice(i,1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n)}},s}(A,F,M,j,k),W=function(e,t){if(!e)return!1;var n,r;return n={filter:function(n,r,i){return e.filter(n,r,i)&&t.filter(n)},wrap:function(e,t,n){return new r(e,t,n)}},r=function(n,r,i){this.value=r,this.magic=!0,this.magicWrapper=e.wrap(n,r,i),this.arrayWrapper=t.wrap(n,r,i)},r.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(e){return this.magicWrapper.reset(e)}},n}(z,U),X=function(e,t,n,r){function s(e,t){var n={},r;if(!t)return e;t+=".";for(r in e)e.hasOwnProperty(r)&&(n[t+r]=e[r]);return n}function o(e){var t;return i[e]||(t=e?e+".":"",i[e]=function(n,r){var i;if(typeof n=="string")return i={},i[t+n]=r,i;if(typeof n=="object")return t?s(n,e):n}),i[e]}var i={};return function(s,u,a,f){var l,c,h,p;l=s.adapt.length;for(c=0;c<l;c+=1){h=s.adapt[c];if(typeof h=="string"){if(!e[h])throw new Error('Missing adaptor "'+h+'"');h=s.adapt[c]=e[h]}if(h.filter(a,u,s))return p=s._wrapped[u]=h.wrap(s,a,u,o(u)),p.value=a,a}return f||(s.magic?r.filter(a,u,s)?s._wrapped[u]=r.wrap(s,a,u):n.filter(a,u,s)&&(s._wrapped[u]=n.wrap(s,a,u)):s.modifyArrays&&t.filter(a,u,s)&&(s._wrapped[u]=t.wrap(s,a,u))),a}}(D,U,z,W),V=function(){function e(e,t){var n,r,i;n=t.split(".");while(n.length)n.pop(),r=n.join("."),i=e._depsMap[r]||(e._depsMap[r]=[]),i[t]===undefined&&(i[t]=0,i[i.length]=t),i[t]+=1,t=r}return function(n){var r,i,s,o,u;s=n.root,o=n.keypath,u=n.priority,r=s._deps[u]||(s._deps[u]={}),i=r[o]||(r[o]=[]),i.push(n),n.registered=!0;if(!o)return;e(s,o)}}(),$=function(){function e(e,t){var n,r,i;n=t.split(".");while(n.length)n.pop(),r=n.join("."),i=e._depsMap[r],i[t]-=1,i[t]||(i.splice(i.indexOf(t),1),i[t]=undefined),t=r}return function(n){var r,i,s,o,u;s=n.root,o=n.keypath,u=n.priority,r=s._deps[u][o],i=r.indexOf(n);if(i===-1||!n.registered)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");r.splice(i,1),n.registered=!1;if(!o)return;e(s,o)}}(),J=function(e,t,n,r,i,s){var o,u;e.push(function(){o=e.get,u=e.set});var a=function(e,t,n,r,s){this.root=e,this.keypath=t,this.priority=s,this.otherInstance=n,this.otherKeypath=r,i(this),this.value=o(this.root,this.keypath)};return a.prototype={update:function(){var e;if(this.updating||this.counterpart&&this.counterpart.updating)return;e=o(this.root,this.keypath);if(n(e)&&e._ractive&&e._ractive.setting)return;r(e,this.value)||(this.updating=!0,t.addInstance(this.otherInstance),u(this.otherInstance,this.otherKeypath,e),this.value=e,this.updating=!1)},reassign:function(e){s(this),s(this.counterpart),this.keypath=e,this.counterpart.otherKeypath=e,i(this),i(this.counterpart)},teardown:function(){s(this)}},function(t,n,r,i){var s,o,u,f,l,c;s=r+"="+i,u=t.bindings;if(u[s])return;u[s]=!0,o=t.instance,f=t.parentFragment.priority,l=new a(n,r,o,i,f),u.push(l),o.twoway&&(c=new a(o,i,n,r,1),u.push(c),l.counterpart=c,c.counterpart=l)}}(b,A,M,p,V,$),K=function(e,t,n){function i(e,r,i,s,o){n(r,s,o,!0),t(r.component,e,i,s)}var r;return e.push(function(){r=e.get}),function(t,n){var s,o,u,a,f;s=t._parent,o=t.component.parentFragment;if(o.indexRefs&&(f=o.indexRefs[n])!==undefined)return t.component.indexRefBindings[n]=n,f;do{if(!o.context)continue;u=o.context+"."+n,a=r(s,u);if(a!==undefined)return i(s,t,u,n,a),a}while(o=o.parent);a=r(s,n);if(a!==undefined)return i(s,t,n,n,a),a}}(b,J,I),Q={FAILED_LOOKUP:!0},G=function(e,t,n,r,i,s){function o(e,t,n){var o=e._cache,a,f,l,c;return o[t]===undefined?((f=e._computations[t])?a=f.value:(l=e._wrapped[t])?a=l.value:t?(c=e._evaluators[t])?a=c.value:a=u(e,t):(r(e,"",e.data),a=e.data),o[t]=a):a=o[t],a===s&&(e._parent&&!e.isolated?a=i(e,t,n):a=undefined),n&&n.evaluateWrapped&&(l=e._wrapped[t])&&(a=l.get()),a}function u(e,i){var u,a,f,l,c,h,p,d;u=i.split("."),a=u.pop(),f=u.join("."),l=o(e,f);if(p=e._wrapped[f])l=p.get();if(l===null||l===undefined)return;return(c=e._cacheMap[f])?c.indexOf(i)===-1&&c.push(i):e._cacheMap[f]=[i],typeof l!="object"||a in l?(d=!t.call(l,a),h=d?n(l[a]):l[a],h=r(e,i,h,!1),e._cache[i]=h,h):e._cache[i]=s}return e.get=o,o}(b,x,_,X,K,Q),Y=function(){return typeof console!="undefined"&&typeof console.warn=="function"&&typeof console.warn.apply=="function"?function(){console.warn.apply(console,arguments)}:function(){}}(),Z=function(){var e=Object.prototype.toString;return function(t){return typeof t=="object"&&e.call(t)==="[object Object]"}}(),et=function(e,t,n,r,i){var s,o,u;return e.push(function(){o=e.interpolate}),u=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/,s={number:function(e,t){var n;return!i(e)||!i(t)?null:(e=+e,t=+t,n=t-e,n?function(t){return e+t*n}:function(){return e})},array:function(e,t){var r,i,s,u;if(!n(e)||!n(t))return null;r=[],i=[],u=s=Math.min(e.length,t.length);while(u--)i[u]=o(e[u],t[u]);for(u=s;u<e.length;u+=1)r[u]=e[u];for(u=s;u<t.length;u+=1)r[u]=t[u];return function(e){var t=s;while(t--)r[t]=i[t](e);return r}},object:function(e,n){var i,s,u,a,f;if(!r(e)||!r(n))return null;i=[],a={},u={};for(f in e)t.call(e,f)&&(t.call(n,f)?(i.push(f),u[f]=o(e[f],n[f])):a[f]=e[f]);for(f in n)t.call(n,f)&&!t.call(e,f)&&(a[f]=n[f]);return s=i.length,function(e){var t=s,n;while(t--)n=i[t],a[n]=u[n](e);return a}},cssLength:function(e,t){var n,r,i,s,o,a,f,l;return e!==0&&typeof e!="string"||t!==0&&typeof t!="string"?null:(n=u.exec(e),r=u.exec(t),i=n?n[2]:"",s=r?r[2]:"",i&&s&&i!==s?null:(f=i||s,o=n?+n[1]:0,a=r?+r[1]:0,l=a-o,l?function(e){return o+e*l+f}:function(){return o+f}))}},s}(b,x,M,Z,l),tt=function(e,t,n){function i(e){return function(){return e}}var r=function(e,r,s,o){if(e===r)return i(r);if(o){if(s.interpolators[o])return s.interpolators[o](e,r)||i(r);t('Missing "'+o+'" interpolator. You may need to download a plugin from [TODO]')}return n.number(e,r)||n.array(e,r)||n.object(e,r)||n.cssLength(e,r)||i(r)};return e.interpolate=r,r}(b,Y,et),nt=function(e,t,n,r){var i=function(e){var t;this.startTime=Date.now();for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.interpolator=n(this.from,this.to,this.root,this.interpolator),this.running=!0};return i.prototype={tick:function(){var n,i,s,o,u,a;return a=this.keypath,this.running?(o=Date.now(),n=o-this.startTime,n>=this.duration?(a!==null&&(t.start(this.root),r(this.root,a,this.to),t.end()),this.step&&this.step(1,this.to),this.complete(this.to),u=this.root._animations.indexOf(this),u===-1&&e("Animation was not found"),this.root._animations.splice(u,1),this.running=!1,!1):(i=this.easing?this.easing(n/this.duration):n/this.duration,a!==null&&(s=this.interpolator(i),t.start(this.root),r(this.root,a,s),t.end()),this.step&&this.step(i,s),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),t===-1&&e("Animation was not found"),this.root._animations.splice(t,1)}},i}(Y,A,tt,I),rt=function(e,t,n,r,i,s){function a(t,o,a,f){var l,c,h,p;return o&&(o=n(o)),o!==null&&(p=i(t,o)),r.abort(o,t),e(p,a)?(f.complete&&f.complete(f.to),u):(f.easing&&(typeof f.easing=="function"?l=f.easing:l=t.easing[f.easing],typeof l!="function"&&(l=null)),c=f.duration===undefined?400:f.duration,h=new s({keypath:o,from:p,to:a,root:t,duration:c,easing:l,interpolator:f.interpolator,step:f.step,complete:f.complete}),r.add(h),t._animations.push(h),h)}var o=function(){},u={stop:o};return function(e,n,r){var i,s,u,f,l,c,h,p,d,v,m,g,y,b;i=new t(function(e){s=e});if(typeof e=="object"){r=n||{},c=r.easing,h=r.duration,l=[],p=r.step,d=r.complete;if(p||d)m={},r.step=null,r.complete=null,v=function(e){return function(t,n){m[e]=n}};for(u in e)if(e.hasOwnProperty(u)){if(p||d)g=v(u),r={easing:c,duration:h},p&&(r.step=g);r.complete=d?g:o,l.push(a(this,u,e[u],r))}if(p||d)b={easing:c,duration:h},p&&(b.step=function(e){p(e,m)}),d&&i.then(function(e){d(e,m)}),b.complete=s,y=a(this,null,null,b),l.push(y);return{stop:function(){var e;while(e=l.pop())e.stop();y&&y.stop()}}}return r=r||{},r.complete&&i.then(r.complete),r.complete=s,f=a(this,e,n,r),i.stop=function(){f.stop()},i}}(p,d,v,O,G,nt),it=function(){return this.fragment.detach()},st=function(e){return this.el?this.fragment.find(e):null},ot=function(e,t,n){var r,i,s,o,u,a,f;if(!e)return;r=n("div"),i=["matches","matchesSelector"],f=function(e){return function(t,n){return t[e](n)}},u=i.length;while(u--){s=i[u];if(r[s])return f(s);a=t.length;while(a--){o=t[u]+s.substr(0,1).toUpperCase()+s.substring(1);if(r[o])return f(o)}}return function(e,t){var n,r;n=(e.parentNode||e.document).querySelectorAll(t),r=n.length;while(r--)if(n[r]===e)return!0;return!1}}(u,m,o),ut=function(e){return function(t,n){var r=this._isComponentQuery?!this.selector||t.name===this.selector:e(t.node,this.selector);if(r)return this.push(t.node||t.instance),n||this._makeDirty(),!0}}(ot),at=function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],t=this.selector,n=e.indexOf(t),n!==-1&&(e.splice(n,1),e[t]=null)},ft=function(){function e(e){var t;if(t=e.parentFragment)return t.owner;if(e.component&&(t=e.component.parentFragment))return t.owner}function t(t){var n,r;n=[t],r=e(t);while(r)n.push(r),r=e(r);return n}return function(e,n){var r,i,s,o,u,a,f,l,c,h;r=t(e.component||e._ractive.proxy),i=t(n.component||n._ractive.proxy),s=r[r.length-1],o=i[i.length-1];while(s&&s===o)r.pop(),i.pop(),u=s,s=r[r.length-1],o=i[i.length-1];s=s.component||s,o=o.component||o,c=s.parentFragment,h=o.parentFragment;if(c===h)return a=c.items.indexOf(s),f=h.items.indexOf(o),a-f||r.length-i.length;if(l=u.fragments)return a=l.indexOf(c),f=l.indexOf(h),a-f||r.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),lt=function(e){return function(t,n){var r;return t.compareDocumentPosition?(r=t.compareDocumentPosition(n),r&2?1:-1):e(t,n)}}(ft),ct=function(e,t){return function(){this.sort(this._isComponentQuery?t:e),this._dirty=!1}}(lt,ft),ht=function(e){return function(){this._dirty||(e.addLiveQuery(this),this._dirty=!0)}}(A),pt=function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e);t!==-1&&this.splice(t,1)},dt=function(e,t,n,r,i,s){return function(o,u,a,f){var l=[];return e(l,{selector:{value:u},live:{value:a},_isComponentQuery:{value:f},_test:{value:t}}),a?(e(l,{cancel:{value:n},_root:{value:o},_sort:{value:r},_makeDirty:{value:i},_remove:{value:s},_dirty:{value:!1,writable:!0}}),l):l}}(f,ut,at,ct,ht,pt),vt=function(e){return function(t,n){var r,i;return this.el?(n=n||{},r=this._liveQueries,(i=r[t])?n&&n.live?i:i.slice():(i=e(this,t,!!n.live,!1),i.live&&(r.push(t),r[t]=i),this.fragment.findAll(t,i),i)):[]}}(dt),mt=function(e){return function(t,n){var r,i;return n=n||{},r=this._liveComponentQueries,(i=r[t])?n&&n.live?i:i.slice():(i=e(this,t,!!n.live,!0),i.live&&(r.push(t),r[t]=i),this.fragment.findAllComponents(t,i),i)}}(dt),gt=function(e){return this.fragment.findComponent(e)},yt=function(e){var t,n,r,i=this._subs[e];if(!i)return;t=Array.prototype.slice.call(arguments,1);for(n=0,r=i.length;n<r;n+=1)i[n].apply(this,t)},bt=function(e,t,n,r){var i,s={};e.push(function(){i=e.get});var o=function(e,t){this.root=e,this.ref=t,this.parentFragment=s,e._unresolvedImplicitDependencies[t]=!0,e._unresolvedImplicitDependencies.push(this),n.addUnresolved(this)};return o.prototype={resolve:function(){var e=this.root;r(e,this.ref),e._unresolvedImplicitDependencies[this.ref]=!1,t(e._unresolvedImplicitDependencies,this)},teardown:function(){n.removeUnresolved(this)}},o}(b,w,A,k),wt=function(e,t,n){var r={isTopLevel:!0};return function(s){var o;return s=e(s),o=t(this,s,r),this._captured&&this._captured[s]!==!0&&(this._captured.push(s),this._captured[s]=!0,o===undefined&&this._unresolvedImplicitDependencies[s]!==!0&&new n(this,s)),o}}(v,G,bt),Et=function(e){var t;if(typeof window=="undefined"||!document||!e)return null;if(e.nodeType)return e;if(typeof e=="string"){t=document.getElementById(e),!t&&document.querySelector&&(t=document.querySelector(e));if(t&&t.nodeType)return t}return e[0]&&e[0].nodeType?e[0]:null},St=function(e){return function(t,n){t=e(t),n=e(n)||null;if(!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),n),this.fragment.pNode=this.el=t}}(Et),xt=function(e,t){var n,r,i,s;return n={},r=0,i=e.map(function(e,i){var o,u,a;u=r,a=t.length;do{o=t.indexOf(e,u);if(o===-1)return s=!0,-1;u=o+1}while(n[o]&&u<a);return o===r&&(r+=1),o!==i&&(s=!0),n[o]=!0,o}),i.unchanged=!s,i},Tt=function(e,t){return function(n,r,i,s){var o;n._changes.push(r),o=function(t){t.type===e.REFERENCE?t.update():t.keypath===r&&t.type===e.SECTION&&!t.inverted&&t.docFrag?t.merge(i):t.update()},n._deps.forEach(function(e){var t=e[r];t&&t.forEach(o)}),s||t(n,r+".length",!0)}}(B,k),Nt=function(e,t,n,r,i,s,o){function a(e){return JSON.stringify(e)}function f(e){if(e===!0)return a;if(typeof e=="string")return u[e]||(u[e]=function(t){return t[e]}),u[e];if(typeof e=="function")return e;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}var u={};return function(a,l,c){var h,p,d,v,m,g,y,b;h=this.get(a);if(!n(h)||!n(l))return this.set(a,l,c&&c.complete);m=h.length===l.length;if(c&&c.compare){v=f(c.compare);try{p=h.map(v),d=l.map(v)}catch(w){if(this.debug)throw w;t("Merge operation: comparison failed. Falling back to identity checking"),p=h,d=l}}else p=h,d=l;return g=s(p,d),y=new r(function(e){b=e}),e.start(this,b),i(this,a,l,!0),o(this,a,g,m),e.end(),c&&c.complete&&y.then(c.complete),y}}(A,Y,M,d,I,xt,Tt),Ct=function(e,t,n){var r=function(e,t,n,r){var i=this;this.root=e,this.keypath=t,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.proxy={update:function(){i.reallyUpdate()}},this.priority=0,this.context=r&&r.context?r.context:e};return r.prototype={init:function(e){e!==!1?this.update():this.value=n(this.root,this.keypath)},update:function(){if(this.defer&&this.ready){e.addObserver(this.proxy);return}this.reallyUpdate()},reallyUpdate:function(){var e,r;e=this.value,r=n(this.root,this.keypath),this.value=r;if(this.updating)return;this.updating=!0;if(!t(r,e)||!this.ready)try{this.callback.call(this.context,r,e,this.keypath)}catch(i){if(this.debug||this.root.debug)throw i}this.updating=!1}},r}(A,p,G),kt=function(e){return function(t,n){var r,i,s,o,u,a,f;r=n.split("."),o=[],a=function(n){var r,i;r=t._wrapped[n]?t._wrapped[n].get():t.get(n);for(i in r)r.hasOwnProperty(i)&&(i!=="_ractive"||!e(r))&&u.push(n+"."+i)},f=function(e){return e+"."+i};while(i=r.shift())i==="*"?(u=[],o.forEach(a),o=u):o[0]?o=o.map(f):o[0]=i;return s={},o.forEach(function(e){s[e]=t.get(e)}),s}}(M),Lt=function(e,t,n,r){var i,s=/\*/;return i=function(e,t,n,r){this.root=e,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.keypath=t,this.regex=new RegExp("^"+t.replace(/\./g,"\\.").replace(/\*/g,"[^\\.]+")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=r&&r.context?r.context:e},i.prototype={init:function(e){var t,n;t=r(this.root,this.keypath);if(e!==!1)for(n in t)t.hasOwnProperty(n)&&this.update(n);else this.values=t},update:function(t){var n;if(s.test(t)){n=r(this.root,t);for(t in n)n.hasOwnProperty(t)&&this.update(t);return}if(this.defer&&this.ready){e.addObserver(this.getProxy(t));return}this.reallyUpdate(t)},reallyUpdate:function(e){var r=n(this.root,e);if(this.updating){this.values[e]=r;return}this.updating=!0;if(!t(r,this.values[e])||!this.ready){try{this.callback.call(this.context,r,this.values[e],e)}catch(i){if(this.debug||this.root.debug)throw i}this.values[e]=r}this.updating=!1},getProxy:function(e){var t=this;return this.proxies[e]||(this.proxies[e]={update:function(){t.reallyUpdate(e)}}),this.proxies[e]}},i}(A,p,G,kt),At=function(e,t,n,r,i){var s=/\*/,o={};return function(a,f,l,c){var h,p;return f=e(f),c=c||o,s.test(f)?(h=new i(a,f,l,c),a._patternObservers.push(h),p=!0):h=new r(a,f,l,c),t(h),h.init(c.init),h.ready=!0,{cancel:function(){var e;p&&(e=a._patternObservers.indexOf(h),e!==-1&&a._patternObservers.splice(e,1)),n(h)}}}}(v,V,$,Ct,Lt),Ot=function(e,t){return function(r,i,s){var o,u,a,f;if(e(r)){s=i,u=r,o=[];for(r in u)u.hasOwnProperty(r)&&(i=u[r],o.push(this.observe(r,i,s)));return{cancel:function(){while(o.length)o.pop().cancel()}}}if(typeof r=="function")return s=i,i=r,r="",t(this,r,i,s);a=r.split(" ");if(a.length===1)return t(this,r,i,s);o=[],f=a.length;while(f--)r=a[f],r&&o.push(t(this,r,i,s));return{cancel:function(){while(o.length)o.pop().cancel()}}}}(Z,At),Mt=function(e,t){var n,r;if(!t)if(!e)for(e in this._subs)delete this._subs[e];else this._subs[e]=[];n=this._subs[e],n&&(r=n.indexOf(t),r!==-1&&n.splice(r,1))},_t=function(e,t){var n=this,r,i;if(typeof e=="object"){r=[];for(i in e)e.hasOwnProperty(i)&&r.push(this.on(i,e[i]));return{cancel:function(){var e;while(e=r.pop())e.cancel()}}}return this._subs[e]?this._subs[e].push(t):this._subs[e]=[t],{cancel:function(){n.off(e,t)}}},Dt=function(){var e;try{Object.create(null),e=Object.create}catch(t){e=function(){var e=function(){};return function(t,n){var r;return t===null?{}:(e.prototype=t,r=new e,n&&Object.defineProperties(r,n),r)}}()}return e}(),Pt=function(e,t){return function(r,i){var s,o,u,a,f;r.owner=i.owner,u=r.parent=r.owner.parentFragment,r.root=i.root,r.pNode=i.pNode,r.pElement=i.pElement,r.context=i.context,r.owner.type===e.SECTION&&(r.index=i.index);if(u){a=u.indexRefs;if(a){r.indexRefs=t(null);for(f in a)r.indexRefs[f]=a[f]}}r.priority=u?u.priority+1:1,i.indexRef&&(r.indexRefs||(r.indexRefs={}),r.indexRefs[i.indexRef]=i.index),r.items=[],s=i.descriptor?i.descriptor.length:0;for(o=0;o<s;o+=1)r.items[r.items.length]=r.createItem({parentFragment:r,pElement:i.pElement,descriptor:i.descriptor[o],index:o})}}(B,Dt),Ht=function(t,n){return t.substr(0,n.length+1)===n+"."},Bt=function(e){return function(n,r){return n===r||e(n,r)}}(Ht),jt=function(e){return function(n,r,i){if(n===r)return i;if(e(n,r))return n.replace(r+".",i+".")}}(Ht),Ft=function(e,t){return function(r,i,s,o){if(!r[i]||e(r[i],o))return;r[i]=t(r[i],s,o)}}(Bt,jt),It=function(e){return function(n,r,i,s){if(this.html!==undefined)return;e(this,"context",i,s),this.indexRefs&&this.indexRefs[n]!==undefined&&this.indexRefs[n]!==r&&(this.indexRefs[n]=r),this.items.forEach(function(e){e.reassign(n,r,i,s)})}}(Ft),qt=function(e,t){return{init:e,reassign:t}}(Pt,It),Rt=function(e,t){function o(e){return n[e]||(n[e]=t(e))}var n={},r,i;try{t("table").innerHTML="foo"}catch(s){r=!0,i={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return function(t,n,s,u){var a,f=[],l;if(t){r&&(l=i[n])?(a=o("DIV"),a.innerHTML=l[0]+t+l[1],a=a.querySelector(".x")):s===e.svg?(a=o("DIV"),a.innerHTML='<svg class="x">'+t+"</svg>",a=a.querySelector(".x")):(a=o(n),a.innerHTML=t);while(a.firstChild)f.push(a.firstChild),u.appendChild(a.firstChild)}return f}}(s,o),Ut=function(){var e=this.node,t;if(e&&(t=e.parentNode))return t.removeChild(e),e},zt=function(e,t){var n,r,i;return r=/</g,i=/>/g,n=function(t,n){this.type=e.TEXT,this.descriptor=t.descriptor,n&&(this.node=document.createTextNode(t.descriptor),n.appendChild(this.node))},n.prototype={detach:t,reassign:function(){},teardown:function(e){e&&this.detach()},firstNode:function(){return this.node},toString:function(){return(""+this.descriptor).replace(r,"&lt;").replace(i,"&gt;")}},n}(B,Ut),Wt=function(e,t){return function(n){n.keypath?t(n):e.removeUnresolved(n)}}(A,$),Xt=function(e){var t=function(t,n,r,i){this.root=t,this.ref=n,this.parentFragment=r,this.resolve=i,e.addUnresolved(this)};return t.prototype={teardown:function(){e.removeUnresolved(this)}},t}(A),Vt=function(e,t,n,r,i){function u(e,t,r){var i,s,u;if(!o.test(e.toString()))return n(e,"_nowrap",{value:!0}),e;if(!e["_"+t._guid]){n(e,"_"+t._guid,{value:function(){var n,r,i,o;n=t._captured,n||(t._captured=[]),r=e.apply(t,arguments);if(t._captured.length){i=s.length;while(i--)o=s[i],o.updateSoftDependencies(t._captured)}return t._captured=n,r},writable:!0});for(i in e)e.hasOwnProperty(i)&&(e["_"+t._guid][i]=e[i]);e["_"+t._guid+"_evaluators"]=[]}return s=e["_"+t._guid+"_evaluators"],u=s.indexOf(r),u===-1&&s.push(r),e["_"+t._guid]}var s,o;return o=/this/,s=function(t,n,i,s,o){var a;this.evaluator=i,this.keypath=n,this.root=t,this.argNum=s,this.type=e.REFERENCE,this.priority=o,a=t.get(n),typeof a=="function"&&(a=u(a,t,i)),this.value=i.values[s]=a,r(this)},s.prototype={update:function(){var e=this.root.get(this.keypath);typeof e=="function"&&!e._nowrap&&(e=u(e,this.root,this.evaluator)),t(e,this.value)||(this.evaluator.values[this.argNum]=e,this.evaluator.bubble(),this.value=e)},teardown:function(){i(this)}},s}(B,p,a,V,$),$t=function(e,t,n){var r=function(e,n,r){this.root=e,this.keypath=n,this.priority=r.priority,this.evaluator=r,t(this)};return r.prototype={update:function(){var t=this.root.get(this.keypath);e(t,this.value)||(this.evaluator.bubble(),this.value=t)},teardown:function(){n(this)}},r}(p,V,$),Jt=function(e,t,n,r,i,s,o,u){function l(e,t){var n,r;e=e.replace(/\$\{([0-9]+)\}/g,"_$1");if(f[e])return f[e];r=[];while(t--)r[t]="_"+t;return n=new Function(r.join(","),"return("+e+")"),f[e]=n,n}var a,f={};return a=function(e,t,n,r,i,s){var u=this;u.root=e,u.uniqueString=n,u.keypath=t,u.priority=s,u.fn=l(r,i.length),u.values=[],u.refs=[],i.forEach(function(t,n){if(!t)return;t.indexRef?u.values[n]=t.value:u.refs.push(new o(e,t.keypath,u,n,s))}),u.selfUpdating=u.refs.length<=1},a.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(e.addEvaluator(this),this.deferred=!0)},update:function(){var e;if(this.evaluating)return this;this.evaluating=!0;try{e=this.fn.apply(null,this.values)}catch(o){this.root.debug&&t('Error evaluating "'+this.uniqueString+'": '+o.message||o),e=undefined}return n(e,this.value)||(this.value=e,r(this.root,this.keypath),s(this.root,this.keypath,e,!0),i(this.root,this.keypath)),this.evaluating=!1,this},teardown:function(){while(this.refs.length)this.refs.pop().teardown();r(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);var e=this.refs.length;while(e--)this.refs[e].update();this.deferred&&(this.update(),this.deferred=!1)},updateSoftDependencies:function(e){var t,n,r;this.softRefs||(this.softRefs=[]),t=this.softRefs.length;while(t--)r=this.softRefs[t],e[r.keypath]||(this.softRefs.splice(t,1),this.softRefs[r.keypath]=!1,r.teardown());t=e.length;while(t--)n=e[t],this.softRefs[n]||(r=new u(this.root,n,this),this.softRefs.push(r),this.softRefs[n]=!0);this.selfUpdating=this.refs.length+this.softRefs.length<=1}},a}(A,Y,p,j,k,X,Vt,$t),Kt=function(e,t,n,r,i){function o(e,t){return e.replace(/\$\{([0-9]+)\}/g,function(e,n){return t[n]?t[n].value||t[n].keypath:"undefined"})}function u(e){return"${"+e.replace(/[\.\[\]]/g,"-")+"}"}var s=function(r,i,s,o){var u=this,a,f,l;a=r.root,this.root=a,this.callback=o,this.owner=r,this.str=s.s,this.args=l=[],this.unresolved=[],this.pending=0,f=i.indexRefs;if(!s.r||!s.r.length){this.resolved=this.ready=!0,this.bubble();return}s.r.forEach(function(r,s){var o,c,h;if(f&&(o=f[r])!==undefined){l[s]={indexRef:r,value:o};return}if(c=t(a,r,i)){l[s]={keypath:c};return}l[s]=undefined,u.pending+=1,h=new n(a,r,i,function(t){u.resolve(s,t),e(u.unresolved,h)}),u.unresolved.push(h)}),this.ready=!0,this.bubble()};return s.prototype={bubble:function(){if(!this.ready)return;this.uniqueString=o(this.str,this.args),this.keypath=u(this.uniqueString),this.createEvaluator(),this.callback(this.keypath)},teardown:function(){var e;while(e=this.unresolved.pop())e.teardown()},resolve:function(e,t){this.args[e]={keypath:t},this.bubble(),this.resolved=!--this.pending},createEvaluator:function(){var e;this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():(e=new r(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority),this.root._evaluators[this.keypath]=e,e.update())},reassign:function(e,t,n,r){var s;this.args.forEach(function(o){var u;o.keypath&&(u=i(o.keypath,n,r))?(o.keypath=u,s=!0):o.indexRef===e&&(o.value=t,s=!0)}),s&&this.bubble()}},s}(w,N,Xt,Jt,jt),Qt=function(e,t,n,r,i,s,o){var u=function(i,s,u){var f=this,l,c,h,p,d;l=i.root,c=i.parentFragment,this.ref=s.r,this.root=i.root,this.mustache=i,this.callback=u,this.pending=0,this.unresolved=[],d=this.members=[],this.indexRefMembers=[],this.keypathObservers=[],this.expressionResolvers=[],s.m.forEach(function(s,u){var v,m,g,y,b,w;if(typeof s=="string"){f.members[u]=s;return}if(s.t===e.REFERENCE){v=s.n,m=c.indexRefs;if(m&&(g=m[v])!==undefined){d[u]=g,f.indexRefMembers.push({ref:v,index:u});return}p=!0,y=function(e){var t=new a(l,e,i.priority,f,u);f.keypathObservers.push(t)};if(h=n(l,v,c)){y(h);return}return d[u]=undefined,f.pending+=1,b=new r(l,v,c,function(e){f.resolve(u,e),t(f.unresolved,b)}),f.unresolved.push(b),null}p=!0,f.pending+=1,w=new o(f,c,s,function(e){f.resolve(u,e),t(f.unresolved,w)}),f.unresolved.push(w)});if(!p){h=this.getKeypath(),u(h);return}this.ready=!0,this.bubble()};u.prototype={getKeypath:function(){return this.ref+"."+this.members.join(".")},bubble:function(){if(!this.ready||this.pending)return;this.callback(this.getKeypath())},resolve:function(e,t){var n=new a(this.root,t,this.mustache.priority,this,e);n.update(),this.keypathObservers.push(n),this.resolved=!--this.pending,this.bubble()},teardown:function(){var e;while(e=this.unresolved.pop())e.teardown()},reassign:function(e,t){var n,r,i;r=this.indexRefMembers.length;while(r--)i=this.indexRefMembers[r],i.ref===e&&(n=!0,this.members[i.index]=t);n&&this.bubble()}};var a=function(e,t,n,r,s){this.root=e,this.keypath=t,this.priority=n,this.resolver=r,this.index=s,i(this),this.update()};return a.prototype={update:function(){var e=this.resolver;e.members[this.index]=this.root.get(this.keypath),e.bubble()},teardown:function(){s(this)}},u}(B,w,N,Xt,V,$,Kt),Gt=function(e,t,n,r){return function(s,o){var u,a,f,l,c,h,p;c=o.parentFragment,h=o.descriptor,s.root=c.root,s.parentFragment=c,s.descriptor=o.descriptor,s.index=o.index||0,s.priority=c.priority,s.type=o.descriptor.t,p=function(e){s.resolve(e)};if(u=h.r)f=c.indexRefs,f&&(l=f[u])!==undefined?(s.indexRef=u,s.value=l,s.render(s.value)):(a=t(s.root,u,s.parentFragment),a!==undefined?p(a):(s.ref=u,e.addUnresolved(s)));o.descriptor.x&&(s.resolver=new r(s,c,o.descriptor.x,p)),o.descriptor.kx&&(s.resolver=new n(s,o.descriptor.kx,p)),s.descriptor.n&&!s.hasOwnProperty("value")&&s.render(undefined)}}(A,N,Qt,Kt),Yt=function(e,t){var n={evaluateWrapped:!0};return function(){var i=t(this.root,this.keypath,n);e(i,this.value)||(this.render(i),this.value=i)}}(p,G),Zt=function(e,t,n){return function(i){var s;if(i===this.keypath)return;if(this.registered){n(this);if(this.type===e.SECTION){s=this.fragments.length;while(s--)this.fragments[s].reassign(null,null,this.keypath,i)}}this.keypath=i,t(this),this.update()}}(B,V,$),en=function(e){return function(n,r,i,s){var o,u;this.resolver?this.resolver.reassign(n,r,i,s):this.keypath?(o=e(this.keypath,i,s),o&&this.resolve(o)):n!==undefined&&this.indexRef===n&&(this.value=r,this.render(r));if(this.fragments){u=this.fragments.length;while(u--)this.fragments[u].reassign(n,r,i,s)}}}(jt),tn=function(e,t,n,r){return{init:e,update:t,resolve:n,reassign:r}}(Gt,Yt,Zt,en),nn=function(e,t,n,r){var i,s,o;return s=/</g,o=/>/g,i=function(t,r){this.type=e.INTERPOLATOR,r&&(this.node=document.createTextNode(""),r.appendChild(this.node)),n.init(this,t)},i.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,detach:r,teardown:function(e){e&&this.detach(),t(this)},render:function(e){this.node&&(this.node.data=e==undefined?"":e)},firstNode:function(){return this.node},toString:function(){var e=this.value!=undefined?""+this.value:"";return e.replace(s,"&lt;").replace(o,"&gt;")}},i}(B,Wt,tn,Ut),rn=function(t){var n=this,r,i,s,o,u,a,f,l;r=this.parentFragment,u=[],t.forEach(function(t,r){var s,o,a,f;if(t===r){u[t]=n.fragments[r];return}i===undefined&&(i=r);if(t===-1){n.fragments[r].teardown(!0);return}s=n.fragments[r],o=t-r,a=n.keypath+"."+r,f=n.keypath+"."+t,s.reassign(n.descriptor.i,t,a,f),u[t]=s}),i===undefined&&(i=this.length),this.length=o=this.root.get(this.keypath).length;if(o===i)return;a={descriptor:this.descriptor.f,root:this.root,pNode:r.pNode,owner:this},this.descriptor.i&&(a.indexRef=this.descriptor.i);for(s=i;s<o;s+=1)(f=u[s])?this.docFrag.appendChild(f.detach(!1)):(a.context=this.keypath+"."+s,a.index=s,f=this.createFragment(a)),this.fragments[s]=f;l=r.findNextNode(this),r.pNode.insertBefore(this.docFrag,l)},sn=function(e,t){function n(e,t,n){var r,i,s;i=t.length;if(i<e.length){s=e.fragments.splice(i,e.length-i);while(s.length)s.pop().teardown(!0)}else if(i>e.length)for(r=e.length;r<i;r+=1)n.context=e.keypath+"."+r,n.index=r,e.descriptor.i&&(n.indexRef=e.descriptor.i),e.fragments[r]=e.createFragment(n);e.length=i}function r(e,t,n){var r,i,s,o;s=e.hasKey||(e.hasKey={}),i=e.fragments.length;while(i--)o=e.fragments[i],o.index in t||(e.fragments[i].teardown(!0),e.fragments.splice(i,1),s[o.index]=!1);for(r in t)s[r]||(n.context=e.keypath+"."+r,n.index=r,e.descriptor.i&&(n.indexRef=e.descriptor.i),e.fragments.push(e.createFragment(n)),s[r]=!0);e.length=e.fragments.length}function i(e,t){e.length||(t.context=e.keypath,t.index=0,e.fragments[0]=e.createFragment(t),e.length=1)}function s(t,n,r,i){var s,o,u,a;o=e(n)&&n.length===0,r?s=o||!n:s=n&&!o;if(s){t.length||(i.index=0,t.fragments[0]=t.createFragment(i),t.length=1);if(t.length>1){u=t.fragments.splice(1);while(a=u.pop())a.teardown(!0)}}else t.length&&(t.teardownFragments(!0),t.length=0)}return function(u,a){var f={descriptor:u.descriptor.f,root:u.root,pNode:u.parentFragment.pNode,pElement:u.parentFragment.pElement,owner:u};if(u.descriptor.n){s(u,a,!0,f);return}e(a)?n(u,a,f):t(a)||typeof a=="function"?u.descriptor.i?r(u,a,f):i(u,f):s(u,a,!1,f)}}(M,Z),on=function(e,t){return function(r){var i,s;if(s=this.root._wrapped[this.keypath])r=s.get();if(this.rendering)return;this.rendering=!0,t(this,r),this.rendering=!1;if(this.docFrag&&!this.docFrag.childNodes.length)return;!this.initialising&&e&&(i=this.parentFragment.findNextNode(this),i&&i.parentNode===this.parentFragment.pNode?this.parentFragment.pNode.insertBefore(this.docFrag,i):this.parentFragment.pNode.appendChild(this.docFrag))}}(u,sn),un=function(e,t,n,r){var i,s,o,u,a;o=e.descriptor.i;for(i=t;i<n;i+=1)s=e.fragments[i],u=e.keypath+"."+(i-r),a=e.keypath+"."+i,s.index=i,s.reassign(o,i,u,a)},an=function(e){function t(e){e.teardown(!0)}function n(e,t,n){var r,i,s;e.rendering=!0,r={descriptor:e.descriptor.f,root:e.root,pNode:e.parentFragment.pNode,owner:e,indexRef:e.descriptor.i};for(i=t;i<n;i+=1)r.context=e.keypath+"."+i,r.index=i,e.fragments[i]=e.createFragment(r);s=e.fragments[n]?e.fragments[n].firstNode():e.parentFragment.findNextNode(e),e.parentFragment.pNode.insertBefore(e.docFrag,s),e.rendering=!1}return function(r){var i=this,s,o,u,a,f;s=r.balance;if(!s)return;o=r.start,i.length+=s;if(s<0){i.fragments.splice(o,-s).forEach(t),e(i,o,i.length,s);return}u=o+r.removed,a=o+r.added,f=[u,0],f.length+=s,i.fragments.splice.apply(i.fragments,f),e(i,a,i.length,s),n(i,u,a)}}(un),fn=function(e,t,n,r,i,s,o){var u,a;return o.push(function(){a=o.DomFragment}),u=function(n,r){this.type=e.SECTION,this.inverted=!!n.descriptor.n,this.fragments=[],this.length=0,r&&(this.docFrag=document.createDocumentFragment()),this.initialising=!0,t.init(this,n),r&&r.appendChild(this.docFrag),this.initialising=!1},u.prototype={update:t.update,resolve:t.resolve,reassign:t.reassign,splice:i,merge:n,detach:function(){var e,t;if(this.docFrag){t=this.fragments.length;for(e=0;e<t;e+=1)this.docFrag.appendChild(this.fragments[e].detach());return this.docFrag}},teardown:function(e){this.teardownFragments(e),s(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(e){return this.fragments[e.index+1]?this.fragments[e.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(e){var t;while(t=this.fragments.shift())t.teardown(e)},render:r,createFragment:function(e){var t=new a(e);return this.docFrag&&this.docFrag.appendChild(t.docFrag),t},toString:function(){var e,t,n;e="",t=0,n=this.length;for(t=0;t<n;t+=1)e+=this.fragments[t].toString();return e},find:function(e){var t,n,r;n=this.fragments.length;for(t=0;t<n;t+=1)if(r=this.fragments[t].find(e))return r;return null},findAll:function(e,t){var n,r;r=this.fragments.length;for(n=0;n<r;n+=1)this.fragments[n].findAll(e,t)},findComponent:function(e){var t,n,r;n=this.fragments.length;for(t=0;t<n;t+=1)if(r=this.fragments[t].findComponent(e))return r;return null},findAllComponents:function(e,t){var n,r;r=this.fragments.length;for(n=0;n<r;n+=1)this.fragments[n].findAllComponents(e,t)}},u}(B,tn,rn,on,an,Wt,b),ln=function(e,t,n,r,i){var s=function(t,r){this.type=e.TRIPLE,r&&(this.nodes=[],this.docFrag=document.createDocumentFragment()),this.initialising=!0,n.init(this,t),r&&r.appendChild(this.docFrag),this.initialising=!1};return s.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,detach:function(){var e,t;if(this.docFrag){e=this.nodes.length;for(t=0;t<e;t+=1)this.docFrag.appendChild(this.nodes[t]);return this.docFrag}},teardown:function(e){e&&(this.detach(),this.docFrag=this.nodes=null),i(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(e){var t,n;if(!this.nodes)return;while(this.nodes.length)t=this.nodes.pop(),t.parentNode.removeChild(t);if(!e){this.nodes=[];return}n=this.parentFragment.pNode,this.nodes=r(e,n.tagName,n.namespaceURI,this.docFrag),this.initialising||n.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),n.tagName==="SELECT"&&n._ractive&&n._ractive.binding&&n._ractive.binding.update()},toString:function(){return this.value!=undefined?this.value:""},find:function(e){var n,r,i,s;r=this.nodes.length;for(n=0;n<r;n+=1){i=this.nodes[n];if(i.nodeType!==1)continue;if(t(i,e))return i;if(s=i.querySelector(e))return s}return null},findAll:function(e,n){var r,i,s,o,u,a;i=this.nodes.length;for(r=0;r<i;r+=1){s=this.nodes[r];if(s.nodeType!==1)continue;t(s,e)&&n.push(s);if(o=s.querySelectorAll(e)){u=o.length;for(a=0;a<u;a+=1)n.push(o[a])}}}},s}(B,ot,tn,Rt,Wt),cn=function(e){return function(t,n){return t.a&&t.a.xmlns?t.a.xmlns:t.e==="svg"?e.svg:n.namespaceURI||e.html}}(s),hn=function(){var e,t,n,r;return e="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n=function(e){var t={},n=e.length;while(n--)t[e[n].toLowerCase()]=e[n];return t},r=n(e.concat(t)),function(e){var t=e.toLowerCase();return r[t]||t}}(),pn=function(e,t){return function(n,r){var i,s;i=r.indexOf(":");if(i!==-1){s=r.substr(0,i);if(s!=="xmlns"){r=r.substring(i+1),n.name=t(r),n.lcName=n.name.toLowerCase(),n.namespace=e[s.toLowerCase()];if(!n.namespace)throw'Unknown namespace ("'+s+'")';return}}n.name=n.element.namespace!==e.html?t(r):r,n.lcName=n.name.toLowerCase()}}(s,hn),dn=function(e){return function(n,r){var i,s=r.value===null?"":r.value;if(i=r.pNode)n.namespace?i.setAttributeNS(n.namespace,r.name,s):r.name==="style"&&i.style.setAttribute?i.style.setAttribute("cssText",s):r.name!=="class"||!!i.namespaceURI&&i.namespaceURI!==e.html?i.setAttribute(r.name,s):i.className=s,n.name==="id"&&(r.root.nodes[r.value]=i),n.name==="value"&&(i._ractive.value=r.value);n.value=r.value}}(s),vn=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n,r){var i;if(n.pNode&&!n.namespace&&(!r.pNode.namespaceURI||r.pNode.namespaceURI===e.html)){i=t[n.name]||n.name,r.pNode[i]!==undefined&&(n.propertyName=i);if(typeof r.pNode[i]=="boolean"||i==="value")n.useProperty=!0}}}(s),mn=function(e){return function(n){var r,i;r=n.fragment.items;if(r.length!==1)return;i=r[0];if(i.type!==e.INTERPOLATOR||!i.keypath&&!i.ref)return;return i}}(B),gn=function(e){return function(t,n){var r;if(!e(t)||!e(n))return!1;if(t.length!==n.length)return!1;r=t.length;while(r--)if(t[r]!==n[r])return!1;return!0}}(M),yn=function(e,t,n,r,i,s){var o='For two-way binding to work, attribute value must be a single interpolator (e.g. value="{{foo}}")',u="You cannot set up two-way binding against an expression ",a,f,l,c,h,p,d,v,m,g,y,b,w,E;return a=function(){var e=this.pNode,n,r,i;return n=this.interpolator,n?n.keypath&&n.keypath.substr==="${"?(t(u+n.keypath),!1):(n.keypath||n.resolve(n.descriptor.r),this.keypath=n.keypath,r=h(this),r?(e._ractive.binding=this.element.binding=r,this.twoway=!0,i=this.root._twowayBindings[this.keypath]||(this.root._twowayBindings[this.keypath]=[]),i.push(r),!0):!1):(t(o),!1)},f=function(){e.start(this._ractive.root),this._ractive.binding.update(),e.end()},l={evaluateWrapped:!0},c=function(){var e=i(this._ractive.root,this._ractive.binding.keypath,l);this.value=e==undefined?"":e},h=function(e){var t=e.pNode;if(t.tagName==="SELECT")return t.multiple?new d(e,t):new v(e,t);if(t.type==="checkbox"||t.type==="radio"){if(e.propertyName==="name"){if(t.type==="checkbox")return new g(e,t);if(t.type==="radio")return new m(e,t)}return e.propertyName==="checked"?new y(e,t):null}if(e.lcName!=="value")throw new Error("Attempted to set up an illegal two-way binding. This error is unexpected - if you can, please file an issue at https://github.com/RactiveJS/Ractive, or contact @RactiveJS on Twitter. Thanks!");return t.type==="file"?new b(e,t):t.getAttribute("contenteditable")?new w(e,t):new E(e,t)},d=function(e,t){var n;p(this,e,t),t.addEventListener("change",f,!1),n=i(this.root,this.keypath),n===undefined&&this.update()},d.prototype={value:function(){var e,t,n,r,i,s;e=[],t=this.node.options,r=t.length;for(n=0;n<r;n+=1)i=t[n],i.selected&&(s=i._ractive?i._ractive.value:i.value,e.push(s));return e},update:function(){var t,r,i;t=this.attr,r=t.value,i=this.value();if(r===undefined||!n(i,r))e.addBinding(t),t.value=i,s(this.root,this.keypath,i),e.trigger();return this},deferUpdate:function(){if(this.deferred===!0)return;e.addAttribute(this),this.deferred=!0},teardown:function(){this.node.removeEventListener("change",f,!1)}},v=function(e,t){var n;p(this,e,t),t.addEventListener("change",f,!1),n=i(this.root,this.keypath),n===undefined&&this.update()},v.prototype={value:function(){var e,t,n,r,i;e=this.node.options,n=e.length;for(t=0;t<n;t+=1){r=e[t];if(e[t].selected)return i=r._ractive?r._ractive.value:r.value,i}},update:function(){var t=this.value();return e.addBinding(this.attr),this.attr.value=t,s(this.root,this.keypath,t),e.trigger(),this},deferUpdate:function(){if(this.deferred===!0)return;e.addAttribute(this),this.deferred=!0},teardown:function(){this.node.removeEventListener("change",f,!1)}},m=function(t,n){var r;this.radioName=!0,p(this,t,n),n.name="{{"+t.keypath+"}}",n.addEventListener("change",f,!1),n.attachEvent&&n.addEventListener("click",f,!1),r=i(this.root,this.keypath),r!==undefined?n.checked=r==n._ractive.value:e.addRadio(this)},m.prototype={value:function(){return this.node._ractive?this.node._ractive.value:this.node.value},update:function(){var t=this.node;t.checked&&(e.addBinding(this.attr),s(this.root,this.keypath,this.value()),e.trigger())},teardown:function(){this.node.removeEventListener("change",f,!1),this.node.removeEventListener("click",f,!1)}},g=function(t,n){var r,s;this.checkboxName=!0,p(this,t,n),n.name="{{"+this.keypath+"}}",n.addEventListener("change",f,!1),n.attachEvent&&n.addEventListener("click",f,!1),r=i(this.root,this.keypath),r!==undefined?(s=r.indexOf(n._ractive.value)!==-1,n.checked=s):e.addCheckbox(this)},g.prototype={changed:function(){return this.node.checked!==!!this.checked},update:function(){this.checked=this.node.checked,e.addBinding(this.attr),s(this.root,this.keypath,r(this.root,this.keypath)),e.trigger()},teardown:function(){this.node.removeEventListener("change",f,!1),this.node.removeEventListener("click",f,!1)}},y=function(e,t){p(this,e,t),t.addEventListener("change",f,!1),t.attachEvent&&t.addEventListener("click",f,!1)},y.prototype={value:function(){return this.node.checked},update:function(){e.addBinding(this.attr),s(this.root,this.keypath,this.value()),e.trigger()},teardown:function(){this.node.removeEventListener("change",f,!1),this.node.removeEventListener("click",f,!1)}},b=function(e,t){p(this,e,t),t.addEventListener("change",f,!1)},b.prototype={value:function(){return this.attr.pNode.files},update:function(){s(this.attr.root,this.attr.keypath,this.value()),e.trigger()},teardown:function(){this.node.removeEventListener("change",f,!1)}},w=function(e,t){p(this,e,t),t.addEventListener("change",f,!1),this.root.lazy||(t.addEventListener("input",f,!1),t.attachEvent&&t.addEventListener("keyup",f,!1))},w.prototype={update:function(){e.addBinding(this.attr),s(this.root,this.keypath,this.node.innerHTML),e.trigger()},teardown:function(){this.node.removeEventListener("change",f,!1),this.node.removeEventListener("input",f,!1),this.node.removeEventListener("keyup",f,!1)}},E=function(e,t){p(this,e,t),t.addEventListener("change",f,!1),this.root.lazy||(t.addEventListener("input",f,!1),t.attachEvent&&t.addEventListener("keyup",f,!1)),this.node.addEventListener("blur",c,!1)},E.prototype={value:function(){var e=this.attr.pNode.value;return+e+""===e&&e.indexOf("e")===-1&&(e=+e),e},update:function(){var t=this.attr,n=this.value();e.addBinding(t),s(t.root,t.keypath,n),e.trigger()},teardown:function(){this.node.removeEventListener("change",f,!1),this.node.removeEventListener("input",f,!1),this.node.removeEventListener("keyup",f,!1),this.node.removeEventListener("blur",c,!1)}},p=function(e,t,n){e.attr=t,e.node=n,e.root=t.root,e.keypath=t.keypath},a}(A,Y,gn,S,G,I),bn=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d;return r=function(){var e;if(!this.ready)return this;e=this.pNode;if(e.tagName==="SELECT"&&this.lcName==="value")return this.update=s,this.deferredUpdate=o,this.update();if(this.isFileInputValue)return this.update=i,this;if(this.twoway&&this.lcName==="name"){if(e.type==="radio")return this.update=f,this.update();if(e.type==="checkbox")return this.update=l,this.update()}return this.lcName==="style"&&e.style.setAttribute?(this.update=c,this.update()):this.lcName!=="class"||!!e.namespaceURI&&e.namespaceURI!==t.html?e.getAttribute("contenteditable")&&this.lcName==="value"?(this.update=p,this.update()):(this.update=d,this.update()):(this.update=h,this.update())},i=function(){return this},o=function(){this.deferredUpdate=this.pNode.multiple?a:u,this.deferredUpdate()},s=function(){return e.addSelectValue(this),this},u=function(){var e=this.fragment.getValue(),t,n,r,i;this.value=this.pNode._ractive.value=e,t=this.pNode.options,i=t.length;while(i--){n=t[i],r=n._ractive?n._ractive.value:n.value;if(r==e)return n.selected=!0,this}return this},a=function(){var e=this.fragment.getValue(),t,r,i,s;n(e)||(e=[e]),t=this.pNode.options,r=t.length;while(r--)i=t[r],s=i._ractive?i._ractive.value:i.value,i.selected=e.indexOf(s)!==-1;return this.value=e,this},f=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),e.checked=t==e._ractive.value,this},l=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),n(t)?(e.checked=t.indexOf(e._ractive.value)!==-1,this):(e.checked=t==e._ractive.value,this)},c=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),t===undefined&&(t=""),t!==this.value&&(e.style.setAttribute("cssText",t),this.value=t),this},h=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),t===undefined&&(t=""),t!==this.value&&(e.className=t,this.value=t),this},p=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),t===undefined&&(t=""),t!==this.value&&(this.active||(e.innerHTML=t),this.value=t),this},d=function(){var e,t,n;e=this.pNode,t=this.fragment.getValue(),this.isValueAttribute&&(e._ractive.value=t),t==undefined&&(t="");if(t!==this.value){if(this.useProperty)return this.active||(e[this.propertyName]=t),e.tagName==="OPTION"&&e.selected&&(n=this.element.select.binding)&&n.update(),this.value=t,this;if(this.namespace)return e.setAttributeNS(this.namespace,this.name,t),this.value=t,this;this.lcName==="id"&&(this.value!==undefined&&(this.root.nodes[this.value]=undefined),this.root.nodes[t]=e),e.setAttribute(this.name,t),this.value=t}return this},r}(A,s,M),wn=function(e){var t;return t=this.str.substr(this.pos,e.length),t===e?(this.pos+=e.length,e):null},En=function(){var e=/^\s+/;return function(){var t=e.exec(this.remaining());return t?(this.pos+=t[0].length,t[0]):null}}(),Sn=function(e){return function(t){var n=e.exec(t.str.substring(t.pos));return n?(t.pos+=n[0].length,n[1]||n[0]):null}},xn=function(e){var t,n,r;return t=e(/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/),n=e(/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/),r=e(/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/),function(e){return function(i){var s,o,u,a;s=i.pos,o='"',u=!1;while(!u)a=t(i)||n(i)||i.getStringMatch(e),a?a==='"'?o+='\\"':a==="\\'"?o+="'":o+=a:(a=r(i),a?o+="\\u"+("000"+a.charCodeAt(1).toString(16)).slice(-4):u=!0);return o+='"',JSON.parse(o)}}}(Sn),Tn=function(e){return e('"')}(xn),Nn=function(e){return e("'")}(xn),Cn=function(e,t,n){return function(r){var i,s;return i=r.pos,r.getStringMatch('"')?(s=n(r),r.getStringMatch('"')?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):r.getStringMatch("'")?(s=t(r),r.getStringMatch("'")?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):null}}(B,Tn,Nn),kn=function(e,t){var n=t(/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/);return function(t){var r;return(r=n(t))?{t:e.NUMBER_LITERAL,v:r}:null}}(B,Sn),Ln=function(e){return e(/^[a-zA-Z_$][a-zA-Z_$0-9]*/)}(Sn),An=function(e,t,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var s;if(s=e(i))return r.test(s.v)?s.v:'"'+s.v.replace(/"/g,'\\"')+'"';if(s=t(i))return s.v;if(s=n(i))return s}}(Cn,kn,Ln),On=function(e,t,n,r){function l(e){var t,n,i;return e.allowWhitespace(),t=r(e),t?(i={key:t},e.allowWhitespace(),e.getStringMatch(":")?(e.allowWhitespace(),n=e.getToken(),n?(i.value=n.v,i):null):null):null}var i,s,o,u,a,f;return s={"true":!0,"false":!1,"undefined":undefined,"null":null},o=new RegExp("^(?:"+Object.keys(s).join("|")+")"),u=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,a=/\$\{([^\}]+)\}/g,f=/^\$\{([^\}]+)\}/,i=function(e,t){this.str=e,this.values=t,this.pos=0,this.result=this.getToken()},i.prototype={remaining:function(){return this.str.substring(this.pos)},getStringMatch:e,getToken:function(){return this.allowWhitespace(),this.getPlaceholder()||this.getSpecial()||this.getNumber()||this.getString()||this.getObject()||this.getArray()},getPlaceholder:function(){var e;if(!this.values)return null;if((e=f.exec(this.remaining()))&&this.values.hasOwnProperty(e[1]))return this.pos+=e[0].length,{v:this.values[e[1]]}},getSpecial:function(){var e;if(e=o.exec(this.remaining()))return this.pos+=e[0].length,{v:s[e[0]]}},getNumber:function(){var e;if(e=u.exec(this.remaining()))return this.pos+=e[0].length,{v:+e[0]}},getString:function(){var e=n(this),t;return e&&(t=this.values)?{v:e.v.replace(a,function(e,n){return t[n]||n})}:e},getObject:function(){var e,t;if(!this.getStringMatch("{"))return null;e={};while(t=l(this)){e[t.key]=t.value,this.allowWhitespace();if(this.getStringMatch("}"))return{v:e};if(!this.getStringMatch(","))return null}return null},getArray:function(){var e,t;if(!this.getStringMatch("["))return null;e=[];while(t=this.getToken()){e.push(t.v);if(this.getStringMatch("]"))return{v:e};if(!this.getStringMatch(","))return null}return null},allowWhitespace:t},function(e,t){var n=new i(e,t);return n.result?{value:n.result.v,remaining:n.remaining()}:null}}(wn,En,Cn,An),Mn=function(e,t,n){function i(e){return typeof e=="string"?e:JSON.stringify(e)}var r=function(t){this.type=e.INTERPOLATOR,n.init(this,t)};return r.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,render:function(e){this.value=e,this.parentFragment.bubble()},teardown:function(){t(this)},toString:function(){return this.value==undefined?"":i(this.value)}},r}(B,Wt,tn),_n=function(e,t,n,r,i){var s,o;return i.push(function(){o=i.StringFragment}),s=function(n){this.type=e.SECTION,this.fragments=[],this.length=0,t.init(this,n)},s.prototype={update:t.update,resolve:t.resolve,reassign:t.reassign,teardown:function(){this.teardownFragments(),r(this)},teardownFragments:function(){while(this.fragments.length)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(e){var t;if(t=this.root._wrapped[this.keypath])e=t.get();n(this,e),this.parentFragment.bubble()},createFragment:function(e){return new o(e)},toString:function(){return this.fragments.join("")}},s}(B,tn,sn,Wt,b),Dn=function(e){var t=function(t){this.type=e.TEXT,this.text=t};return t.prototype={toString:function(){return this.text},reassign:function(){},teardown:function(){}},t}(B),Pn=function(e,t){return function(){var n,r,i,s,o,u,a;if(!this.argsList||this.dirty){n={},r=0,s=this.root._guid,a=function(e){return e.map(function(e){var t,i,o;return e.text?e.text:e.fragments?e.fragments.map(function(e){return a(e.items)}).join(""):(t=s+"-"+r++,(i=e.root._wrapped[e.keypath])?o=i.value:o=e.value,n[t]=o,"${"+t+"}")}).join("")},i=a(this.items),u=t("["+i+"]",n);if(!u){o="Could not parse directive arguments ("+this.toString()+"). If you think this is a bug, please file an issue at http://github.com/RactiveJS/Ractive/issues";if(this.root.debug)throw new Error(o);e(o),this.argsList=[i]}else this.argsList=u.value;this.dirty=!1}return this.argsList}}(Y,On),Hn=function(e,t,n,r,i,s,o,u){var a=function(e){n.init(this,e)};return a.prototype={reassign:n.reassign,createItem:function(t){if(typeof t.descriptor=="string")return new s(t.descriptor);switch(t.descriptor.t){case e.INTERPOLATOR:return new r(t);case e.TRIPLE:return new r(t);case e.SECTION:return new i(t);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.dirty=!0,this.owner.bubble()},teardown:function(){var e,t;e=this.items.length;for(t=0;t<e;t+=1)this.items[t].teardown()},getValue:function(){var t;if(this.items.length===1&&this.items[0].type===e.INTERPOLATOR){t=this.items[0].value;if(t!==undefined)return t}return this.toString()},isSimple:function(){var t,n,r;if(this.simple!==undefined)return this.simple;t=this.items.length;while(t--){n=this.items[t];if(n.type===e.TEXT)continue;if(n.type===e.INTERPOLATOR){if(r)return!1;r=!0;continue}return this.simple=!1}return this.simple=!0},toString:function(){return this.items.join("")},toJSON:function(){var e=this.getValue(),n;return typeof e=="string"&&(n=t(e),e=n?n.value:e),e},toArgsList:o},u.StringFragment=a,a}(B,On,qt,Mn,_n,Dn,Pn,b),Bn=function(e,t,n,r,i,s,o,u,a){var f=function(e){this.type=t.ATTRIBUTE,this.element=e.element,n(this,e.name);if(e.value===null||typeof e.value=="string"){r(this,e);return}this.root=e.root,this.pNode=e.pNode,this.parentFragment=this.element.parentFragment,this.fragment=new a({descriptor:e.value,root:this.root,owner:this}),this.interpolator=s(this);if(!this.pNode)return;this.name==="value"&&(this.isValueAttribute=!0,this.pNode.tagName==="INPUT"&&this.pNode.type==="file"&&(this.isFileInputValue=!0)),i(this,e),this.selfUpdating=this.fragment.isSimple(),this.ready=!0};return f.prototype={bind:o,update:u,updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.ref,this.propertyName==="name"&&(this.pNode.name="{{"+this.keypath+"}}")},reassign:function(e,t,n,r){this.fragment&&(this.fragment.reassign(e,t,n,r),this.twoway&&this.updateBindings())},teardown:function(){var e;if(this.boundEvents){e=this.boundEvents.length;while(e--)this.pNode.removeEventListener(this.boundEvents[e],this.updateModel,!1)}this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(e.addAttribute(this),this.deferred=!0)},toString:function(){var e,t;if(this.value===null)return this.name;if(this.name==="value"&&this.element.lcName==="select")return;return this.name==="name"&&this.element.lcName==="input"&&(t=this.interpolator)?"name={{"+(t.keypath||t.ref)+"}}":this.fragment?(e=this.fragment.toString(),this.name+"="+JSON.stringify(e)):this.name+"="+JSON.stringify(this.value)}},f}(A,B,pn,dn,vn,mn,yn,bn,Hn),jn=function(e){return function(n,r,i){var s=new e({element:n,name:r,value:i,root:n.root,pNode:n.node});n.attributes.push(n.attributes[r]=s),r!=="name"&&s.update()}}(Bn),Fn=function(e){return function(t,n){var r;t.attributes=[];for(r in n)n.hasOwnProperty(r)&&e(t,r,n[r]);return t.attributes}}(jn),In=function(t){var n=[],r=t.length;while(r--)n[r]=t[r];return n},qn=function(e){return function(n,r){return n.matchingStaticNodes[r]||(n.matchingStaticNodes[r]=e(n.node.querySelectorAll(r))),n.matchingStaticNodes[r]}}(In),Rn=function(e,t,n,r,i){function a(e){var t,n,i,s,o,u,a;i=e.node,t=e.root;do{n=t._liveQueries,a=n.length;while(a--)s=n[a],o=n[s],u=r(e,s),o.push.apply(o,u)}while(t=t._parent)}var s,o,u;return i.push(function(){s=i.DomFragment}),o=function(){var e=this.node,t=this.fragment.toString();if(e.styleSheet)e.styleSheet.cssText=t;else{while(e.hasChildNodes())e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}},u=function(){(!this.node.type||this.node.type==="text/javascript")&&e("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString()},function(r,i,f,l){if(r.lcName==="script"||r.lcName==="style"){r.fragment=new n({descriptor:f.f,root:r.root,owner:r}),l&&(r.lcName==="script"?(r.bubble=u,r.node.text=r.fragment.toString()):(r.bubble=o,r.bubble()));return}typeof f.f=="string"&&(!i||!i.namespaceURI||i.namespaceURI===t.html)?(r.html=f.f,l&&(i.innerHTML=r.html,r.matchingStaticNodes={},a(r))):(r.fragment=new s({descriptor:f.f,root:r.root,pNode:i,owner:r,pElement:r}),l&&i.appendChild(r.fragment.docFrag))}}(Y,s,Hn,qn,b),Un=function(e,t){var n=function(n,r,i){var s=this,o,u,a;s.root=r,s.node=i.node,o=n.n||n,typeof o!="string"&&(u=new t({descriptor:o,root:r,owner:i}),o=u.toString(),u.teardown()),n.a?s.params=n.a:n.d&&(s.fragment=new t({descriptor:n.d,root:r,owner:i}),s.params=s.fragment.toArgsList(),s.fragment.bubble=function(){this.dirty=!0,s.params=this.toArgsList(),s.ready&&s.update()}),s.fn=r.decorators[o];if(!s.fn){a='Missing "'+o+'" decorator. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#decorators';if(r.debug)throw new Error(a);e(a)}};return n.prototype={init:function(){var e,t;this.params?(t=[this.node].concat(this.params),e=this.fn.apply(this.root,t)):e=this.fn.call(this.root,this.node);if(!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=e,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},teardown:function(e){this.actual.teardown(),!e&&this.fragment&&this.fragment.teardown()}},n}(Y,Hn),zn=function(e,t){return function(n,r,i){var s=new t(n,r,i);s.fn&&(i.decorator=s,e.addDecorator(i.decorator))}}(A,Un),Wn=function(e,t){var n,r,i,s,o,u,a,f,l;return n=function(e,t,n,i){var s,o;s=e.node._ractive.events,o=s[t]||(s[t]=new r(e,t,i)),o.add(n)},r=function(t,n){var r;this.element=t,this.root=t.root,this.node=t.node,this.name=n,this.proxies=[],(r=this.root.events[n])?this.custom=r(this.node,l(n)):("on"+n in this.node||e('Missing "'+this.name+'" event. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#events'),this.node.addEventListener(n,f,!1))},r.prototype={add:function(e){this.proxies.push(new i(this.element,this.root,e))},teardown:function(){var e;this.custom?this.custom.teardown():this.node.removeEventListener(this.name,f,!1),e=this.proxies.length;while(e--)this.proxies[e].teardown()},fire:function(e){var t=this.proxies.length;while(t--)this.proxies[t].fire(e)}},i=function(e,n,r){var i;this.root=n,i=r.n||r,typeof i=="string"?this.n=i:this.n=new t({descriptor:r.n,root:this.root,owner:e});if(r.a){this.a=r.a,this.fire=o;return}if(r.d){this.d=new t({descriptor:r.d,root:this.root,owner:e}),this.fire=u;return}this.fire=s},i.prototype={teardown:function(){this.n.teardown&&this.n.teardown(),this.d&&this.d.teardown()},bubble:function(){}},s=function(e){this.root.fire(this.n.toString(),e)},o=function(e){this.root.fire.apply(this.root,[this.n.toString(),e].concat(this.a))},u=function(e){var t=this.d.toArgsList();typeof t=="string"&&(t=t.substr(1,t.length-2)),this.root.fire.apply(this.root,[this.n.toString(),e].concat(t))},f=function(e){var t=this._ractive;t.events[e.type].fire({node:this,original:e,index:t.index,keypath:t.keypath,context:t.root.get(t.keypath)})},a={},l=function(e){return a[e]?a[e]:a[e]=function(t){var n=t.node._ractive;t.index=n.index,t.keypath=n.keypath,t.context=n.root.get(n.keypath),n.events[e].fire(t)}},n}(Y,Hn),Xn=function(e){return function(t,n){var r,i,s;for(i in n)if(n.hasOwnProperty(i)){s=i.split("-"),r=s.length;while(r--)e(t,s[r],n[i])}}}(Wn),Vn=function(e){var t,n,r,i,s;t=e.root;do{n=t._liveQueries,r=n.length;while(r--)i=n[r],s=n[i],s._test(e)&&(e.liveQueries||(e.liveQueries=[])).push(s)}while(t=t._parent)},$n=function(){if(this._inited)throw new Error("Cannot initialize a transition more than once");this._inited=!0,this._fn.apply(this.root,[this].concat(this.params))},Jn=function(e,t,n){var r,i;if(!e)return;return r={},i=n("div").style,function(e){var n,s,o;if(!r[e])if(i[e]!==undefined)r[e]=e;else{o=e.charAt(0).toUpperCase()+e.substring(1),n=t.length;while(n--){s=t[n];if(i[s+o]!==undefined){r[e]=s+o;break}}}return r[e]}}(u,m,o),Kn=function(e,t,n,r){var i;if(!t)return;return i=window.getComputedStyle||e.getComputedStyle,function(e){var t,i,s,o,u;t=window.getComputedStyle(this.node);if(typeof e=="string")return u=t[r(e)],u==="0px"&&(u=0),u;if(!n(e))throw new Error("Transition#getStyle must be passed a string, or an array of strings representing CSS properties");i={},s=e.length;while(s--)o=e[s],u=t[r(o)],u==="0px"&&(u=0),i[o]=u;return i}}(n,u,M,Jn),Qn=function(e){return function(t,n){var r;if(typeof t=="string")this.node.style[e(t)]=n;else for(r in t)t.hasOwnProperty(r)&&(this.node.style[e(r)]=t[r]);return this}}(Jn),Gn=function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})},Yn=function(e,t,n){function i(e){return e}var r=function(r){var s;this.duration=r.duration,this.step=r.step,this.complete=r.complete,typeof r.easing=="string"?(s=r.root.easing[r.easing],s||(e('Missing easing function ("'+r.easing+'"). You may need to download a plugin from [TODO]'),s=i)):typeof r.easing=="function"?s=r.easing:s=i,this.easing=s,this.start=t(),this.end=this.start+this.duration,this.running=!0,n.add(this)};return r.prototype={tick:function(e){var t,n;return this.running?e>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(t=e-this.start,n=this.easing(t/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},r}(Y,y,O),Zn=function(e){var t=new RegExp("^-(?:"+e.join("|")+")-");return function(e){return e.replace(t,"")}}(m),er=function(e){var t=new RegExp("^(?:"+e.join("|")+")([A-Z])");return function(e){var n;return e?(t.test(e)&&(e="-"+e),n=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),n):""}}(m),tr=function(e,t,n,r,i,s,o,u,a){var f,l,c,h,p,d,v,m={},g={};if(!e)return;return f=n("div").style,function(){f.transition!==undefined?(l="transition",c="transitionend",h=!0):f.webkitTransition!==undefined?(l="webkitTransition",c="webkitTransitionEnd",h=!0):h=!1}(),l&&(p=l+"Duration",d=l+"Property",v=l+"TimingFunction"),function(e,n,f,l,h,y){setTimeout(function(){var b,w,E,S;S=function(){w&&E&&y()},b=e.node.namespaceURI+e.node.tagName,e.node.style[d]=l.map(o).map(a).join(","),e.node.style[v]=a(f.easing||"linear"),e.node.style[p]=f.duration/1e3+"s",h=function(t){var n;n=l.indexOf(r(u(t.propertyName))),n!==-1&&l.splice(n,1);if(l.length)return;e.root.fire(e.name+":end"),e.node.removeEventListener(c,h,!1),E=!0,S()},e.node.addEventListener(c,h,!1),setTimeout(function(){var u=l.length,a,p,d,v=[],y;while(u--)y=l[u],a=b+y,m[a]?e.node.style[o(y)]=n[y]:p=e.getStyle(y),m[a]===undefined&&(e.node.style[o(y)]=n[y],m[a]=e.getStyle(y)!=n[y],g[a]=!m[a]),g[a]&&(d=l.indexOf(y),d===-1?t("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):l.splice(d,1),e.node.style[o(y)]=p,v.push({name:o(y),interpolator:i(p,n[y])}));v.length?new s({root:e.root,duration:f.duration,easing:r(f.easing),step:function(t){var n,r;r=v.length;while(r--)n=v[r],e.node.style[n.name]=n.interpolator(t)},complete:function(){w=!0,S()}}):w=!0,l.length||(e.node.removeEventListener(c,h,!1),E=!0,S())},0)},f.delay||0)}}(u,Y,o,Gn,tt,Yn,Jn,Zn,er),nr=function(e,t,n,r,i,s){var o;if(!t)return;return o=window.getComputedStyle||e.getComputedStyle,function(e,t,o,u){var a=this,f;typeof e=="string"?(f={},f[e]=t):(f=e,u=o,o=t),o||(n('The "'+a.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),o=a,u=a.complete);var l=new r(function(e){var t,n,r,u,l,c,h,p;if(!o.duration){a.setStyle(f),e();return}t=Object.keys(f),n=[],r=window.getComputedStyle(a.node),l={},h=t.length;while(h--)p=t[h],u=r[i(p)],u==="0px"&&(u=0),u!=f[p]&&(n.push(p),a.node.style[i(p)]=u);if(!n.length){e();return}s(a,f,o,n,c,e)});return u&&(n("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)"),l.then(u)),l}}(n,u,Y,d,Jn,tr),rr=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&!(n in e)&&(e[n]=t[n]);return e},ir=function(e){return function(t,n){return typeof t=="number"?t={duration:t}:typeof t=="string"?t==="slow"?t={duration:600}:t==="fast"?t={duration:200}:t={duration:400}:t||(t={}),e(t,n)}}(rr),sr=function(){this.originalStyle?this.node.setAttribute("style",this.originalStyle):(this.node.getAttribute("style"),this.node.removeAttribute("style"))},or=function(e,t,n,r,i,s,o,u){var a;return a=function(n,r,i,s){var o=this,u,a,f;this.root=r,this.node=i.node,this.isIntro=s,this.originalStyle=this.node.getAttribute("style"),o.complete=function(e){!e&&o.isIntro&&o.resetStyle(),o.node._ractive.transition=null,o._manager.remove(o)},u=n.n||n,typeof u!="string"&&(a=new t({descriptor:u,root:this.root,owner:i}),u=a.toString(),a.teardown()),this.name=u,n.a?this.params=n.a:n.d&&(a=new t({descriptor:n.d,root:this.root,owner:i}),this.params=a.toArgsList(),a.teardown()),this._fn=r.transitions[u];if(!this._fn){f='Missing "'+u+'" transition. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#transitions';if(r.debug)throw new Error(f);e(f);return}},a.prototype={init:n,getStyle:r,setStyle:i,animateStyle:s,processParams:o,resetStyle:u},a}(Y,Hn,$n,Kn,Qn,nr,ir,sr),ur=function(e,t){return function(n,r,i,s){var o,u,a;if(!r.transitionsEnabled||r._parent&&!r._parent.transitionsEnabled)return;o=new t(n,r,i,s),o._fn&&(u=o.node,(a=u._ractive.transition)&&a.complete(),u._ractive.transition=o,e.addTransition(o))}}(A,or),ar=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){function g(e){do if(e.lcName==="select")return e;while(e=e.parent)}return function(b,w,E){var S,x,T,N,C,k,L,A,O,M,_,D;b.type=t.ELEMENT,S=b.parentFragment=w.parentFragment,x=S.pNode,T=b.descriptor=w.descriptor,b.parent=w.pElement,b.root=M=S.root,b.index=w.index,b.lcName=T.e.toLowerCase(),b.eventListeners=[],b.customEventListeners=[],b.cssDetachQueue=[],x&&(N=b.namespace=a(T,x),C=N!==n.html?m(T.e):T.e,b.node=o(C,N),M.css&&x===M.el&&b.node.setAttribute("data-rvcguid",M.constructor._guid||M._guid),i(b.node,"_ractive",{value:{proxy:b,keypath:u(S),index:S.indexRefs,events:r(null),root:M}})),k=l(b,T.a);if(T.f){if(b.node&&b.node.getAttribute("contenteditable")&&b.node.innerHTML){D="A pre-populated contenteditable element should not have children";if(M.debug)throw new Error(D);s(D)}c(b,b.node,T,E)}E&&T.v&&p(b,T.v),E&&(M.twoway&&(b.bind(),b.node.getAttribute("contenteditable")&&b.node._ractive.binding&&b.node._ractive.binding.update()),k.name&&!k.name.twoway&&k.name.update(),b.node.tagName==="IMG"&&((L=b.attributes.width)||(A=b.attributes.height))&&b.node.addEventListener("load",O=function(){L&&(b.node.width=L.value),A&&(b.node.height=A.value),b.node.removeEventListener("load",O,!1)},!1),E.appendChild(b.node),T.o&&h(T.o,M,b),T.t1&&v(T.t1,M,b,!0),b.node.tagName==="OPTION"&&(x.tagName==="SELECT"&&(_=x._ractive.binding)&&_.deferUpdate(),k.value||f(b,"value",T.f),b.node._ractive.value==x._ractive.value&&(b.node.selected=!0)),b.node.autofocus&&e.focus(b.node)),b.lcName==="option"&&(b.select=g(b.parent)),d(b)}}(A,B,s,Dt,a,Y,o,T,cn,jn,Fn,Rn,zn,Xn,Vn,ur,hn),fr=function(e,t){function n(e){var t,n,r,i,s;i=e.liveQueries.length;while(i--){t=e.liveQueries[i],n=t.selector,t._remove(e.node);if(e.matchingStaticNodes&&(r=e.matchingStaticNodes[n])){s=r.length;while(s--)t.remove(r[s])}}}return function(i){var s,o,u;i&&(this.willDetach=!0,e.detachWhenReady(this)),this.fragment&&this.fragment.teardown(!1);while(this.attributes.length)this.attributes.pop().teardown();if(this.node){for(s in this.node._ractive.events)this.node._ractive.events[s].teardown();if(o=this.node._ractive.binding)o.teardown(),u=this.root._twowayBindings[o.attr.keypath],u.splice(u.indexOf(o),1)}this.decorator&&this.decorator.teardown(),this.descriptor.t2&&t(this.descriptor.t2,this.root,this,!1),this.liveQueries&&n(this)}}(A,ur),lr=function(e){return function(n,r,i,s){var o,u,a,f,l,c,h,p,d;o=this.attributes.length;while(o--)this.attributes[o].reassign(n,r,i,s);if(u=this.node._ractive){e(u,"keypath",i,s),n!=undefined&&(u.index[n]=r);for(a in u.events){f=u.events[a].proxies,o=f.length;while(o--)l=f[o],typeof l.n=="object"&&l.a.reassign(n,r,i,s),l.d&&l.d.reassign(n,r,i,s)}(c=u.binding)&&c.keypath.substr(0,i.length)===i&&(h=u.root._twowayBindings[c.keypath],h.splice(h.indexOf(c),1),c.keypath=c.keypath.replace(i,s),h=u.root._twowayBindings[c.keypath]||(u.root._twowayBindings[c.keypath]=[]),h.push(c))}this.fragment&&this.fragment.reassign(n,r,i,s);if(p=this.liveQueries){d=this.root,o=p.length;while(o--)p[o]._makeDirty()}}}(Ft),cr="area base br col command doctype embed hr img input keygen link meta param source track wbr".split(" "),hr=function(e,t){function n(e){var n,r,i,s,o;n=e.attributes.value.value,r=e.select.attributes.value,i=r.interpolator;if(!i)return;s=e.root.get(i.keypath||i.ref);if(s==n)return!0;if(e.select.attributes.multiple&&t(s)){o=s.length;while(o--)if(s[o]==n)return!0}}function r(e){var t,n,r,i;t=e.attributes,n=t.type,r=t.value,i=t.name;if(!n||n.value!=="radio"||!r||!i.interpolator)return;if(r.value===i.interpolator.value)return!0}return function(){var t,i,s,o;t="<"+(this.descriptor.y?"!doctype":this.descriptor.e),s=this.attributes.length;for(i=0;i<s;i+=1)if(o=this.attributes[i].toString())t+=" "+o;return this.lcName==="option"&&n(this)&&(t+=" selected"),this.lcName==="input"&&r(this)&&(t+=" checked"),t+=">",this.html?t+=this.html:this.fragment&&(t+=this.fragment.toString()),e.indexOf(this.descriptor.e)===-1&&(t+="</"+this.descriptor.e+">"),this.stringifying=!1,t}}(cr,M),pr=function(e){return function(t){var n;if(e(this.node,t))return this.node;if(this.html&&(n=this.node.querySelector(t)))return n;if(this.fragment&&this.fragment.find)return this.fragment.find(t)}}(ot),dr=function(e){return function(t,n){var r,i;n._test(this,!0)&&n.live&&(this.liveQueries||(this.liveQueries=[])).push(n),this.html&&(r=e(this,t),n.push.apply(n,r),n.live&&!i&&(this.liveQueries||(this.liveQueries=[])).push(n)),this.fragment&&this.fragment.findAll(t,n)}}(qn),vr=function(e){if(this.fragment)return this.fragment.findComponent(e)},mr=function(e,t){this.fragment&&this.fragment.findAllComponents(e,t)},gr=function(){var e=this.attributes;if(!this.node)return;this.binding&&(this.binding.teardown(),this.binding=null);if(this.node.getAttribute("contenteditable")&&e.value&&e.value.bind())return;switch(this.descriptor.e){case"select":case"textarea":e.value&&e.value.bind();return;case"input":if(this.node.type==="radio"||this.node.type==="checkbox"){if(e.name&&e.name.bind())return;if(e.checked&&e.checked.bind())return}if(e.value&&e.value.bind())return}},yr=function(e,t,n,r,i,s,o,u,a,f,l){var c=function(e,t){n(this,e,t)};return c.prototype={detach:function(){var n;if(this.node)return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node;if(this.cssDetachQueue.length){e.start();while(n===this.cssDetachQueue.pop())t.remove(n);e.end()}},teardown:r,reassign:i,firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){},toString:s,find:o,findAll:u,findComponent:a,findAllComponents:f,bind:l},c}(A,E,ar,fr,lr,hr,pr,dr,vr,mr,gr),br={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser"},wr={},Er=undefined,Sr=function(){function n(e,n){var r=t.exec(n)[0];return e===null||r.length<e.length?r:e}var e=/^\s*$/,t=/^\s*/;return function(t){var r,i,s,o;return r=t.split("\n"),i=r[0],i!==undefined&&e.test(i)&&r.shift(),s=r[r.length-1],s!==undefined&&e.test(s)&&r.pop(),o=r.reduce(n,null),o&&(t=r.map(function(e){return e.replace(o,"")}).join("\n")),t}}(),xr=function(e,t,n,r,i,s,o){var u,a,f,l;return u=function(r,u){var c,h,p;if(h=f(r,u))return h;if(t){c=document.getElementById(u);if(c&&c.tagName==="SCRIPT"){if(!s)throw new Error(e.missingParser);a(s(o(c.text),r.parseOptions),u,i)}}h=i[u];if(!h){p='Could not find descriptor for partial "'+u+'"';if(r.debug)throw new Error(p);return n(p),[]}return l(h)},f=function(t,n){var r;if(t.partials[n]){if(typeof t.partials[n]=="string"){if(!s)throw new Error(e.missingParser);r=s(t.partials[n],t.parseOptions),a(r,n,t.partials)}return l(t.partials[n])}},a=function(e,t,n){var i;if(r(e)){n[t]=e.main;for(i in e.partials)e.partials.hasOwnProperty(i)&&(n[i]=e.partials[i])}else n[t]=e},l=function(e){return e.length===1&&typeof e[0]=="string"?e[0]:e},u}(br,u,Y,Z,wr,Er,Sr),Tr=function(e,t){var n;return t?(n=e.split("\n").map(function(e,n){return n?t+e:e}).join("\n"),n):e},Nr=function(e,t,n,r){var i,s;return r.push(function(){s=r.DomFragment}),i=function(n,r){var i=this.parentFragment=n.parentFragment,o;this.type=e.PARTIAL,this.name=n.descriptor.r,this.index=n.index;if(!n.descriptor.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");o=t(i.root,n.descriptor.r),this.fragment=new s({descriptor:o,root:i.root,pNode:i.pNode,owner:this}),r&&r.appendChild(this.fragment.docFrag)},i.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},reassign:function(e,t,n,r){return this.fragment.reassign(e,t,n,r)},teardown:function(e){this.fragment.teardown(e)},toString:function(){var t,r,i,s;return t=this.fragment.toString(),r=this.parentFragment.items[this.index-1],!r||r.type!==e.TEXT?t:(i=r.descriptor.split("\n").pop(),(s=/^\s+$/.exec(i))?n(t,s[0]):t)},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)}},i}(B,xr,Tr,b),Cr=function(e,t){var n=function(e,n,r){this.parentFragment=e.parentFragment,this.component=e,this.key=n,this.fragment=new t({descriptor:r,root:e.root,owner:this}),this.selfUpdating=this.fragment.isSimple(),this.value=this.fragment.getValue()};return n.prototype={bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(e.addAttribute(this),this.deferred=!0)},update:function(){var e=this.fragment.getValue();this.component.instance.set(this.key,e),this.value=e},teardown:function(){this.fragment.teardown()}},n}(A,Hn),kr=function(e,t,n,r,i){function s(s,o,u,a){var f,l,c,h,p,d;return c=s.root,h=s.parentFragment,typeof u=="string"?(l=t(u),l?l.value:u):u===null?!0:u.length===1&&u[0].t===e.INTERPOLATOR&&u[0].r?h.indexRefs&&h.indexRefs[d=u[0].r]!==undefined?(s.indexRefBindings[d]=o,h.indexRefs[d]):(p=n(c,u[0].r,h)||u[0].r,a.push({childKeypath:o,parentKeypath:p}),r(c,p)):(f=new i(s,o,u),s.complexParameters.push(f),f.value)}return function(e,t,n,r){var i,o,u;i={},e.complexParameters=[];for(o in n)if(n.hasOwnProperty(o)){u=s(e,o,n[o],r);if(u!==undefined||t[o]===undefined)i[o]=u}return i}}(B,On,N,G,Cr),Lr=function(){function e(e,t){var n,r,i;e.adapt.length?n=e.adapt.map(function(t){return typeof t=="object"?t:e.adaptors[t]||t}):n=[];if(r=t.length)for(i=0;i<r;i+=1)n.indexOf(t[i])===-1&&n.push(t[i]);return n}return function(t,n,r,i,s){var o,u,a,f,l;return u=t.parentFragment,f=t.root,a={content:s||[]},l=e(f,n.defaults.adapt,n.adaptors),o=new n({el:u.pNode,append:!0,data:r,partials:a,magic:f.magic||n.defaults.magic,modifyArrays:f.modifyArrays,_parent:f,_component:t,adapt:l}),i&&(o.insert(i),o.fragment.pNode=o.el=u.pNode),o}}(),Ar=function(e,t,n){return function(i,s){s.forEach(function(s){var o,u;e(i,i.root,s.parentKeypath,s.childKeypath),o=t(i.instance,s.childKeypath),u=t(i.root,s.parentKeypath),o!==undefined&&u===undefined&&n(i.root,s.parentKeypath,o)})}}(J,G,I),Or=function(e){function n(n,r,i,s){if(typeof s!="string"){if(r.debug)throw new Error(t);e(t);return}n.on(i,function(){var e=Array.prototype.slice.call(arguments);e.unshift(s),r.fire.apply(r,e)})}var t="Components currently only support simple events - you cannot include arguments. Sorry!";return function(e,t){var r;for(r in t)t.hasOwnProperty(r)&&n(e.instance,e.root,r,t[r])}}(Y),Mr=function(e){var t,n;t=e.root;while(t)(n=t._liveComponentQueries[e.name])&&n.push(e.instance),t=t._parent},_r=function(e,t,n,r,i,s,o){return function(a,f,l){var c,h,p,d,v;c=a.parentFragment=f.parentFragment,h=c.root,a.root=h,a.type=e.COMPONENT,a.name=f.descriptor.e,a.index=f.index,a.indexRefBindings={},a.bindings=[],p=h.components[f.descriptor.e];if(!p)throw new Error('Component "'+f.descriptor.e+'" not found');v=[],d=n(a,p.data||{},f.descriptor.a,v),r(a,p,d,l,f.descriptor.f),i(a,v),s(a,f.descriptor.v),(f.descriptor.t1||f.descriptor.t2||f.descriptor.o)&&t('The "intro", "outro" and "decorator" directives have no effect on components'),o(a)}}(B,Y,kr,Lr,Ar,Or,Mr),Dr=function(e,t){function r(e){var t,n;t=e.root;do(n=t._liveComponentQueries[e.name])&&n._remove(e);while(t=t._parent)}var n=function(t,n){e(this,t,n)};return n.prototype={firstNode:function(){return this.instance.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.instance.fragment.detach()},teardown:function(e){while(this.complexParameters.length)this.complexParameters.pop().teardown();while(this.bindings.length)this.bindings.pop().teardown();r(this),this.shouldDestroy=e,this.instance.teardown()},reassign:function(e,n,r,i){var s=this.instance,o=s._parent,u,a;this.bindings.forEach(function(u){var a;if(u.root!==o)return;u.keypath===e&&s.set(u.otherKeypath,n),(a=t(u.keypath,r,i))&&u.reassign(a)}),(u=this.indexRefBindings[e])&&s.set(u,n),(a=this.root._liveComponentQueries[this.name])&&a._makeDirty()},toString:function(){return this.instance.fragment.toString()},find:function(e){return this.instance.fragment.find(e)},findAll:function(e,t){return this.instance.fragment.findAll(e,t)},findComponent:function(e){return!e||e===this.name?this.instance:this.instance.fragment?this.instance.fragment.findComponent(e):null},findAllComponents:function(e,t){t._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(e,t)}},n}(_r,jt),Pr=function(e,t){var n=function(t,n){this.type=e.COMMENT,this.descriptor=t.descriptor,n&&(this.node=document.createComment(t.descriptor.f),n.appendChild(this.node))};return n.prototype={detach:t,teardown:function(e){e&&this.detach()},firstNode:function(){return this.node},toString:function(){return"<!--"+this.descriptor.f+"-->"}},n}(B,Ut),Hr=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e){e.pNode&&(this.docFrag=document.createDocumentFragment()),typeof e.descriptor=="string"?(this.html=e.descriptor,this.docFrag&&(this.nodes=r(this.html,e.pNode.tagName,e.pNode.namespaceURI,this.docFrag))):n.init(this,e)};return p.prototype={reassign:n.reassign,detach:function(){var e,t;if(this.docFrag){if(this.nodes){e=this.nodes.length;for(t=0;t<e;t+=1)this.docFrag.appendChild(this.nodes[t])}else if(this.items){e=this.items.length;for(t=0;t<e;t+=1)this.docFrag.appendChild(this.items[t].detach())}return this.docFrag}},createItem:function(t){if(typeof t.descriptor=="string")return new i(t,this.docFrag);switch(t.descriptor.t){case e.INTERPOLATOR:return new s(t,this.docFrag);case e.SECTION:return new o(t,this.docFrag);case e.TRIPLE:return new u(t,this.docFrag);case e.ELEMENT:if(this.root.components[t.descriptor.e])return new l(t,this.docFrag);return new a(t,this.docFrag);case e.PARTIAL:return new f(t,this.docFrag);case e.COMMENT:return new c(t,this.docFrag);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/RactiveJS/Ractive/issues. Thanks!")}},teardown:function(e){var t;if(this.nodes&&e)while(t=this.nodes.pop())t.parentNode.removeChild(t);else if(this.items)while(this.items.length)this.items.pop().teardown(e);this.nodes=this.items=this.docFrag=null},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(e){var t=e.index;return this.items[t+1]?this.items[t+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},toString:function(){var e,t,n,r;if(this.html)return this.html;e="";if(!this.items)return e;n=this.items.length;for(t=0;t<n;t+=1)r=this.items[t],e+=r.toString();return e},find:function(e){var n,r,i,s,o;if(this.nodes){r=this.nodes.length;for(n=0;n<r;n+=1){s=this.nodes[n];if(s.nodeType!==1)continue;if(t(s,e))return s;if(o=s.querySelector(e))return o}return null}if(this.items){r=this.items.length;for(n=0;n<r;n+=1){i=this.items[n];if(i.find&&(o=i.find(e)))return o}return null}},findAll:function(e,n){var r,i,s,o,u,a,f;if(this.nodes){i=this.nodes.length;for(r=0;r<i;r+=1){o=this.nodes[r];if(o.nodeType!==1)continue;t(o,e)&&n.push(o);if(u=o.querySelectorAll(e)){a=u.length;for(f=0;f<a;f+=1)n.push(u[f])}}}else if(this.items){i=this.items.length;for(r=0;r<i;r+=1)s=this.items[r],s.findAll&&s.findAll(e,n)}return n},findComponent:function(e){var t,n,r,i;if(this.items){t=this.items.length;for(n=0;n<t;n+=1){r=this.items[n];if(r.findComponent&&(i=r.findComponent(e)))return i}return null}},findAllComponents:function(e,t){var n,r,i;if(this.items){r=this.items.length;for(n=0;n<r;n+=1)i=this.items[n],i.findAllComponents&&i.findAllComponents(e,t)}return t}},h.DomFragment=p,p}(B,ot,qt,Rt,zt,nn,fn,ln,yr,Nr,Dr,Pr,b),Br=function(e,t,n){function r(e){var t;while(t=e._childInitQueue.pop())t.instance.init&&t.instance.init(t.options),r(t.instance)}return function(s,o){this._rendering=!0,e.start(this,o);if(!this._initing)throw new Error("You cannot call ractive.render() directly!");this.constructor.css&&t.add(this.constructor),this.fragment=new n({descriptor:this.template,root:this,owner:this,pNode:s}),s&&s.appendChild(this.fragment.docFrag),(!this._parent||!this._parent._rendering)&&r(this),delete this._rendering,e.end()}}(A,E,Hr),jr=function(e){return function(){return e("renderHTML() has been deprecated and will be removed in a future version. Please use toHTML() instead"),this.toHTML()}}(Y),Fr=function(e,t,n,r){return function(i,s){var o,u,a;typeof i=="function"?(s=i,i={}):i=i||{};if(typeof i!="object")throw new Error("The reset method takes either no arguments, or an object containing new data");return o=new e(function(e){u=e}),s&&o.then(s),t.start(this,u),(a=this._wrapped[""])&&a.reset?a.reset(i)===!1&&(this.data=i):this.data=i,n(this,""),r(this,""),t.end(),this.fire("reset",i),o}}(d,A,j,k),Ir=function(e,t,n,r,i){return function(o,u,a){var f,l,c;l=new r(function(e){c=e}),e.start(this,c);if(t(o)){f=o,a=u;for(o in f)f.hasOwnProperty(o)&&(u=f[o],o=n(o),i(this,o,u))}else o=n(o),i(this,o,u);return e.end(),a&&l.then(a.bind(this)),l}}(A,Z,v,d,I),qr=function(e){return function(t,n){return e(this,t,n===undefined?-1:-n)}}(c),Rr=function(e,t,n,r,i){return function(s){var o,u,a,f,l,c,h,p;this.fire("teardown"),f=!this.component||this.component.shouldDestroy;if(this.constructor.css)if(f)l=s,s=function(){l&&l.call(this),t.remove(this.constructor)};else{c=this.component.parentFragment;do{if(c.owner.type!==e.ELEMENT)continue;c.owner.willDetach&&(h=c.owner)}while(!h&&(c=c.parent));if(!h)throw new Error("A component is being torn down but doesn't have a nearest detaching element... this shouldn't happen!");h.cssDetachQueue.push(this.constructor)}u=new r(function(e){a=e}),n.start(this,a),this.fragment.teardown(f);while(this._animations[0])this._animations[0].stop();for(o in this._cache)i(this,o);while(p=this._unresolvedImplicitDependencies.pop())p.teardown();return n.end(),s&&u.then(s.bind(this)),u}}(B,E,A,d,j),Ur=function(){return this.fragment.toString()},zr=function(e,t){var n;if(typeof e!="string"){if(this.debug)throw new Error("Bad arguments");return}return n=this.get(e),this.set(e,!n,t)},Wr=function(e,t,n,r){return function(i,s){var o,u;return typeof i=="function"?(s=i,i=""):i=i||"",o=new t(function(e){u=e}),e.start(this,u),n(this,i),r(this,i),e.end(),this.fire("update",i),s&&o.then(s.bind(this)),o}}(A,d,j,k),Xr=function(e,t,n){function r(e,i,s,o,u){var a,f,l,c,h,p;a=e._twowayBindings[i];if(a){l=a.length;while(l--){c=a[l];if(c.radioName&&!c.node.checked)continue;if(c.checkboxName){c.changed()&&o[i]!==!0&&(o[i]=!0,o.push(i));continue}h=c.attr.value,p=c.value();if(t(h,p))continue;n(h,p)||(s[i]=p)}}if(!u)return;f=e._depsMap[i];if(f){l=f.length;while(l--)r(e,f[l],s,o,u)}}return function(n,i){var s,o,u;typeof n!="string"&&(n="",i=!0),r(this,n,s={},o=[],i);if(u=o.length)while(u--)n=o[u],s[n]=e(this,n);this.set(s)}}(S,gn,p),Vr=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){return{add:e,animate:t,detach:n,find:r,findAll:i,findAllComponents:s,findComponent:o,fire:u,get:a,insert:f,merge:l,observe:c,off:h,on:p,render:d,renderHTML:v,reset:m,set:g,subtract:y,teardown:b,toHTML:w,toggle:E,update:S,updateModel:x}}(h,rt,it,st,vt,mt,gt,yt,wt,St,Nt,Ot,Mt,_t,Br,jr,Fr,Ir,qr,Rr,Ur,zr,Wr,Xr),$r={},Jr={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)}},Kr=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e=="x"?t:t&3|8,n.toString(16)})},Qr=function(e){var t,n,r=Array.prototype.slice.call(arguments,1);while(n=r.shift())for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},Gr=["adaptors","components","decorators","easing","events","interpolators","partials","transitions","data"],Yr=function(){function r(e){return e.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}function i(e){return e.str}var e=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,t=/\/\*.*?\*\//g,n=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g;return function(o,u){var a,f;return f=function(e){var t,r,s,o,a,f,l,c,h=[];t=[];while(r=n.exec(e))t.push({str:r[0],base:r[1],modifiers:r[2]});o='[data-rvcguid="'+u+'"]',a=t.map(i),c=t.length;while(c--)l=a.slice(),s=t[c],l[c]=s.base+o+s.modifiers||"",f=a.slice(),f[c]=o+" "+f[c],h.push(l.join(" "),f.join(" "));return h.join(", ")},a=o.replace(t,"").replace(e,function(e,t){var n,i;return n=t.split(",").map(r),i=n.map(f).join(", ")+" ",e.replace(t,i)}),a}}(),Zr=function(e,t,n,r){return function(i,s){e.forEach(function(e){s[e]&&(i[e]=t(s[e]))}),n(i,"defaults",{value:t(s.defaults)}),s.css&&n(i,"css",{value:s.defaults.noCssTransform?s.css:r(s.css,i._guid)})}}(Gr,Dt,a,Yr),ei=function(e,t){return/_super/.test(e)?function(){var n=this._super,r;return this._super=t,r=e.apply(this,arguments),this._super=n,r}:e},ti=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},ni=function(e,t,n,r,i,s){var o={};return t.concat(e.keys).forEach(function(e){o[e]=!0}),function(u,a){var f,l;t.forEach(function(e){var t=a[e];t&&(u[e]?i(u[e],t):u[e]=t)}),e.keys.forEach(function(e){var t=a[e];t!==undefined&&(typeof t=="function"&&typeof u[e]=="function"?u.defaults[e]=r(t,u[e]):u.defaults[e]=a[e])});for(f in a)!o[f]&&a.hasOwnProperty(f)&&(l=a[f],typeof l=="function"&&typeof u.prototype[f]=="function"?u.prototype[f]=r(l,u.prototype[f]):u.prototype[f]=l);a.css&&n(u,"css",{value:u.defaults.noCssTransform?a.css:s(a.css,u._guid)})}}(r,Gr,a,ei,ti,Yr),ri=function(e,t){return function(n,r){e(n.defaults.template)&&(n.partials||(n.partials={}),t(n.partials,n.defaults.template.partials),r.partials&&t(n.partials,r.partials),n.defaults.template=n.defaults.template.main)}}(Z,ti),ii=function(e,t,n){return function(r){var i;if(typeof r.defaults.template=="string"){if(!n)throw new Error(e.missingParser);if(r.defaults.template.charAt(0)==="#"&&t){i=document.getElementById(r.defaults.template.substring(1));if(!i||i.tagName!=="SCRIPT")throw new Error("Could not find template element ("+r.defaults.template+")");r.defaults.template=n(i.innerHTML,r)}else r.defaults.template=n(r.defaults.template,r.defaults)}}}(br,u,Er),si=function(e,t){return function(n){var r;if(n.partials)for(r in n.partials)if(n.partials.hasOwnProperty(r)&&typeof n.partials[r]=="string"){if(!t)throw new Error(e.missingParser);n.partials[r]=t(n.partials[r],n)}}}(br,Er),oi=function(){function t(t){var n="var __ractive=this;return("+t.replace(e,function(e,t){return'__ractive.get("'+t+'")'})+")";return new Function(n)}var e=/\$\{([^\}]+)\}/g;return function(e){return typeof e=="function"?{get:e}:typeof e=="string"?{get:t(e)}:(typeof e=="object"&&typeof e.get=="string"&&(e={get:t(e.get),set:e.set}),e)}}(),ui=function(e,t,n){var r=function(e,n){this.root=e.ractive,this.keypath=n,this.priority=0,this.computation=e,t(this)};return r.prototype={update:function(){var t;t=this.root.get(this.keypath),e(t,this.value)||this.computation.bubble()},teardown:function(){n(this)}},r}(p,V,$),ai=function(e,t,n,r){function s(e,t,n){var i,s,o;i=t.length;while(i--)s=t[i],n[s.keypath]||(t.splice(i,1),t[s.keypath]=null,s.teardown());i=n.length;while(i--)o=n[i],t[o]||(s=new r(e,o),t.push(t[o]=s))}var i=function(e,t,n){this.ractive=e,this.key=t,this.getter=n.get,this.setter=n.set,this.watchers=[],this.update()};return i.prototype={set:function(e){if(this.setting){this.value=e;return}if(!this.setter)throw new Error("Computed properties without setters are read-only in the current version");this.setter.call(this.ractive,e)},update:function(){var t,r,i,o;t=this.ractive,r=t._captured,r||(t._captured=[]);try{i=this.getter.call(t)}catch(u){t.debug&&e('Failed to compute "'+this.key+'": '+u.message||u),o=!0}s(this,this.watchers,t._captured),t._captured=r,o||(this.setting=!0,this.value=i,n(t,this.key,i),this.setting=!1),this.deferred=!1},bubble:function(){this.watchers.length<=1?this.update():this.deferred||(t.addComputation(this),this.deferred=!0)}},i}(Y,A,I,ui),fi=function(e,t){return function(r,i){var s,o;for(s in i)o=e(i[s]),r._computations[s]=new t(r,s,o)}}(oi,ai),li=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=["adapt","modifyArrays","magic","twoway","lazy","debug","isolated"];return function(b,w){var E,S,x,T,N,C,k;c(w.adaptors)&&(i("The `adaptors` option, to indicate which adaptors should be used with a given Ractive instance, has been deprecated in favour of `adapt`. See [TODO] for more information"),w.adapt=w.adaptors,delete w.adaptors),E=b.constructor.defaults,n.keys.forEach(function(e){w[e]===undefined&&(w[e]=E[e])}),g.forEach(function(e){b[e]=w[e]}),typeof b.adapt=="string"&&(b.adapt=[b.adapt]);if(b.magic&&!d)throw new Error("Getters and setters (magic mode) are not supported in this browser");a(b,{_initing:{value:!0,writable:!0},_guid:{value:h()},_subs:{value:s(null),configurable:!0},_cache:{value:{}},_cacheMap:{value:s(null)},_deps:{value:[]},_depsMap:{value:s(null)},_patternObservers:{value:[]},_evaluators:{value:s(null)},_computations:{value:s(null)},_twowayBindings:{value:{}},_animations:{value:[]},nodes:{value:{}},_wrapped:{value:s(null)},_liveQueries:{value:[]},_liveComponentQueries:{value:[]},_childInitQueue:{value:[]},_changes:{value:[]},_unresolvedImplicitDependencies:{value:[]}}),w._parent&&w._component&&(a(b,{_parent:{value:w._parent},component:{value:w._component}}),w._component.instance=b);if(w.el){b.el=f(w.el);if(!b.el&&b.debug)throw new Error("Could not find container element")}w.eventDefinitions&&(i("ractive.eventDefinitions has been deprecated in favour of ractive.events. Support will be removed in future versions"),w.events=w.eventDefinitions),r.forEach(function(e){b.constructor[e]?b[e]=o(s(b.constructor[e]),w[e]):w[e]&&(b[e]=w[e])}),b.data||(b.data={}),k=E.computed?o(s(E.computed),w.computed):w.computed,k&&m(b,k),S=w.template;if(typeof S=="string"){if(!v)throw new Error(t.missingParser);if(S.charAt(0)==="#"&&e){x=document.getElementById(S.substring(1));if(!x)throw new Error("Could not find template element ("+S+")");T=v(x.innerHTML,w)}else T=v(S,w)}else T=S;l(T)&&(u(b.partials,T.partials),T=T.main),T&&T.length===1&&typeof T[0]=="string"&&(T=T[0]),b.template=T,o(b.partials,w.partials),b.parseOptions={preserveWhitespace:w.preserveWhitespace,sanitize:w.sanitize,stripComments:w.stripComments},b.transitionsEnabled=w.noIntro?!1:w.transitionsEnabled,e&&!b.el&&(b.el=document.createDocumentFragment()),b.el&&!w.append&&(b.el.innerHTML=""),N=new p(function(e){C=e}),b.render(b.el,C),w.complete&&N.then(w.complete.bind(b)),b.transitionsEnabled=w.transitionsEnabled,b._initing=!1}}(u,br,r,Gr,Y,Dt,Qr,rr,f,Et,Z,M,Kr,d,z,Er,fi),ci=function(e,t,n){return function(i,s,o){e.keys.forEach(function(e){var n=o[e],r=s.defaults[e];typeof n=="function"&&typeof r=="function"&&(o[e]=t(n,r))}),i.beforeInit&&i.beforeInit(o),n(i,o),o._parent&&o._parent._rendering?o._parent._childInitQueue.push({instance:i,options:o}):i.init&&i.init(o)}}(r,ei,li),hi=function(e,t,n,r,i,s,o,u,a,f,l){var c;return l.push(function(){c=l.Ractive}),function(h){var p=this,d,v,m;h.prototype instanceof c&&(h=r({},h,h.prototype,h.defaults)),d=function(e){f(this,d,e||{})},d.prototype=e(p.prototype),d.prototype.constructor=d,t(d,{extend:{value:p.extend},_guid:{value:n()}}),i(d,p),s(d,h);if(d.adaptors&&(m=d.defaults.adapt.length))while(m--)v=d.defaults.adapt[m],typeof v=="string"&&(d.defaults.adapt[m]=d.adaptors[v]||v);return h.template&&(u(d),o(d,h),a(d)),d}}(Dt,f,Kr,Qr,Zr,ni,ri,ii,si,ci,b),pi=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=function(e){h(this,e)};return d.prototype=r,n(d,{partials:{value:i},adaptors:{value:s},easing:{value:u},transitions:{value:{}},events:{value:{}},components:{value:o},decorators:{value:{}},interpolators:{value:a},defaults:{value:e.defaults},svg:{value:t},VERSION:{value:"0.4.0"}}),d.eventDefinitions=d.events,d.prototype.constructor=d,d.Promise=f,d.extend=l,d.parse=c,p.Ractive=d,d}(r,i,f,Vr,wr,D,$r,Jr,et,d,hi,Er,li,b),di=function(e,t){var n="function";while(t.length)t.pop()();if(typeof Date.now!==n||typeof String.prototype.trim!==n||typeof Object.keys!==n||typeof Array.prototype.indexOf!==n||typeof Array.prototype.forEach!==n||typeof Array.prototype.map!==n||typeof Array.prototype.filter!==n||typeof window!="undefined"&&typeof window.addEventListener!==n)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return typeof window!="undefined"&&window.Node&&!window.Node.prototype.contains&&window.HTMLElement&&window.HTMLElement.prototype.contains&&(window.Node.prototype.contains=window.HTMLElement.prototype.contains),e}(pi,b,n);typeof module!="undefined"&&module.exports?module.exports=di:typeof define=="function"&&define.amd&&define([],function(){return di}),e.Ractive=di,di.noConflict=function(){return e.Ractive=t,di}})(typeof window!="undefined"?window:this);