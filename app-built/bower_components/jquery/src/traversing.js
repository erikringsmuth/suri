define(["./core","./traversing/var/rneedsContext","./core/init","./traversing/findFilter","./selector"],function(e,t){function i(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}var n=/^(?:parents|prev(?:Until|All))/,r={children:!0,contents:!0,next:!0,prev:!0};return e.extend({dir:function(t,n,r){var i=[],s=t[n];while(s&&s.nodeType!==9&&(r===undefined||s.nodeType!==1||!e(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}}),e.fn.extend({has:function(t){var n,r=e(t,this),i=r.length;return this.filter(function(){for(n=0;n<i;n++)if(e.contains(this,r[n]))return!0})},closest:function(n,r){var i,s=0,o=this.length,u=[],a=t.test(n)||typeof n!="string"?e(n,r||this.context):0;for(;s<o;s++)for(i=this[s];i&&i!==r;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:i.nodeType===1&&e.find.matchesSelector(i,n))){u.push(i);break}return this.pushStack(u.length>1?e.unique(u):u)},index:function(t){return t?typeof t=="string"?e.inArray(this[0],e(t)):e.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,n){return this.pushStack(e.unique(e.merge(this.get(),e(t,n))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),e.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(t){return e.dir(t,"parentNode")},parentsUntil:function(t,n,r){return e.dir(t,"parentNode",r)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(t){return e.dir(t,"nextSibling")},prevAll:function(t){return e.dir(t,"previousSibling")},nextUntil:function(t,n,r){return e.dir(t,"nextSibling",r)},prevUntil:function(t,n,r){return e.dir(t,"previousSibling",r)},siblings:function(t){return e.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return e.sibling(t.firstChild)},contents:function(t){return e.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:e.merge([],t.childNodes)}},function(t,i){e.fn[t]=function(s,o){var u=e.map(this,i,s);return t.slice(-5)!=="Until"&&(o=s),o&&typeof o=="string"&&(u=e.filter(o,u)),this.length>1&&(r[t]||(u=e.unique(u)),n.test(t)&&(u=u.reverse())),this.pushStack(u)}}),e});