define(["utils/getName","utils/extractFragment"],function(e,t){var n=/require\s*\(\s*(?:"([^"]+)"|'([^']+)')\s*\)/g;return function(i){var s,o,u,a,f,l,c,h,p,d;s=Ractive.parse(i,{noStringify:!0,interpolateScripts:!1,interpolateStyles:!1}),o=[],a=[],l=[],h=[],p=s.length;while(p--)d=s[p],d&&d.t===7&&(d.e==="link"&&d.a&&d.a.rel[0]==="ractive"&&o.push(s.splice(p,1)[0]),d.e==="script"&&(!d.a||!d.a.type||d.a.type[0]==="text/javascript")&&a.push(s.splice(p,1)[0]),d.e==="style"&&(!d.a||!d.a.type||d.a.type[0]==="text/css")&&l.push(s.splice(p,1)[0]));u=o.map(function(t){var n,r;n=t.a.href&&t.a.href[0],r=t.a.name&&t.a.name[0]||e(n);if(typeof r!="string")throw new Error("Error parsing link tag");return{name:r,href:n}}),f=a.map(t).join(";");while(c=n.exec(f))h.push(c[1]||c[2]);return{template:s,imports:u,script:f,css:l.map(t).join(" "),modules:h}}});