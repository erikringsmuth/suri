(function(e,t){typeof exports=="object"?module.exports=t(require("./URI")):typeof define=="function"&&define.amd?define(["./URI"],t):t(e.URI)})(this,function(e){var t=e.prototype,n=t.fragment,r=t.build;e.fragmentPrefix="!";var i=e._parts;return e._parts=function(){var t=i();return t.fragmentPrefix=e.fragmentPrefix,t},t.fragmentPrefix=function(e){return this._parts.fragmentPrefix=e,this},t.fragment=function(t,r){var i=this._parts.fragmentPrefix,s=this._parts.fragment||"",o;return t===!0?(s.substring(0,i.length)!==i?o=e(""):o=new e(s.substring(i.length)),this._fragmentURI=o,o._parentURI=this,o):t!==undefined&&typeof t!="string"?(this._fragmentURI=t,t._parentURI=t,this._parts.fragment=i+t.toString(),this.build(!r),this):(typeof t=="string"&&(this._fragmentURI=undefined),n.call(this,t,r))},t.build=function(e){var t=r.call(this,e);return e!==!1&&this._parentURI&&this._parentURI.fragment(this),t},e});